import"../chunks/CWj6FrbW.js";import"../chunks/CQrQ0qih.js";import{o as Y,e as q,s as z}from"../chunks/DnqN1B_O.js";import{p as B,f as d,t as I,a as s,b as D,c as n,s as u,g as i,m as w,r as l,d as v,e as F}from"../chunks/DzhpilHP.js";import{i as f,s as G,a as L}from"../chunks/BJkmK1v7.js";import{i as H}from"../chunks/DRIWHLjr.js";import{i as J,p as K,l as N}from"../chunks/Dzb02Au1.js";import{g as O}from"../chunks/BMpwiHML.js";var Q=d('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),T=d("<span>Logging in...</span>"),V=d("<span>Already Logged In</span>"),W=d('<p class="text-xs text-gray-600 mt-4 text-center">You will be redirected to the Internet Identity service.</p>'),X=d('<div class="flex items-center justify-center min-h-screen bg-gray-200"><div class="p-8 bg-white shadow-xl rounded-lg max-w-md w-full"><h1 class="text-3xl font-bold text-center text-blue-600 mb-6">ICP Calendar Login</h1> <!> <p class="text-gray-700 mb-6 text-center">Please log in using your Internet Identity to access the calendar.</p> <button class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline transition duration-150 ease-in-out disabled:opacity-50"><!></button> <!></div></div>');function ie(P,$){B($,!1);const[_,k]=G(),p=()=>L(J,"$isLoggedIn",_),C=()=>L(K,"$page",_);let r=w(!1),c=w(null);Y(()=>{if(p()){const e=C().url.searchParams.get("redirect"),t=e?decodeURIComponent(e):"/";O(t,{replaceState:!0})}});const E=async()=>{v(r,!0),v(c,null);try{await N()}catch(e){console.error("Login attempt failed:",e),v(c,"Login failed. Please try again. Ensure your Internet Identity is set up and pop-ups are allowed."),v(r,!1)}};H();var m=X(),h=n(m),y=u(n(h),2);{var M=e=>{var t=Q(),g=u(n(t),2),b=n(g,!0);l(g),l(t),I(()=>z(b,i(c))),s(e,t)};f(y,e=>{i(c)&&e(M)})}var o=u(y,4),j=n(o);{var A=e=>{var t=T();s(e,t)},R=(e,t)=>{{var g=a=>{var x=V();s(a,x)},b=a=>{var x=F("Log In with Internet Identity");s(a,x)};f(e,a=>{p()?a(g):a(b,!1)},t)}};f(j,e=>{i(r)?e(A):e(R,!1)})}l(o);var S=u(o,2);{var U=e=>{var t=W();s(e,t)};f(S,e=>{!p()&&!i(r)&&e(U)})}l(h),l(m),I(()=>o.disabled=i(r)||p()),q("click",o,E),s(P,m),D(),k()}export{ie as component};
