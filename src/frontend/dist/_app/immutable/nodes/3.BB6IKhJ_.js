import"../chunks/CWj6FrbW.js";import{i as Y}from"../chunks/Cs4QL9IF.js";import{p as q,o as z,f as d,t as I,e as B,a as s,b as D,s as u,c as n,g as i,m as w,r as l,d as v,h as F,i as G}from"../chunks/eYI7KlxY.js";import{i as f,s as H,a as L}from"../chunks/2Ohol5Ic.js";import{i as J,p as K,l as N}from"../chunks/cNirouDd.js";import{g as O}from"../chunks/B-jD-U20.js";var Q=d('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),T=d("<span>Logging in...</span>"),V=d("<span>Already Logged In</span>"),W=d('<p class="text-xs text-gray-600 mt-4 text-center">You will be redirected to the Internet Identity service.</p>'),X=d('<div class="flex items-center justify-center min-h-screen bg-gray-200"><div class="p-8 bg-white shadow-xl rounded-lg max-w-md w-full"><h1 class="text-3xl font-bold text-center text-blue-600 mb-6">ICP Calendar Login</h1> <!> <p class="text-gray-700 mb-6 text-center">Please log in using your Internet Identity to access the calendar.</p> <button class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline transition duration-150 ease-in-out disabled:opacity-50"><!></button> <!></div></div>');function oe(P,$){q($,!1);const[_,k]=H(),c=()=>L(J,"$isLoggedIn",_),C=()=>L(K,"$page",_);let r=w(!1),p=w(null);z(()=>{if(c()){const e=C().url.searchParams.get("redirect"),t=e?decodeURIComponent(e):"/";O(t,{replaceState:!0})}});const E=async()=>{v(r,!0),v(p,null);try{await N()}catch(e){console.error("Login attempt failed:",e),v(p,"Login failed. Please try again. Ensure your Internet Identity is set up and pop-ups are allowed."),v(r,!1)}};Y();var m=X(),h=n(m),y=u(n(h),2);{var M=e=>{var t=Q(),g=u(n(t),2),b=n(g,!0);l(g),l(t),I(()=>F(b,i(p))),s(e,t)};f(y,e=>{i(p)&&e(M)})}var o=u(y,4),j=n(o);{var A=e=>{var t=T();s(e,t)},R=(e,t)=>{{var g=a=>{var x=V();s(a,x)},b=a=>{var x=G("Log In with Internet Identity");s(a,x)};f(e,a=>{c()?a(g):a(b,!1)},t)}};f(j,e=>{i(r)?e(A):e(R,!1)})}l(o);var S=u(o,2);{var U=e=>{var t=W();s(e,t)};f(S,e=>{!c()&&!i(r)&&e(U)})}l(h),l(m),I(()=>o.disabled=i(r)||c()),B("click",o,E),s(P,m),D(),k()}export{oe as component};
