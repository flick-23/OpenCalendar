import{_ as wc}from"./Dp1pzeXC.js";var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ui={},Fr={},fs;function yo(){if(fs)return Fr;fs=1,Fr.byteLength=o,Fr.toByteArray=b,Fr.fromByteArray=v;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,c=n.length;i<c;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function f(_){var y=_.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var $=_.indexOf("=");$===-1&&($=y);var V=$===y?0:4-$%4;return[$,V]}function o(_){var y=f(_),$=y[0],V=y[1];return($+V)*3/4-V}function w(_,y,$){return(y+$)*3/4-$}function b(_){var y,$=f(_),V=$[0],Y=$[1],z=new r(w(_,V,Y)),W=0,ie=Y>0?V-4:V,R;for(R=0;R<ie;R+=4)y=t[_.charCodeAt(R)]<<18|t[_.charCodeAt(R+1)]<<12|t[_.charCodeAt(R+2)]<<6|t[_.charCodeAt(R+3)],z[W++]=y>>16&255,z[W++]=y>>8&255,z[W++]=y&255;return Y===2&&(y=t[_.charCodeAt(R)]<<2|t[_.charCodeAt(R+1)]>>4,z[W++]=y&255),Y===1&&(y=t[_.charCodeAt(R)]<<10|t[_.charCodeAt(R+1)]<<4|t[_.charCodeAt(R+2)]>>2,z[W++]=y>>8&255,z[W++]=y&255),z}function A(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function m(_,y,$){for(var V,Y=[],z=y;z<$;z+=3)V=(_[z]<<16&16711680)+(_[z+1]<<8&65280)+(_[z+2]&255),Y.push(A(V));return Y.join("")}function v(_){for(var y,$=_.length,V=$%3,Y=[],z=16383,W=0,ie=$-V;W<ie;W+=z)Y.push(m(_,W,W+z>ie?ie:W+z));return V===1?(y=_[$-1],Y.push(e[y>>2]+e[y<<4&63]+"==")):V===2&&(y=(_[$-2]<<8)+_[$-1],Y.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),Y.join("")}return Fr}var tn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ls;function Di(){return ls||(ls=1,tn.read=function(e,t,r,n,i){var c,f,o=i*8-n-1,w=(1<<o)-1,b=w>>1,A=-7,m=r?i-1:0,v=r?-1:1,_=e[t+m];for(m+=v,c=_&(1<<-A)-1,_>>=-A,A+=o;A>0;c=c*256+e[t+m],m+=v,A-=8);for(f=c&(1<<-A)-1,c>>=-A,A+=n;A>0;f=f*256+e[t+m],m+=v,A-=8);if(c===0)c=1-b;else{if(c===w)return f?NaN:(_?-1:1)*(1/0);f=f+Math.pow(2,n),c=c-b}return(_?-1:1)*f*Math.pow(2,c-n)},tn.write=function(e,t,r,n,i,c){var f,o,w,b=c*8-i-1,A=(1<<b)-1,m=A>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:c-1,y=n?1:-1,$=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,f=A):(f=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+m>=1?t+=v/w:t+=v*Math.pow(2,1-m),t*w>=2&&(f++,w/=2),f+m>=A?(o=0,f=A):f+m>=1?(o=(t*w-1)*Math.pow(2,i),f=f+m):(o=t*Math.pow(2,m-1)*Math.pow(2,i),f=0));i>=8;e[r+_]=o&255,_+=y,o/=256,i-=8);for(f=f<<i|o,b+=i;b>0;e[r+_]=f&255,_+=y,f/=256,b-=8);e[r+_-y]|=$*128}),tn}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hs;function bc(){return hs||(hs=1,function(e){const t=yo(),r=Di(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=z,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,o.prototype),u}function o(p,u,l){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(p)}return w(p,u,l)}o.poolSize=8192;function w(p,u,l){if(typeof p=="string")return v(p,u);if(ArrayBuffer.isView(p))return y(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(K(p,ArrayBuffer)||p&&K(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(p,SharedArrayBuffer)||p&&K(p.buffer,SharedArrayBuffer)))return $(p,u,l);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=p.valueOf&&p.valueOf();if(N!=null&&N!==p)return o.from(N,u,l);const H=V(p);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return o.from(p[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}o.from=function(p,u,l){return w(p,u,l)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function b(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function A(p,u,l){return b(p),p<=0?f(p):u!==void 0?typeof l=="string"?f(p).fill(u,l):f(p).fill(u):f(p)}o.alloc=function(p,u,l){return A(p,u,l)};function m(p){return b(p),f(p<0?0:Y(p)|0)}o.allocUnsafe=function(p){return m(p)},o.allocUnsafeSlow=function(p){return m(p)};function v(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=W(p,u)|0;let N=f(l);const H=N.write(p,u);return H!==l&&(N=N.slice(0,H)),N}function _(p){const u=p.length<0?0:Y(p.length)|0,l=f(u);for(let N=0;N<u;N+=1)l[N]=p[N]&255;return l}function y(p){if(K(p,Uint8Array)){const u=new Uint8Array(p);return $(u.buffer,u.byteOffset,u.byteLength)}return _(p)}function $(p,u,l){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let N;return u===void 0&&l===void 0?N=new Uint8Array(p):l===void 0?N=new Uint8Array(p,u):N=new Uint8Array(p,u,l),Object.setPrototypeOf(N,o.prototype),N}function V(p){if(o.isBuffer(p)){const u=Y(p.length)|0,l=f(u);return l.length===0||p.copy(l,0,0,u),l}if(p.length!==void 0)return typeof p.length!="number"||se(p.length)?f(0):_(p);if(p.type==="Buffer"&&Array.isArray(p.data))return _(p.data)}function Y(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function z(p){return+p!=p&&(p=0),o.alloc(+p)}o.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==o.prototype},o.compare=function(u,l){if(K(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),K(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(u)||!o.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let N=u.length,H=l.length;for(let X=0,Z=Math.min(N,H);X<Z;++X)if(u[X]!==l[X]){N=u[X],H=l[X];break}return N<H?-1:H<N?1:0},o.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return o.alloc(0);let N;if(l===void 0)for(l=0,N=0;N<u.length;++N)l+=u[N].length;const H=o.allocUnsafe(l);let X=0;for(N=0;N<u.length;++N){let Z=u[N];if(K(Z,Uint8Array))X+Z.length>H.length?(o.isBuffer(Z)||(Z=o.from(Z)),Z.copy(H,X)):Uint8Array.prototype.set.call(H,Z,X);else if(o.isBuffer(Z))Z.copy(H,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=Z.length}return H};function W(p,u){if(o.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||K(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const l=p.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&l===0)return 0;let H=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return s(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return E(p).length;default:if(H)return N?-1:s(p).length;u=(""+u).toLowerCase(),H=!0}}o.byteLength=W;function ie(p,u,l){let N=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return ue(this,u,l);case"utf8":case"utf-8":return T(this,u,l);case"ascii":return D(this,u,l);case"latin1":case"binary":return re(this,u,l);case"base64":return d(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,u,l);default:if(N)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),N=!0}}o.prototype._isBuffer=!0;function R(p,u,l){const N=p[u];p[u]=p[l],p[l]=N}o.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)R(this,l,l+1);return this},o.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)R(this,l,l+3),R(this,l+1,l+2);return this},o.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)R(this,l,l+7),R(this,l+1,l+6),R(this,l+2,l+5),R(this,l+3,l+4);return this},o.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?T(this,0,u):ie.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(u){if(!o.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:o.compare(this,u)===0},o.prototype.inspect=function(){let u="";const l=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(u,l,N,H,X){if(K(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),N===void 0&&(N=u?u.length:0),H===void 0&&(H=0),X===void 0&&(X=this.length),l<0||N>u.length||H<0||X>this.length)throw new RangeError("out of range index");if(H>=X&&l>=N)return 0;if(H>=X)return-1;if(l>=N)return 1;if(l>>>=0,N>>>=0,H>>>=0,X>>>=0,this===u)return 0;let Z=X-H,ge=N-l;const _e=Math.min(Z,ge),me=this.slice(H,X),we=u.slice(l,N);for(let Se=0;Se<_e;++Se)if(me[Se]!==we[Se]){Z=me[Se],ge=we[Se];break}return Z<ge?-1:ge<Z?1:0};function J(p,u,l,N,H){if(p.length===0)return-1;if(typeof l=="string"?(N=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,se(l)&&(l=H?0:p.length-1),l<0&&(l=p.length+l),l>=p.length){if(H)return-1;l=p.length-1}else if(l<0)if(H)l=0;else return-1;if(typeof u=="string"&&(u=o.from(u,N)),o.isBuffer(u))return u.length===0?-1:L(p,u,l,N,H);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(p,u,l):Uint8Array.prototype.lastIndexOf.call(p,u,l):L(p,[u],l,N,H);throw new TypeError("val must be string, number or Buffer")}function L(p,u,l,N,H){let X=1,Z=p.length,ge=u.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(p.length<2||u.length<2)return-1;X=2,Z/=2,ge/=2,l/=2}function _e(we,Se){return X===1?we[Se]:we.readUInt16BE(Se*X)}let me;if(H){let we=-1;for(me=l;me<Z;me++)if(_e(p,me)===_e(u,we===-1?0:me-we)){if(we===-1&&(we=me),me-we+1===ge)return we*X}else we!==-1&&(me-=me-we),we=-1}else for(l+ge>Z&&(l=Z-ge),me=l;me>=0;me--){let we=!0;for(let Se=0;Se<ge;Se++)if(_e(p,me+Se)!==_e(u,Se)){we=!1;break}if(we)return me}return-1}o.prototype.includes=function(u,l,N){return this.indexOf(u,l,N)!==-1},o.prototype.indexOf=function(u,l,N){return J(this,u,l,N,!0)},o.prototype.lastIndexOf=function(u,l,N){return J(this,u,l,N,!1)};function I(p,u,l,N){l=Number(l)||0;const H=p.length-l;N?(N=Number(N),N>H&&(N=H)):N=H;const X=u.length;N>X/2&&(N=X/2);let Z;for(Z=0;Z<N;++Z){const ge=parseInt(u.substr(Z*2,2),16);if(se(ge))return Z;p[l+Z]=ge}return Z}function F(p,u,l,N){return O(s(u,p.length-l),p,l,N)}function P(p,u,l,N){return O(a(u),p,l,N)}function Q(p,u,l,N){return O(E(u),p,l,N)}function te(p,u,l,N){return O(g(u,p.length-l),p,l,N)}o.prototype.write=function(u,l,N,H){if(l===void 0)H="utf8",N=this.length,l=0;else if(N===void 0&&typeof l=="string")H=l,N=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(N)?(N=N>>>0,H===void 0&&(H="utf8")):(H=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-l;if((N===void 0||N>X)&&(N=X),u.length>0&&(N<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let Z=!1;for(;;)switch(H){case"hex":return I(this,u,l,N);case"utf8":case"utf-8":return F(this,u,l,N);case"ascii":case"latin1":case"binary":return P(this,u,l,N);case"base64":return Q(this,u,l,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,u,l,N);default:if(Z)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),Z=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(p,u,l){return u===0&&l===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,l))}function T(p,u,l){l=Math.min(p.length,l);const N=[];let H=u;for(;H<l;){const X=p[H];let Z=null,ge=X>239?4:X>223?3:X>191?2:1;if(H+ge<=l){let _e,me,we,Se;switch(ge){case 1:X<128&&(Z=X);break;case 2:_e=p[H+1],(_e&192)===128&&(Se=(X&31)<<6|_e&63,Se>127&&(Z=Se));break;case 3:_e=p[H+1],me=p[H+2],(_e&192)===128&&(me&192)===128&&(Se=(X&15)<<12|(_e&63)<<6|me&63,Se>2047&&(Se<55296||Se>57343)&&(Z=Se));break;case 4:_e=p[H+1],me=p[H+2],we=p[H+3],(_e&192)===128&&(me&192)===128&&(we&192)===128&&(Se=(X&15)<<18|(_e&63)<<12|(me&63)<<6|we&63,Se>65535&&Se<1114112&&(Z=Se))}}Z===null?(Z=65533,ge=1):Z>65535&&(Z-=65536,N.push(Z>>>10&1023|55296),Z=56320|Z&1023),N.push(Z),H+=ge}return j(N)}const M=4096;function j(p){const u=p.length;if(u<=M)return String.fromCharCode.apply(String,p);let l="",N=0;for(;N<u;)l+=String.fromCharCode.apply(String,p.slice(N,N+=M));return l}function D(p,u,l){let N="";l=Math.min(p.length,l);for(let H=u;H<l;++H)N+=String.fromCharCode(p[H]&127);return N}function re(p,u,l){let N="";l=Math.min(p.length,l);for(let H=u;H<l;++H)N+=String.fromCharCode(p[H]);return N}function ue(p,u,l){const N=p.length;(!u||u<0)&&(u=0),(!l||l<0||l>N)&&(l=N);let H="";for(let X=u;X<l;++X)H+=fe[p[X]];return H}function ye(p,u,l){const N=p.slice(u,l);let H="";for(let X=0;X<N.length-1;X+=2)H+=String.fromCharCode(N[X]+N[X+1]*256);return H}o.prototype.slice=function(u,l){const N=this.length;u=~~u,l=l===void 0?N:~~l,u<0?(u+=N,u<0&&(u=0)):u>N&&(u=N),l<0?(l+=N,l<0&&(l=0)):l>N&&(l=N),l<u&&(l=u);const H=this.subarray(u,l);return Object.setPrototypeOf(H,o.prototype),H};function oe(p,u,l){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>l)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(u,l,N){u=u>>>0,l=l>>>0,N||oe(u,l,this.length);let H=this[u],X=1,Z=0;for(;++Z<l&&(X*=256);)H+=this[u+Z]*X;return H},o.prototype.readUintBE=o.prototype.readUIntBE=function(u,l,N){u=u>>>0,l=l>>>0,N||oe(u,l,this.length);let H=this[u+--l],X=1;for(;l>0&&(X*=256);)H+=this[u+--l]*X;return H},o.prototype.readUint8=o.prototype.readUInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]|this[u+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]<<8|this[u+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},o.prototype.readBigUInt64LE=he(function(u){u=u>>>0,C(u,"offset");const l=this[u],N=this[u+7];(l===void 0||N===void 0)&&k(u,this.length-8);const H=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,X=this[++u]+this[++u]*2**8+this[++u]*2**16+N*2**24;return BigInt(H)+(BigInt(X)<<BigInt(32))}),o.prototype.readBigUInt64BE=he(function(u){u=u>>>0,C(u,"offset");const l=this[u],N=this[u+7];(l===void 0||N===void 0)&&k(u,this.length-8);const H=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],X=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+N;return(BigInt(H)<<BigInt(32))+BigInt(X)}),o.prototype.readIntLE=function(u,l,N){u=u>>>0,l=l>>>0,N||oe(u,l,this.length);let H=this[u],X=1,Z=0;for(;++Z<l&&(X*=256);)H+=this[u+Z]*X;return X*=128,H>=X&&(H-=Math.pow(2,8*l)),H},o.prototype.readIntBE=function(u,l,N){u=u>>>0,l=l>>>0,N||oe(u,l,this.length);let H=l,X=1,Z=this[u+--H];for(;H>0&&(X*=256);)Z+=this[u+--H]*X;return X*=128,Z>=X&&(Z-=Math.pow(2,8*l)),Z},o.prototype.readInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},o.prototype.readInt16LE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const N=this[u]|this[u+1]<<8;return N&32768?N|4294901760:N},o.prototype.readInt16BE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const N=this[u+1]|this[u]<<8;return N&32768?N|4294901760:N},o.prototype.readInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},o.prototype.readInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},o.prototype.readBigInt64LE=he(function(u){u=u>>>0,C(u,"offset");const l=this[u],N=this[u+7];(l===void 0||N===void 0)&&k(u,this.length-8);const H=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(N<<24);return(BigInt(H)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),o.prototype.readBigInt64BE=he(function(u){u=u>>>0,C(u,"offset");const l=this[u],N=this[u+7];(l===void 0||N===void 0)&&k(u,this.length-8);const H=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(H)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+N)}),o.prototype.readFloatLE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!0,23,4)},o.prototype.readFloatBE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!1,23,4)},o.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!0,52,8)},o.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!1,52,8)};function le(p,u,l,N,H,X){if(!o.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>H||u<X)throw new RangeError('"value" argument is out of bounds');if(l+N>p.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(u,l,N,H){if(u=+u,l=l>>>0,N=N>>>0,!H){const ge=Math.pow(2,8*N)-1;le(this,u,l,N,ge,0)}let X=1,Z=0;for(this[l]=u&255;++Z<N&&(X*=256);)this[l+Z]=u/X&255;return l+N},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(u,l,N,H){if(u=+u,l=l>>>0,N=N>>>0,!H){const ge=Math.pow(2,8*N)-1;le(this,u,l,N,ge,0)}let X=N-1,Z=1;for(this[l+X]=u&255;--X>=0&&(Z*=256);)this[l+X]=u/Z&255;return l+N},o.prototype.writeUint8=o.prototype.writeUInt8=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,1,255,0),this[l]=u&255,l+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function Ne(p,u,l,N,H){U(u,N,H,p,l,7);let X=Number(u&BigInt(4294967295));p[l++]=X,X=X>>8,p[l++]=X,X=X>>8,p[l++]=X,X=X>>8,p[l++]=X;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return p[l++]=Z,Z=Z>>8,p[l++]=Z,Z=Z>>8,p[l++]=Z,Z=Z>>8,p[l++]=Z,l}function S(p,u,l,N,H){U(u,N,H,p,l,7);let X=Number(u&BigInt(4294967295));p[l+7]=X,X=X>>8,p[l+6]=X,X=X>>8,p[l+5]=X,X=X>>8,p[l+4]=X;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return p[l+3]=Z,Z=Z>>8,p[l+2]=Z,Z=Z>>8,p[l+1]=Z,Z=Z>>8,p[l]=Z,l+8}o.prototype.writeBigUInt64LE=he(function(u,l=0){return Ne(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=he(function(u,l=0){return S(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(u,l,N,H){if(u=+u,l=l>>>0,!H){const _e=Math.pow(2,8*N-1);le(this,u,l,N,_e-1,-_e)}let X=0,Z=1,ge=0;for(this[l]=u&255;++X<N&&(Z*=256);)u<0&&ge===0&&this[l+X-1]!==0&&(ge=1),this[l+X]=(u/Z>>0)-ge&255;return l+N},o.prototype.writeIntBE=function(u,l,N,H){if(u=+u,l=l>>>0,!H){const _e=Math.pow(2,8*N-1);le(this,u,l,N,_e-1,-_e)}let X=N-1,Z=1,ge=0;for(this[l+X]=u&255;--X>=0&&(Z*=256);)u<0&&ge===0&&this[l+X+1]!==0&&(ge=1),this[l+X]=(u/Z>>0)-ge&255;return l+N},o.prototype.writeInt8=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},o.prototype.writeInt16LE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeInt16BE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeInt32LE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},o.prototype.writeInt32BE=function(u,l,N){return u=+u,l=l>>>0,N||le(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},o.prototype.writeBigInt64LE=he(function(u,l=0){return Ne(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=he(function(u,l=0){return S(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(p,u,l,N,H,X){if(l+N>p.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Ie(p,u,l,N,H){return u=+u,l=l>>>0,H||Ae(p,u,l,4),r.write(p,u,l,N,23,4),l+4}o.prototype.writeFloatLE=function(u,l,N){return Ie(this,u,l,!0,N)},o.prototype.writeFloatBE=function(u,l,N){return Ie(this,u,l,!1,N)};function ae(p,u,l,N,H){return u=+u,l=l>>>0,H||Ae(p,u,l,8),r.write(p,u,l,N,52,8),l+8}o.prototype.writeDoubleLE=function(u,l,N){return ae(this,u,l,!0,N)},o.prototype.writeDoubleBE=function(u,l,N){return ae(this,u,l,!1,N)},o.prototype.copy=function(u,l,N,H){if(!o.isBuffer(u))throw new TypeError("argument should be a Buffer");if(N||(N=0),!H&&H!==0&&(H=this.length),l>=u.length&&(l=u.length),l||(l=0),H>0&&H<N&&(H=N),H===N||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),u.length-l<H-N&&(H=u.length-l+N);const X=H-N;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,N,H):Uint8Array.prototype.set.call(u,this.subarray(N,H),l),X},o.prototype.fill=function(u,l,N,H){if(typeof u=="string"){if(typeof l=="string"?(H=l,l=0,N=this.length):typeof N=="string"&&(H=N,N=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!o.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(u.length===1){const Z=u.charCodeAt(0);(H==="utf8"&&Z<128||H==="latin1")&&(u=Z)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<N)throw new RangeError("Out of range index");if(N<=l)return this;l=l>>>0,N=N===void 0?this.length:N>>>0,u||(u=0);let X;if(typeof u=="number")for(X=l;X<N;++X)this[X]=u;else{const Z=o.isBuffer(u)?u:o.from(u,H),ge=Z.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(X=0;X<N-l;++X)this[X+l]=Z[X%ge]}return this};const ee={};function ne(p,u,l){ee[p]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),ne("ERR_OUT_OF_RANGE",function(p,u,l){let N=`The value of "${p}" is out of range.`,H=l;return Number.isInteger(l)&&Math.abs(l)>2**32?H=x(String(l)):typeof l=="bigint"&&(H=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(H=x(H)),H+="n"),N+=` It must be ${u}. Received ${H}`,N},RangeError);function x(p){let u="",l=p.length;const N=p[0]==="-"?1:0;for(;l>=N+4;l-=3)u=`_${p.slice(l-3,l)}${u}`;return`${p.slice(0,l)}${u}`}function B(p,u,l){C(u,"offset"),(p[u]===void 0||p[u+l]===void 0)&&k(u,p.length-(l+1))}function U(p,u,l,N,H,X){if(p>l||p<u){const Z=typeof u=="bigint"?"n":"";let ge;throw u===0||u===BigInt(0)?ge=`>= 0${Z} and < 2${Z} ** ${(X+1)*8}${Z}`:ge=`>= -(2${Z} ** ${(X+1)*8-1}${Z}) and < 2 ** ${(X+1)*8-1}${Z}`,new ee.ERR_OUT_OF_RANGE("value",ge,p)}B(N,H,X)}function C(p,u){if(typeof p!="number")throw new ee.ERR_INVALID_ARG_TYPE(u,"number",p)}function k(p,u,l){throw Math.floor(p)!==p?(C(p,l),new ee.ERR_OUT_OF_RANGE("offset","an integer",p)):u<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,p)}const G=/[^+/0-9A-Za-z-_]/g;function h(p){if(p=p.split("=")[0],p=p.trim().replace(G,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function s(p,u){u=u||1/0;let l;const N=p.length;let H=null;const X=[];for(let Z=0;Z<N;++Z){if(l=p.charCodeAt(Z),l>55295&&l<57344){if(!H){if(l>56319){(u-=3)>-1&&X.push(239,191,189);continue}else if(Z+1===N){(u-=3)>-1&&X.push(239,191,189);continue}H=l;continue}if(l<56320){(u-=3)>-1&&X.push(239,191,189),H=l;continue}l=(H-55296<<10|l-56320)+65536}else H&&(u-=3)>-1&&X.push(239,191,189);if(H=null,l<128){if((u-=1)<0)break;X.push(l)}else if(l<2048){if((u-=2)<0)break;X.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;X.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;X.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return X}function a(p){const u=[];for(let l=0;l<p.length;++l)u.push(p.charCodeAt(l)&255);return u}function g(p,u){let l,N,H;const X=[];for(let Z=0;Z<p.length&&!((u-=2)<0);++Z)l=p.charCodeAt(Z),N=l>>8,H=l%256,X.push(H),X.push(N);return X}function E(p){return t.toByteArray(h(p))}function O(p,u,l,N){let H;for(H=0;H<N&&!(H+l>=u.length||H>=p.length);++H)u[H+l]=p[H];return H}function K(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function se(p){return p!==p}const fe=function(){const p="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const N=l*16;for(let H=0;H<16;++H)u[N+H]=p[l]+p[H]}return u}();function he(p){return typeof BigInt>"u"?be:p}function be(){throw new Error("BigInt not supported")}}(ui)),ui}var _c=bc(),Ci;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(Ci||(Ci={}));const Fn="abcdefghijklmnopqrstuvwxyz234567",Ar=Object.create(null);for(let e=0;e<Fn.length;e++)Ar[Fn[e]]=e;Ar[0]=Ar.o;Ar[1]=Ar.i;function xc(e){let t=0,r=0,n="";function i(c){return t<0?r|=c>>-t:r=c<<t&248,t>3?(t-=8,1):(t<4&&(n+=Fn[r>>3],t+=5),0)}for(let c=0;c<e.length;)c+=i(e[c]);return n+(t<0?Fn[r>>3]:"")}function Ec(e){let t=0,r=0;const n=new Uint8Array(e.length*4/3|0);let i=0;function c(f){let o=Ar[f.toLowerCase()];if(o===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);o<<=3,r|=o>>>t,t+=5,t>=8&&(n[i++]=r,t-=8,t>0?r=o<<5-t&255:r=0)}for(const f of e)c(f);return n.slice(0,i)}const Bc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Ac(e){const t=new Uint8Array(e);let r=-1;for(let n=0;n<t.length;n++){const c=(t[n]^r)&255;r=Bc[c]^r>>>8}return(r^-1)>>>0}const fr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function es(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function vc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Xe(e,...t){if(!es(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ds(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tc(e,t){Xe(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function zr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function fi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function yt(e,t){return e<<32-t|e>>>t}const wo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Sc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function vr(e){if(Xe(e),wo)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=Sc[e[r]];return t}const At={_0:48,_9:57,A:65,F:70,a:97,f:102};function ps(e){if(e>=At._0&&e<=At._9)return e-At._0;if(e>=At.A&&e<=At.F)return e-(At.A-10);if(e>=At.a&&e<=At.f)return e-(At.a-10)}function go(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(wo)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,c=0;i<r;i++,c+=2){const f=ps(e.charCodeAt(c)),o=ps(e.charCodeAt(c+1));if(f===void 0||o===void 0){const w=e[c]+e[c+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+c)}n[i]=f*16+o}return n}function Vn(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function mo(e){return typeof e=="string"&&(e=Vn(e)),Xe(e),e}function ke(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Xe(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const c=e[n];r.set(c,i),i+=c.length}return r}class Nc{}function ts(e){const t=n=>e().update(mo(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function bo(e=32){if(fr&&typeof fr.getRandomValues=="function")return fr.getRandomValues(new Uint8Array(e));if(fr&&typeof fr.randomBytes=="function")return Uint8Array.from(fr.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Ic(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),c=BigInt(4294967295),f=Number(r>>i&c),o=Number(r&c),w=n?4:0,b=n?0:4;e.setUint32(t+w,f,n),e.setUint32(t+b,o,n)}function Rc(e,t,r){return e&t^~e&r}function Uc(e,t,r){return e&t^e&r^t&r}class _o extends Nc{constructor(t,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=fi(this.buffer)}update(t){ds(this),t=mo(t),Xe(t);const{view:r,buffer:n,blockLen:i}=this,c=t.length;for(let f=0;f<c;){const o=Math.min(i-this.pos,c-f);if(o===i){const w=fi(t);for(;i<=c-f;f+=i)this.process(w,f);continue}n.set(t.subarray(f,f+o),this.pos),this.pos+=o,f+=o,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ds(this),Tc(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:c}=this;let{pos:f}=this;r[f++]=128,zr(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(n,0),f=0);for(let m=f;m<i;m++)r[m]=0;Ic(n,i-8,BigInt(this.length*8),c),this.process(n,0);const o=fi(t),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=w/4,A=this.get();if(b>A.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<b;m++)o.setUint32(4*m,A[m],c)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:c,destroyed:f,pos:o}=this;return t.destroyed=f,t.finished=c,t.length=i,t.pos=o,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Pt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Je=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),rn=BigInt(2**32-1),ys=BigInt(32);function Fc(e,t=!1){return t?{h:Number(e&rn),l:Number(e>>ys&rn)}:{h:Number(e>>ys&rn)|0,l:Number(e&rn)|0}}function Oc(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let c=0;c<r;c++){const{h:f,l:o}=Fc(e[c],t);[n[c],i[c]]=[f,o]}return[n,i]}const ws=(e,t,r)=>e>>>r,gs=(e,t,r)=>e<<32-r|t>>>r,lr=(e,t,r)=>e>>>r|t<<32-r,hr=(e,t,r)=>e<<32-r|t>>>r,nn=(e,t,r)=>e<<64-r|t>>>r-32,sn=(e,t,r)=>e>>>r-32|t<<64-r;function vt(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Pc=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Mc=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,kc=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Cc=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,qc=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),$c=(e,t,r,n,i,c)=>t+r+n+i+c+(e/2**32|0)|0,Gc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kt=new Uint32Array(64);class xo extends _o{constructor(t=32){super(64,t,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){const{A:t,B:r,C:n,D:i,E:c,F:f,G:o,H:w}=this;return[t,r,n,i,c,f,o,w]}set(t,r,n,i,c,f,o,w){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=f|0,this.G=o|0,this.H=w|0}process(t,r){for(let m=0;m<16;m++,r+=4)kt[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){const v=kt[m-15],_=kt[m-2],y=yt(v,7)^yt(v,18)^v>>>3,$=yt(_,17)^yt(_,19)^_>>>10;kt[m]=$+kt[m-7]+y+kt[m-16]|0}let{A:n,B:i,C:c,D:f,E:o,F:w,G:b,H:A}=this;for(let m=0;m<64;m++){const v=yt(o,6)^yt(o,11)^yt(o,25),_=A+v+Rc(o,w,b)+Gc[m]+kt[m]|0,$=(yt(n,2)^yt(n,13)^yt(n,22))+Uc(n,i,c)|0;A=b,b=w,w=o,o=f+_|0,f=c,c=i,i=n,n=_+$|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,f=f+this.D|0,o=o+this.E|0,w=w+this.F|0,b=b+this.G|0,A=A+this.H|0,this.set(n,i,c,f,o,w,b,A)}roundClean(){zr(kt)}destroy(){this.set(0,0,0,0,0,0,0,0),zr(this.buffer)}}class Vc extends xo{constructor(){super(28),this.A=Mt[0]|0,this.B=Mt[1]|0,this.C=Mt[2]|0,this.D=Mt[3]|0,this.E=Mt[4]|0,this.F=Mt[5]|0,this.G=Mt[6]|0,this.H=Mt[7]|0}}const Eo=Oc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Hc=Eo[0],jc=Eo[1],Ct=new Uint32Array(80),qt=new Uint32Array(80);class zc extends _o{constructor(t=64){super(128,t,16,!1),this.Ah=Je[0]|0,this.Al=Je[1]|0,this.Bh=Je[2]|0,this.Bl=Je[3]|0,this.Ch=Je[4]|0,this.Cl=Je[5]|0,this.Dh=Je[6]|0,this.Dl=Je[7]|0,this.Eh=Je[8]|0,this.El=Je[9]|0,this.Fh=Je[10]|0,this.Fl=Je[11]|0,this.Gh=Je[12]|0,this.Gl=Je[13]|0,this.Hh=Je[14]|0,this.Hl=Je[15]|0}get(){const{Ah:t,Al:r,Bh:n,Bl:i,Ch:c,Cl:f,Dh:o,Dl:w,Eh:b,El:A,Fh:m,Fl:v,Gh:_,Gl:y,Hh:$,Hl:V}=this;return[t,r,n,i,c,f,o,w,b,A,m,v,_,y,$,V]}set(t,r,n,i,c,f,o,w,b,A,m,v,_,y,$,V){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=c|0,this.Cl=f|0,this.Dh=o|0,this.Dl=w|0,this.Eh=b|0,this.El=A|0,this.Fh=m|0,this.Fl=v|0,this.Gh=_|0,this.Gl=y|0,this.Hh=$|0,this.Hl=V|0}process(t,r){for(let W=0;W<16;W++,r+=4)Ct[W]=t.getUint32(r),qt[W]=t.getUint32(r+=4);for(let W=16;W<80;W++){const ie=Ct[W-15]|0,R=qt[W-15]|0,J=lr(ie,R,1)^lr(ie,R,8)^ws(ie,R,7),L=hr(ie,R,1)^hr(ie,R,8)^gs(ie,R,7),I=Ct[W-2]|0,F=qt[W-2]|0,P=lr(I,F,19)^nn(I,F,61)^ws(I,F,6),Q=hr(I,F,19)^sn(I,F,61)^gs(I,F,6),te=kc(L,Q,qt[W-7],qt[W-16]),d=Cc(te,J,P,Ct[W-7],Ct[W-16]);Ct[W]=d|0,qt[W]=te|0}let{Ah:n,Al:i,Bh:c,Bl:f,Ch:o,Cl:w,Dh:b,Dl:A,Eh:m,El:v,Fh:_,Fl:y,Gh:$,Gl:V,Hh:Y,Hl:z}=this;for(let W=0;W<80;W++){const ie=lr(m,v,14)^lr(m,v,18)^nn(m,v,41),R=hr(m,v,14)^hr(m,v,18)^sn(m,v,41),J=m&_^~m&$,L=v&y^~v&V,I=qc(z,R,L,jc[W],qt[W]),F=$c(I,Y,ie,J,Hc[W],Ct[W]),P=I|0,Q=lr(n,i,28)^nn(n,i,34)^nn(n,i,39),te=hr(n,i,28)^sn(n,i,34)^sn(n,i,39),d=n&c^n&o^c&o,T=i&f^i&w^f&w;Y=$|0,z=V|0,$=_|0,V=y|0,_=m|0,y=v|0,{h:m,l:v}=vt(b|0,A|0,F|0,P|0),b=o|0,A=w|0,o=c|0,w=f|0,c=n|0,f=i|0;const M=Pc(P,te,T);n=Mc(M,F,Q,d),i=M|0}({h:n,l:i}=vt(this.Ah|0,this.Al|0,n|0,i|0)),{h:c,l:f}=vt(this.Bh|0,this.Bl|0,c|0,f|0),{h:o,l:w}=vt(this.Ch|0,this.Cl|0,o|0,w|0),{h:b,l:A}=vt(this.Dh|0,this.Dl|0,b|0,A|0),{h:m,l:v}=vt(this.Eh|0,this.El|0,m|0,v|0),{h:_,l:y}=vt(this.Fh|0,this.Fl|0,_|0,y|0),{h:$,l:V}=vt(this.Gh|0,this.Gl|0,$|0,V|0),{h:Y,l:z}=vt(this.Hh|0,this.Hl|0,Y|0,z|0),this.set(n,i,c,f,o,w,b,A,m,v,_,y,$,V,Y,z)}roundClean(){zr(Ct,qt)}destroy(){zr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rs=ts(()=>new xo),Yc=ts(()=>new Vc),Kc=ts(()=>new zc),Wc=rs,Zc=Yc;function Xc(e){return Zc.create().update(new Uint8Array(e)).digest()}const on="__principal__",Jc=2,ms=4,Qc="aaaaa-aa",Lc=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},Dc=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");let xe=class hn{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([ms]))}static managementCanister(){return this.fromText(Qc)}static selfAuthenticating(t){const r=Xc(t);return new this(new Uint8Array([...r,Jc]))}static from(t){if(typeof t=="string")return hn.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new hn(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new hn(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(Lc(t))}static fromText(t){let r=t;if(t.includes(on)){const f=JSON.parse(t);on in f&&(r=f[on])}const n=r.toLowerCase().replace(/-/g,"");let i=Ec(n);i=i.slice(4,i.length);const c=new this(i);if(c.toText()!==r)throw new Error(`Principal "${c.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return c}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===ms}toUint8Array(){return this._arr}toHex(){return Dc(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,Ac(this._arr));const n=new Uint8Array(t),i=Uint8Array.from(this._arr),c=new Uint8Array([...n,...i]),o=xc(c).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[on]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}};function pt(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function ze(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const eu=new RegExp(/^[0-9a-fA-F]+$/);function On(e){if(!eu.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function Bo(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function Hn(e,t){return Bo(e,t)===0}function dn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Mr(e){return e instanceof Uint8Array?dn(e):e instanceof ArrayBuffer?e:Array.isArray(e)?dn(new Uint8Array(e)):"buffer"in e?Mr(e.buffer):dn(new Uint8Array(e))}class Pe extends Error{constructor(t){super(t),this.message=t,this.name="AgentError",this.__proto__=Pe.prototype,Object.setPrototypeOf(this,Pe.prototype)}}function Re(...e){const t=new Uint8Array(e.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}class Ir{constructor(t,r=(t==null?void 0:t.byteLength)||0){this._buffer=Pn(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(t){this._view=t}get buffer(){return Pn(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}}function li(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Pn(e){return e instanceof Uint8Array?li(e):e instanceof ArrayBuffer?e:Array.isArray(e)?li(new Uint8Array(e)):"buffer"in e?Pn(e.buffer):li(new Uint8Array(e))}function tu(e){const r=new TextEncoder().encode(e);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Et(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return tu(e)}function Ao(){throw new Error("unexpected end of buffer")}function ir(e,t){return e.byteLength<t&&Ao(),e.read(t)}function sr(e){const t=e.readUint8();return t===void 0&&Ao(),t}function Me(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new Ir(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function je(e){let t=BigInt(1),r=BigInt(0),n;do n=sr(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}function Ve(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new Ir(new ArrayBuffer(r),0);for(;;){const c=i(e);if(e/=BigInt(128),t&&e===BigInt(0)&&(c&64)!==0||!t&&e===BigInt(0)&&(c&64)===0){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const f=c%BigInt(128);return Number(t?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Gt(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if((t[r]&64)===0)return je(e);break}const n=new Uint8Array(ir(e,r+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}function ru(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return vo(e,t)}function vo(e,t){e=BigInt(e);const r=new Ir(new ArrayBuffer(Math.min(1,t)),0);let n=0,i=BigInt(256),c=BigInt(0),f=Number(e%i);for(r.write(new Uint8Array([f]));++n<t;)e<0&&c===BigInt(0)&&f!==0&&(c=BigInt(1)),f=Number((e/i-c)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function To(e,t){let r=BigInt(sr(e)),n=BigInt(1),i=0;for(;++i<t;){n*=BigInt(256);const c=BigInt(sr(e));r=r+n*c}return r}function nu(e,t){let r=To(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function qi(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const pn="DIDL",bs=400;function Yr(e,t,r){return e.map((n,i)=>r(n,t[i]))}class iu{constructor(){this._typs=[],this._idx=new Map}has(t){return this._idx.has(t.name)}add(t,r){const n=this._typs.length;this._idx.set(t.name,n),this._typs.push(r)}merge(t,r){const n=this._idx.get(t.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+t);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const t=Me(this._typs.length),r=Re(...this._typs);return Re(t,r)}indexOf(t){if(!this._idx.has(t))throw new Error("Missing type index for "+t);return Ve(this._idx.get(t)||0)}}class su{visitType(t,r){throw new Error("Not implemented")}visitPrimitive(t,r){return this.visitType(t,r)}visitEmpty(t,r){return this.visitPrimitive(t,r)}visitBool(t,r){return this.visitPrimitive(t,r)}visitNull(t,r){return this.visitPrimitive(t,r)}visitReserved(t,r){return this.visitPrimitive(t,r)}visitText(t,r){return this.visitPrimitive(t,r)}visitNumber(t,r){return this.visitPrimitive(t,r)}visitInt(t,r){return this.visitNumber(t,r)}visitNat(t,r){return this.visitNumber(t,r)}visitFloat(t,r){return this.visitPrimitive(t,r)}visitFixedInt(t,r){return this.visitNumber(t,r)}visitFixedNat(t,r){return this.visitNumber(t,r)}visitPrincipal(t,r){return this.visitPrimitive(t,r)}visitConstruct(t,r){return this.visitType(t,r)}visitVec(t,r,n){return this.visitConstruct(t,n)}visitOpt(t,r,n){return this.visitConstruct(t,n)}visitRecord(t,r,n){return this.visitConstruct(t,n)}visitTuple(t,r,n){const i=r.map((c,f)=>[`_${f}_`,c]);return this.visitRecord(t,i,n)}visitVariant(t,r,n){return this.visitConstruct(t,n)}visitRec(t,r,n){return this.visitConstruct(r,n)}visitFunc(t,r){return this.visitConstruct(t,r)}visitService(t,r){return this.visitConstruct(t,r)}}class jn{display(){return this.name}valueToString(t){return Ce(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class ft extends jn{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class Kt extends jn{checkType(t){if(t instanceof Ft){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class So extends ft{accept(t,r){return t.visitEmpty(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return Ve(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class No extends jn{checkType(t){throw new Error("Method not implemented for unknown.")}accept(t,r){throw t.visitType(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(t,r){let n=r.decodeValue(t,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Ft?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Io extends ft{accept(t,r){return t.visitBool(this,r)}covariant(t){if(typeof t=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return new Uint8Array([t?1:0])}encodeType(){return Ve(-2)}decodeValue(t,r){switch(this.checkType(r),sr(t)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Mn extends ft{accept(t,r){return t.visitNull(this,r)}covariant(t){if(t===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ve(-1)}decodeValue(t,r){return this.checkType(r),null}get name(){return"null"}}class Tr extends ft{accept(t,r){return t.visitReserved(this,r)}covariant(t){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ve(-16)}decodeValue(t,r){return r.name!==this.name&&r.decodeValue(t,r),null}get name(){return"reserved"}}class Ro extends ft{accept(t,r){return t.visitText(this,r)}covariant(t){if(typeof t=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=new TextEncoder().encode(t),n=Me(r.byteLength);return Re(n,r)}encodeType(){return Ve(-15)}decodeValue(t,r){this.checkType(r);const n=je(t),i=ir(t,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(t){return'"'+t+'"'}}class Uo extends ft{accept(t,r){return t.visitInt(this,r)}covariant(t){if(typeof t=="bigint"||Number.isInteger(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return Ve(t)}encodeType(){return Ve(-4)}decodeValue(t,r){return this.checkType(r),Gt(t)}get name(){return"int"}valueToString(t){return t.toString()}}class Fo extends ft{accept(t,r){return t.visitNat(this,r)}covariant(t){if(typeof t=="bigint"&&t>=BigInt(0)||Number.isInteger(t)&&t>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return Me(t)}encodeType(){return Ve(-3)}decodeValue(t,r){return this.checkType(r),je(t)}get name(){return"nat"}valueToString(t){return t.toString()}}class ns extends ft{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,t,!0):n.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return Ve(t)}decodeValue(t,r){this.checkType(r);const n=ir(t,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class or extends ft{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=qi(this._bits-1)*BigInt(-1),n=qi(this._bits-1)-BigInt(1);let i=!1;if(typeof t=="bigint")i=t>=r&&t<=n;else if(Number.isInteger(t)){const c=BigInt(t);i=c>=r&&c<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return vo(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Ve(-9-t)}decodeValue(t,r){this.checkType(r);const n=nu(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class Yt extends ft{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=qi(this._bits);let n=!1;if(typeof t=="bigint"&&t>=BigInt(0)?n=t<r:Number.isInteger(t)&&t>=0?n=BigInt(t)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return ru(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Ve(-5-t)}decodeValue(t,r){this.checkType(r);const n=To(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class zn extends Kt{constructor(t){super(),this._type=t,this._blobOptimization=!1,t instanceof Yt&&t._bits===8&&(this._blobOptimization=!0)}accept(t,r){return t.visitVec(this,this._type,r)}covariant(t){const r=this._type instanceof Yt?this._type._bits:this._type instanceof or?this._type._bits:0;if(ArrayBuffer.isView(t)&&r==t.BYTES_PER_ELEMENT*8||Array.isArray(t)&&t.every((n,i)=>{try{return this._type.covariant(n)}catch(c){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${c.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=Me(t.length);if(this._blobOptimization)return Re(r,new Uint8Array(t));if(ArrayBuffer.isView(t))return Re(r,new Uint8Array(t.buffer));const n=new Ir(new ArrayBuffer(r.byteLength+t.length),0);n.write(r);for(const i of t){const c=this._type.encodeValue(i);n.write(new Uint8Array(c))}return n.buffer}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=Ve(-19),n=this._type.encodeType(t);t.add(this,Re(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof zn))throw new Error("Not a vector type");const i=Number(je(t));if(this._type instanceof Yt){if(this._type._bits==8)return new Uint8Array(t.read(i));if(this._type._bits==16)return new Uint16Array(t.read(i*2));if(this._type._bits==32)return new Uint32Array(t.read(i*4));if(this._type._bits==64)return new BigUint64Array(t.read(i*8))}if(this._type instanceof or){if(this._type._bits==8)return new Int8Array(t.read(i));if(this._type._bits==16)return new Int16Array(t.read(i*2));if(this._type._bits==32)return new Int32Array(t.read(i*4));if(this._type._bits==64)return new BigInt64Array(t.read(i*8))}const c=[];for(let f=0;f<i;f++)c.push(this._type.decodeValue(t,n._type));return c}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(t){return"vec {"+t.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class ar extends Kt{constructor(t){super(),this._type=t}accept(t,r){return t.visitOpt(this,this._type,r)}covariant(t){try{if(Array.isArray(t)&&(t.length===0||t.length===1&&this._type.covariant(t[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ce(t)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){return t.length===0?new Uint8Array([0]):Re(new Uint8Array([1]),this._type.encodeValue(t[0]))}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=Ve(-18),n=this._type.encodeType(t);t.add(this,Re(r,n))}decodeValue(t,r){if(r instanceof Mn)return[];if(r instanceof Tr)return[];let n=r;if(r instanceof Ft){const i=r.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof ar)switch(sr(t)){case 0:return[];case 1:{const i=t.save();try{return[this._type.decodeValue(t,n._type)]}catch{return t.restore(i),n._type.decodeValue(t,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof Mn||this._type instanceof ar||this._type instanceof Tr)return n.decodeValue(t,n),[];{const i=t.save();try{return[this._type.decodeValue(t,r)]}catch{return t.restore(i),n.decodeValue(t,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(t){return t.length===0?"null":`opt ${this._type.valueToString(t[0])}`}}class Qr extends Kt{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Et(r[0])-Et(n[0]))}accept(t,r){return t.visitRecord(this,this._fields,r)}tryAsTuple(){const t=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;t.push(i)}return t}covariant(t){if(typeof t=="object"&&this._fields.every(([r,n])=>{if(!t.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=this._fields.map(([i])=>t[i]),n=Yr(this._fields,r,([,i],c)=>i.encodeValue(c));return Re(...n)}_buildTypeTableImpl(t){this._fields.forEach(([c,f])=>f.buildTypeTable(t));const r=Ve(-20),n=Me(this._fields.length),i=this._fields.map(([c,f])=>Re(Me(Et(c)),f.encodeType(t)));t.add(this,Re(r,n,Re(...i)))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Qr))throw new Error("Not a record type");const i={};let c=0,f=0;for(;f<n._fields.length;){const[o,w]=n._fields[f];if(c>=this._fields.length){w.decodeValue(t,w),f++;continue}const[b,A]=this._fields[c],m=Et(this._fields[c][0]),v=Et(o);if(m===v)i[b]=A.decodeValue(t,w),c++,f++;else if(v>m)if(A instanceof ar||A instanceof Tr)i[b]=[],c++;else throw new Error("Cannot find required field "+b);else w.decodeValue(t,w),f++}for(const[o,w]of this._fields.slice(c))if(w instanceof ar||w instanceof Tr)i[o]=[];else throw new Error("Cannot find required field "+o);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(t){const r=this._fields.map(([i])=>t[i]);return`record {${Yr(this._fields,r,([i,c],f)=>i+"="+c.valueToString(f)).join("; ")}}`}}class Yn extends Qr{constructor(t){const r={};t.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=t}accept(t,r){return t.visitTuple(this,this._components,r)}covariant(t){if(Array.isArray(t)&&t.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(t[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=Yr(this._components,t,(n,i)=>n.encodeValue(i));return Re(...r)}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Yn))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[c,f]of n._components.entries())c>=this._components.length?f.decodeValue(t,f):i.push(this._components[c].decodeValue(t,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(t){return`record {${Yr(this._components,t,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Kn extends Kt{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Et(r[0])-Et(n[0]))}accept(t,r){return t.visitVariant(this,this._fields,r)}covariant(t){if(typeof t=="object"&&Object.entries(t).length===1&&this._fields.every(([r,n])=>{try{return!t.hasOwnProperty(r)||n.covariant(t[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(t.hasOwnProperty(n)){const c=Me(r),f=i.encodeValue(t[n]);return Re(c,f)}}throw Error("Variant has no data: "+t)}_buildTypeTableImpl(t){this._fields.forEach(([,c])=>{c.buildTypeTable(t)});const r=Ve(-21),n=Me(this._fields.length),i=this._fields.map(([c,f])=>Re(Me(Et(c)),f.encodeType(t)));t.add(this,Re(r,n,...i))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Kn))throw new Error("Not a variant type");const i=Number(je(t));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[c,f]=n._fields[i];for(const[o,w]of this._fields)if(Et(c)===Et(o)){const b=w.decodeValue(t,f);return{[o]:b}}throw new Error("Cannot find field hash "+c)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(t){for(const[r,n]of this._fields)if(t.hasOwnProperty(r)){const i=n.valueToString(t[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+t)}}class Ft extends Kt{constructor(){super(...arguments),this._id=Ft._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}Ft._counter=0;function is(e){if(sr(e)!==1)throw new Error("Cannot decode principal");const r=Number(je(e));return xe.fromUint8Array(new Uint8Array(ir(e,r)))}class Oo extends ft{accept(t,r){return t.visitPrincipal(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Me(r.byteLength);return Re(new Uint8Array([1]),n,r)}encodeType(){return Ve(-24)}decodeValue(t,r){return this.checkType(r),is(t)}get name(){return"principal"}valueToString(t){return`${this.name} "${t.toText()}"`}}class ss extends Kt{constructor(t,r,n=[]){super(),this.argTypes=t,this.retTypes=r,this.annotations=n}static argsToString(t,r){if(t.length!==r.length)throw new Error("arity mismatch");return"("+t.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(t,r){return t.visitFunc(this,r)}covariant(t){if(Array.isArray(t)&&t.length===2&&t[0]&&t[0]._isPrincipal&&typeof t[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue([t,r]){const n=t.toUint8Array(),i=Me(n.byteLength),c=Re(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),o=Me(f.byteLength);return Re(new Uint8Array([1]),c,o,f)}_buildTypeTableImpl(t){this.argTypes.forEach(b=>b.buildTypeTable(t)),this.retTypes.forEach(b=>b.buildTypeTable(t));const r=Ve(-22),n=Me(this.argTypes.length),i=Re(...this.argTypes.map(b=>b.encodeType(t))),c=Me(this.retTypes.length),f=Re(...this.retTypes.map(b=>b.encodeType(t))),o=Me(this.annotations.length),w=Re(...this.annotations.map(b=>this.encodeAnnotation(b)));t.add(this,Re(r,n,i,c,f,o,w))}decodeValue(t){if(sr(t)!==1)throw new Error("Cannot decode function reference");const n=is(t),i=Number(je(t)),c=ir(t,i),o=new TextDecoder("utf8",{fatal:!0}).decode(c);return[n,o]}get name(){const t=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${t}) -> (${r})${n}`}valueToString([t,r]){return`func "${t.toText()}".${r}`}display(){const t=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${t})  (${r})${n}`}encodeAnnotation(t){if(t==="query")return new Uint8Array([1]);if(t==="oneway")return new Uint8Array([2]);if(t==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Po extends Kt{constructor(t){super(),this._fields=Object.entries(t).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(t,r){return t.visitService(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Me(r.length);return Re(new Uint8Array([1]),n,r)}_buildTypeTableImpl(t){this._fields.forEach(([c,f])=>f.buildTypeTable(t));const r=Ve(-23),n=Me(this._fields.length),i=this._fields.map(([c,f])=>{const o=new TextEncoder().encode(c),w=Me(o.length);return Re(w,o,f.encodeType(t))});t.add(this,Re(r,n,...i))}decodeValue(t){return is(t)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(t){return`service "${t.toText()}"`}}function Ce(e){const t=JSON.stringify(e,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return t&&t.length>bs?t.substring(0,bs-3)+"...":t}function $i(e,t){if(t.length<e.length)throw Error("Wrong number of message arguments");const r=new iu;e.forEach(w=>w.buildTypeTable(r));const n=new TextEncoder().encode(pn),i=r.encode(),c=Me(t.length),f=Re(...e.map(w=>w.encodeType(r))),o=Re(...Yr(e,t,(w,b)=>{try{w.covariant(b)}catch(A){throw new Error(A.message+`

`)}return w.encodeValue(b)}));return Re(n,i,c,f,o)}function Mo(e,t){const r=new Ir(t);if(t.byteLength<pn.length)throw new Error("Message length smaller than magic number");const n=ir(r,pn.length),i=new TextDecoder().decode(n);if(i!==pn)throw new Error("Wrong magic number: "+JSON.stringify(i));function c(_){const y=[],$=Number(je(_));for(let z=0;z<$;z++){const W=Number(Gt(_));switch(W){case-18:case-19:{const ie=Number(Gt(_));y.push([W,ie]);break}case-20:case-21:{const ie=[];let R=Number(je(_)),J;for(;R--;){const L=Number(je(_));if(L>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof J=="number"&&J>=L)throw new Error("field id collision or not sorted");J=L;const I=Number(Gt(_));ie.push([L,I])}y.push([W,ie]);break}case-22:{const ie=[];let R=Number(je(_));for(;R--;)ie.push(Number(Gt(_)));const J=[];let L=Number(je(_));for(;L--;)J.push(Number(Gt(_)));const I=[];let F=Number(je(_));for(;F--;)switch(Number(je(_))){case 1:{I.push("query");break}case 2:{I.push("oneway");break}case 3:{I.push("composite_query");break}default:throw new Error("unknown annotation")}y.push([W,[ie,J,I]]);break}case-23:{let ie=Number(je(_));const R=[];for(;ie--;){const J=Number(je(_)),L=new TextDecoder().decode(ir(_,J)),I=Gt(_);R.push([L,I])}y.push([W,R]);break}default:throw new Error("Illegal op_code: "+W)}}const V=[],Y=Number(je(_));for(let z=0;z<Y;z++)V.push(Number(Gt(_)));return[y,V]}const[f,o]=c(r);if(o.length<e.length)throw new Error("Wrong number of return values");const w=f.map(_=>sa());function b(_){if(_<-24)throw new Error("future value not supported");if(_<0)switch(_){case-1:return $o;case-2:return qo;case-3:return Ho;case-4:return Vo;case-5:return Xo;case-6:return Jo;case-7:return Qo;case-8:return Lo;case-9:return Yo;case-10:return Ko;case-11:return Wo;case-12:return Zo;case-13:return jo;case-14:return zo;case-15:return Go;case-16:return Co;case-17:return ko;case-24:return Do;default:throw new Error("Illegal op_code: "+_)}if(_>=f.length)throw new Error("type index out of range");return w[_]}function A(_){switch(_[0]){case-19:{const y=b(_[1]);return ta(y)}case-18:{const y=b(_[1]);return ra(y)}case-20:{const y={};for(const[Y,z]of _[1]){const W=`_${Y}_`;y[W]=b(z)}const $=na(y),V=$.tryAsTuple();return Array.isArray(V)?ea(...V):$}case-21:{const y={};for(const[$,V]of _[1]){const Y=`_${$}_`;y[Y]=b(V)}return ia(y)}case-22:{const[y,$,V]=_[1];return oa(y.map(Y=>b(Y)),$.map(Y=>b(Y)),V)}case-23:{const y={},$=_[1];for(const[V,Y]of $){let z=b(Y);if(z instanceof Ft&&(z=z.getType()),!(z instanceof ss))throw new Error("Illegal service definition: services can only contain functions");y[V]=z}return aa(y)}default:throw new Error("Illegal op_code: "+_[0])}}f.forEach((_,y)=>{if(_[0]===-22){const $=A(_);w[y].fill($)}}),f.forEach((_,y)=>{if(_[0]!==-22){const $=A(_);w[y].fill($)}});const m=o.map(_=>b(_)),v=e.map((_,y)=>_.decodeValue(r,m[y]));for(let _=e.length;_<m.length;_++)m[_].decodeValue(r,m[_]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return v}const ko=new So,Co=new Tr,ou=new No,qo=new Io,$o=new Mn,Go=new Ro,Vo=new Uo,Ho=new Fo,jo=new ns(32),zo=new ns(64),Yo=new or(8),Ko=new or(16),Wo=new or(32),Zo=new or(64),Xo=new Yt(8),Jo=new Yt(16),Qo=new Yt(32),Lo=new Yt(64),Do=new Oo;function ea(...e){return new Yn(e)}function ta(e){return new zn(e)}function ra(e){return new ar(e)}function na(e){return new Qr(e)}function ia(e){return new Kn(e)}function sa(){return new Ft}function oa(e,t,r=[]){return new ss(e,t,r)}function aa(e){return new Po(e)}const au=Object.freeze(Object.defineProperty({__proto__:null,Bool:qo,BoolClass:Io,ConstructType:Kt,Empty:ko,EmptyClass:So,FixedIntClass:or,FixedNatClass:Yt,Float32:jo,Float64:zo,FloatClass:ns,Func:oa,FuncClass:ss,Int:Vo,Int16:Ko,Int32:Wo,Int64:Zo,Int8:Yo,IntClass:Uo,Nat:Ho,Nat16:Jo,Nat32:Qo,Nat64:Lo,Nat8:Xo,NatClass:Fo,Null:$o,NullClass:Mn,Opt:ra,OptClass:ar,PrimitiveType:ft,Principal:Do,PrincipalClass:Oo,Rec:sa,RecClass:Ft,Record:na,RecordClass:Qr,Reserved:Co,ReservedClass:Tr,Service:aa,ServiceClass:Po,Text:Go,TextClass:Ro,Tuple:ea,TupleClass:Yn,Type:jn,Unknown:ou,UnknownClass:No,Variant:ia,VariantClass:Kn,Vec:ta,VecClass:zn,Visitor:su,decode:Mo,encode:$i},Symbol.toStringTag,{value:"Module"}));var hi={},di={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _s;function Wn(){return _s||(_s=1,function(e){var t=yo(),r=Di(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=z,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=c(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,o.prototype),s}function o(h,s,a){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(h)}return w(h,s,a)}o.poolSize=8192;function w(h,s,a){if(typeof h=="string")return v(h,s);if(ArrayBuffer.isView(h))return y(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(C(h,ArrayBuffer)||h&&C(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(C(h,SharedArrayBuffer)||h&&C(h.buffer,SharedArrayBuffer)))return $(h,s,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var g=h.valueOf&&h.valueOf();if(g!=null&&g!==h)return o.from(g,s,a);var E=V(h);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return o.from(h[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}o.from=function(h,s,a){return w(h,s,a)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function b(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function A(h,s,a){return b(h),h<=0?f(h):s!==void 0?typeof a=="string"?f(h).fill(s,a):f(h).fill(s):f(h)}o.alloc=function(h,s,a){return A(h,s,a)};function m(h){return b(h),f(h<0?0:Y(h)|0)}o.allocUnsafe=function(h){return m(h)},o.allocUnsafeSlow=function(h){return m(h)};function v(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=W(h,s)|0,g=f(a),E=g.write(h,s);return E!==a&&(g=g.slice(0,E)),g}function _(h){for(var s=h.length<0?0:Y(h.length)|0,a=f(s),g=0;g<s;g+=1)a[g]=h[g]&255;return a}function y(h){if(C(h,Uint8Array)){var s=new Uint8Array(h);return $(s.buffer,s.byteOffset,s.byteLength)}return _(h)}function $(h,s,a){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var g;return s===void 0&&a===void 0?g=new Uint8Array(h):a===void 0?g=new Uint8Array(h,s):g=new Uint8Array(h,s,a),Object.setPrototypeOf(g,o.prototype),g}function V(h){if(o.isBuffer(h)){var s=Y(h.length)|0,a=f(s);return a.length===0||h.copy(a,0,0,s),a}if(h.length!==void 0)return typeof h.length!="number"||k(h.length)?f(0):_(h);if(h.type==="Buffer"&&Array.isArray(h.data))return _(h.data)}function Y(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function z(h){return+h!=h&&(h=0),o.alloc(+h)}o.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==o.prototype},o.compare=function(s,a){if(C(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),C(a,Uint8Array)&&(a=o.from(a,a.offset,a.byteLength)),!o.isBuffer(s)||!o.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var g=s.length,E=a.length,O=0,K=Math.min(g,E);O<K;++O)if(s[O]!==a[O]){g=s[O],E=a[O];break}return g<E?-1:E<g?1:0},o.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return o.alloc(0);var g;if(a===void 0)for(a=0,g=0;g<s.length;++g)a+=s[g].length;var E=o.allocUnsafe(a),O=0;for(g=0;g<s.length;++g){var K=s[g];if(C(K,Uint8Array))O+K.length>E.length?o.from(K).copy(E,O):Uint8Array.prototype.set.call(E,K,O);else if(o.isBuffer(K))K.copy(E,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=K.length}return E};function W(h,s){if(o.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||C(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var a=h.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&a===0)return 0;for(var E=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return ee(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return B(h).length;default:if(E)return g?-1:ee(h).length;s=(""+s).toLowerCase(),E=!0}}o.byteLength=W;function ie(h,s,a){var g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return ue(this,s,a);case"utf8":case"utf-8":return T(this,s,a);case"ascii":return D(this,s,a);case"latin1":case"binary":return re(this,s,a);case"base64":return d(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,s,a);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),g=!0}}o.prototype._isBuffer=!0;function R(h,s,a){var g=h[s];h[s]=h[a],h[a]=g}o.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)R(this,a,a+1);return this},o.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)R(this,a,a+3),R(this,a+1,a+2);return this},o.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)R(this,a,a+7),R(this,a+1,a+6),R(this,a+2,a+5),R(this,a+3,a+4);return this},o.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?T(this,0,s):ie.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(s){if(!o.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:o.compare(this,s)===0},o.prototype.inspect=function(){var s="",a=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(s,a,g,E,O){if(C(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),g===void 0&&(g=s?s.length:0),E===void 0&&(E=0),O===void 0&&(O=this.length),a<0||g>s.length||E<0||O>this.length)throw new RangeError("out of range index");if(E>=O&&a>=g)return 0;if(E>=O)return-1;if(a>=g)return 1;if(a>>>=0,g>>>=0,E>>>=0,O>>>=0,this===s)return 0;for(var K=O-E,se=g-a,fe=Math.min(K,se),he=this.slice(E,O),be=s.slice(a,g),p=0;p<fe;++p)if(he[p]!==be[p]){K=he[p],se=be[p];break}return K<se?-1:se<K?1:0};function J(h,s,a,g,E){if(h.length===0)return-1;if(typeof a=="string"?(g=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,k(a)&&(a=E?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(E)return-1;a=h.length-1}else if(a<0)if(E)a=0;else return-1;if(typeof s=="string"&&(s=o.from(s,g)),o.isBuffer(s))return s.length===0?-1:L(h,s,a,g,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(h,s,a):Uint8Array.prototype.lastIndexOf.call(h,s,a):L(h,[s],a,g,E);throw new TypeError("val must be string, number or Buffer")}function L(h,s,a,g,E){var O=1,K=h.length,se=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(h.length<2||s.length<2)return-1;O=2,K/=2,se/=2,a/=2}function fe(l,N){return O===1?l[N]:l.readUInt16BE(N*O)}var he;if(E){var be=-1;for(he=a;he<K;he++)if(fe(h,he)===fe(s,be===-1?0:he-be)){if(be===-1&&(be=he),he-be+1===se)return be*O}else be!==-1&&(he-=he-be),be=-1}else for(a+se>K&&(a=K-se),he=a;he>=0;he--){for(var p=!0,u=0;u<se;u++)if(fe(h,he+u)!==fe(s,u)){p=!1;break}if(p)return he}return-1}o.prototype.includes=function(s,a,g){return this.indexOf(s,a,g)!==-1},o.prototype.indexOf=function(s,a,g){return J(this,s,a,g,!0)},o.prototype.lastIndexOf=function(s,a,g){return J(this,s,a,g,!1)};function I(h,s,a,g){a=Number(a)||0;var E=h.length-a;g?(g=Number(g),g>E&&(g=E)):g=E;var O=s.length;g>O/2&&(g=O/2);for(var K=0;K<g;++K){var se=parseInt(s.substr(K*2,2),16);if(k(se))return K;h[a+K]=se}return K}function F(h,s,a,g){return U(ee(s,h.length-a),h,a,g)}function P(h,s,a,g){return U(ne(s),h,a,g)}function Q(h,s,a,g){return U(B(s),h,a,g)}function te(h,s,a,g){return U(x(s,h.length-a),h,a,g)}o.prototype.write=function(s,a,g,E){if(a===void 0)E="utf8",g=this.length,a=0;else if(g===void 0&&typeof a=="string")E=a,g=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(g)?(g=g>>>0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-a;if((g===void 0||g>O)&&(g=O),s.length>0&&(g<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var K=!1;;)switch(E){case"hex":return I(this,s,a,g);case"utf8":case"utf-8":return F(this,s,a,g);case"ascii":case"latin1":case"binary":return P(this,s,a,g);case"base64":return Q(this,s,a,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,s,a,g);default:if(K)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),K=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(h,s,a){return s===0&&a===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(s,a))}function T(h,s,a){a=Math.min(h.length,a);for(var g=[],E=s;E<a;){var O=h[E],K=null,se=O>239?4:O>223?3:O>191?2:1;if(E+se<=a){var fe,he,be,p;switch(se){case 1:O<128&&(K=O);break;case 2:fe=h[E+1],(fe&192)===128&&(p=(O&31)<<6|fe&63,p>127&&(K=p));break;case 3:fe=h[E+1],he=h[E+2],(fe&192)===128&&(he&192)===128&&(p=(O&15)<<12|(fe&63)<<6|he&63,p>2047&&(p<55296||p>57343)&&(K=p));break;case 4:fe=h[E+1],he=h[E+2],be=h[E+3],(fe&192)===128&&(he&192)===128&&(be&192)===128&&(p=(O&15)<<18|(fe&63)<<12|(he&63)<<6|be&63,p>65535&&p<1114112&&(K=p))}}K===null?(K=65533,se=1):K>65535&&(K-=65536,g.push(K>>>10&1023|55296),K=56320|K&1023),g.push(K),E+=se}return j(g)}var M=4096;function j(h){var s=h.length;if(s<=M)return String.fromCharCode.apply(String,h);for(var a="",g=0;g<s;)a+=String.fromCharCode.apply(String,h.slice(g,g+=M));return a}function D(h,s,a){var g="";a=Math.min(h.length,a);for(var E=s;E<a;++E)g+=String.fromCharCode(h[E]&127);return g}function re(h,s,a){var g="";a=Math.min(h.length,a);for(var E=s;E<a;++E)g+=String.fromCharCode(h[E]);return g}function ue(h,s,a){var g=h.length;(!s||s<0)&&(s=0),(!a||a<0||a>g)&&(a=g);for(var E="",O=s;O<a;++O)E+=G[h[O]];return E}function ye(h,s,a){for(var g=h.slice(s,a),E="",O=0;O<g.length-1;O+=2)E+=String.fromCharCode(g[O]+g[O+1]*256);return E}o.prototype.slice=function(s,a){var g=this.length;s=~~s,a=a===void 0?g:~~a,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),a<s&&(a=s);var E=this.subarray(s,a);return Object.setPrototypeOf(E,o.prototype),E};function oe(h,s,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>a)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||oe(s,a,this.length);for(var E=this[s],O=1,K=0;++K<a&&(O*=256);)E+=this[s+K]*O;return E},o.prototype.readUintBE=o.prototype.readUIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||oe(s,a,this.length);for(var E=this[s+--a],O=1;a>0&&(O*=256);)E+=this[s+--a]*O;return E},o.prototype.readUint8=o.prototype.readUInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]|this[s+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]<<8|this[s+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},o.prototype.readIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||oe(s,a,this.length);for(var E=this[s],O=1,K=0;++K<a&&(O*=256);)E+=this[s+K]*O;return O*=128,E>=O&&(E-=Math.pow(2,8*a)),E},o.prototype.readIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||oe(s,a,this.length);for(var E=a,O=1,K=this[s+--E];E>0&&(O*=256);)K+=this[s+--E]*O;return O*=128,K>=O&&(K-=Math.pow(2,8*a)),K},o.prototype.readInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},o.prototype.readInt16LE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},o.prototype.readInt16BE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},o.prototype.readInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},o.prototype.readInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},o.prototype.readFloatLE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!0,23,4)},o.prototype.readFloatBE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!1,23,4)},o.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!0,52,8)},o.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!1,52,8)};function le(h,s,a,g,E,O){if(!o.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<O)throw new RangeError('"value" argument is out of bounds');if(a+g>h.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){var O=Math.pow(2,8*g)-1;le(this,s,a,g,O,0)}var K=1,se=0;for(this[a]=s&255;++se<g&&(K*=256);)this[a+se]=s/K&255;return a+g},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){var O=Math.pow(2,8*g)-1;le(this,s,a,g,O,0)}var K=g-1,se=1;for(this[a+K]=s&255;--K>=0&&(se*=256);)this[a+K]=s/se&255;return a+g},o.prototype.writeUint8=o.prototype.writeUInt8=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,1,255,0),this[a]=s&255,a+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},o.prototype.writeIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){var O=Math.pow(2,8*g-1);le(this,s,a,g,O-1,-O)}var K=0,se=1,fe=0;for(this[a]=s&255;++K<g&&(se*=256);)s<0&&fe===0&&this[a+K-1]!==0&&(fe=1),this[a+K]=(s/se>>0)-fe&255;return a+g},o.prototype.writeIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){var O=Math.pow(2,8*g-1);le(this,s,a,g,O-1,-O)}var K=g-1,se=1,fe=0;for(this[a+K]=s&255;--K>=0&&(se*=256);)s<0&&fe===0&&this[a+K+1]!==0&&(fe=1),this[a+K]=(s/se>>0)-fe&255;return a+g},o.prototype.writeInt8=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},o.prototype.writeInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},o.prototype.writeInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},o.prototype.writeInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},o.prototype.writeInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||le(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function Ne(h,s,a,g,E,O){if(a+g>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function S(h,s,a,g,E){return s=+s,a=a>>>0,E||Ne(h,s,a,4),r.write(h,s,a,g,23,4),a+4}o.prototype.writeFloatLE=function(s,a,g){return S(this,s,a,!0,g)},o.prototype.writeFloatBE=function(s,a,g){return S(this,s,a,!1,g)};function Ae(h,s,a,g,E){return s=+s,a=a>>>0,E||Ne(h,s,a,8),r.write(h,s,a,g,52,8),a+8}o.prototype.writeDoubleLE=function(s,a,g){return Ae(this,s,a,!0,g)},o.prototype.writeDoubleBE=function(s,a,g){return Ae(this,s,a,!1,g)},o.prototype.copy=function(s,a,g,E){if(!o.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!E&&E!==0&&(E=this.length),a>=s.length&&(a=s.length),a||(a=0),E>0&&E<g&&(E=g),E===g||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),s.length-a<E-g&&(E=s.length-a+g);var O=E-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,g,E):Uint8Array.prototype.set.call(s,this.subarray(g,E),a),O},o.prototype.fill=function(s,a,g,E){if(typeof s=="string"){if(typeof a=="string"?(E=a,a=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!o.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(s.length===1){var O=s.charCodeAt(0);(E==="utf8"&&O<128||E==="latin1")&&(s=O)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<g)throw new RangeError("Out of range index");if(g<=a)return this;a=a>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);var K;if(typeof s=="number")for(K=a;K<g;++K)this[K]=s;else{var se=o.isBuffer(s)?s:o.from(s,E),fe=se.length;if(fe===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(K=0;K<g-a;++K)this[K+a]=se[K%fe]}return this};var Ie=/[^+/0-9A-Za-z-_]/g;function ae(h){if(h=h.split("=")[0],h=h.trim().replace(Ie,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function ee(h,s){s=s||1/0;for(var a,g=h.length,E=null,O=[],K=0;K<g;++K){if(a=h.charCodeAt(K),a>55295&&a<57344){if(!E){if(a>56319){(s-=3)>-1&&O.push(239,191,189);continue}else if(K+1===g){(s-=3)>-1&&O.push(239,191,189);continue}E=a;continue}if(a<56320){(s-=3)>-1&&O.push(239,191,189),E=a;continue}a=(E-55296<<10|a-56320)+65536}else E&&(s-=3)>-1&&O.push(239,191,189);if(E=null,a<128){if((s-=1)<0)break;O.push(a)}else if(a<2048){if((s-=2)<0)break;O.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;O.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;O.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return O}function ne(h){for(var s=[],a=0;a<h.length;++a)s.push(h.charCodeAt(a)&255);return s}function x(h,s){for(var a,g,E,O=[],K=0;K<h.length&&!((s-=2)<0);++K)a=h.charCodeAt(K),g=a>>8,E=a%256,O.push(E),O.push(g);return O}function B(h){return t.toByteArray(ae(h))}function U(h,s,a,g){for(var E=0;E<g&&!(E+a>=s.length||E>=h.length);++E)s[E+a]=h[E];return E}function C(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function k(h){return h!==h}var G=function(){for(var h="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var g=a*16,E=0;E<16;++E)s[g+E]=h[a]+h[E];return s}()}(di)),di}var yn={exports:{}},cu=yn.exports,xs;function Zn(){return xs||(xs=1,function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,c=Math.floor,f="[BigNumber Error] ",o=f+"Number primitive has more than 15 significant digits: ",w=1e14,b=14,A=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],v=1e7,_=1e9;function y(J){var L,I,F,P=S.prototype={constructor:S,toString:null,valueOf:null},Q=new S(1),te=20,d=4,T=-7,M=21,j=-1e7,D=1e7,re=!1,ue=1,ye=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},le="0123456789abcdefghijklmnopqrstuvwxyz",Ne=!0;function S(x,B){var U,C,k,G,h,s,a,g,E=this;if(!(E instanceof S))return new S(x,B);if(B==null){if(x&&x._isBigNumber===!0){E.s=x.s,!x.c||x.e>D?E.c=E.e=null:x.e<j?E.c=[E.e=0]:(E.e=x.e,E.c=x.c.slice());return}if((s=typeof x=="number")&&x*0==0){if(E.s=1/x<0?(x=-x,-1):1,x===~~x){for(G=0,h=x;h>=10;h/=10,G++);G>D?E.c=E.e=null:(E.e=G,E.c=[x]);return}g=String(x)}else{if(!n.test(g=String(x)))return F(E,g,s);E.s=g.charCodeAt(0)==45?(g=g.slice(1),-1):1}(G=g.indexOf("."))>-1&&(g=g.replace(".","")),(h=g.search(/e/i))>0?(G<0&&(G=h),G+=+g.slice(h+1),g=g.substring(0,h)):G<0&&(G=g.length)}else{if(z(B,2,le.length,"Base"),B==10&&Ne)return E=new S(x),ee(E,te+E.e+1,d);if(g=String(x),s=typeof x=="number"){if(x*0!=0)return F(E,g,s,B);if(E.s=1/x<0?(g=g.slice(1),-1):1,S.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(o+x)}else E.s=g.charCodeAt(0)===45?(g=g.slice(1),-1):1;for(U=le.slice(0,B),G=h=0,a=g.length;h<a;h++)if(U.indexOf(C=g.charAt(h))<0){if(C=="."){if(h>G){G=a;continue}}else if(!k&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){k=!0,h=-1,G=0;continue}return F(E,String(x),s,B)}s=!1,g=I(g,B,10,E.s),(G=g.indexOf("."))>-1?g=g.replace(".",""):G=g.length}for(h=0;g.charCodeAt(h)===48;h++);for(a=g.length;g.charCodeAt(--a)===48;);if(g=g.slice(h,++a)){if(a-=h,s&&S.DEBUG&&a>15&&(x>A||x!==c(x)))throw Error(o+E.s*x);if((G=G-h-1)>D)E.c=E.e=null;else if(G<j)E.c=[E.e=0];else{if(E.e=G,E.c=[],h=(G+1)%b,G<0&&(h+=b),h<a){for(h&&E.c.push(+g.slice(0,h)),a-=b;h<a;)E.c.push(+g.slice(h,h+=b));h=b-(g=g.slice(h)).length}else h-=a;for(;h--;g+="0");E.c.push(+g)}}else E.c=[E.e=0]}S.clone=y,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(x){var B,U;if(x!=null)if(typeof x=="object"){if(x.hasOwnProperty(B="DECIMAL_PLACES")&&(U=x[B],z(U,0,_,B),te=U),x.hasOwnProperty(B="ROUNDING_MODE")&&(U=x[B],z(U,0,8,B),d=U),x.hasOwnProperty(B="EXPONENTIAL_AT")&&(U=x[B],U&&U.pop?(z(U[0],-_,0,B),z(U[1],0,_,B),T=U[0],M=U[1]):(z(U,-_,_,B),T=-(M=U<0?-U:U))),x.hasOwnProperty(B="RANGE"))if(U=x[B],U&&U.pop)z(U[0],-_,-1,B),z(U[1],1,_,B),j=U[0],D=U[1];else if(z(U,-_,_,B),U)j=-(D=U<0?-U:U);else throw Error(f+B+" cannot be zero: "+U);if(x.hasOwnProperty(B="CRYPTO"))if(U=x[B],U===!!U)if(U)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=U;else throw re=!U,Error(f+"crypto unavailable");else re=U;else throw Error(f+B+" not true or false: "+U);if(x.hasOwnProperty(B="MODULO_MODE")&&(U=x[B],z(U,0,9,B),ue=U),x.hasOwnProperty(B="POW_PRECISION")&&(U=x[B],z(U,0,_,B),ye=U),x.hasOwnProperty(B="FORMAT"))if(U=x[B],typeof U=="object")oe=U;else throw Error(f+B+" not an object: "+U);if(x.hasOwnProperty(B="ALPHABET"))if(U=x[B],typeof U=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(U))Ne=U.slice(0,10)=="0123456789",le=U;else throw Error(f+B+" invalid: "+U)}else throw Error(f+"Object expected: "+x);return{DECIMAL_PLACES:te,ROUNDING_MODE:d,EXPONENTIAL_AT:[T,M],RANGE:[j,D],CRYPTO:re,MODULO_MODE:ue,POW_PRECISION:ye,FORMAT:oe,ALPHABET:le}},S.isBigNumber=function(x){if(!x||x._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var B,U,C=x.c,k=x.e,G=x.s;e:if({}.toString.call(C)=="[object Array]"){if((G===1||G===-1)&&k>=-_&&k<=_&&k===c(k)){if(C[0]===0){if(k===0&&C.length===1)return!0;break e}if(B=(k+1)%b,B<1&&(B+=b),String(C[0]).length==B){for(B=0;B<C.length;B++)if(U=C[B],U<0||U>=w||U!==c(U))break e;if(U!==0)return!0}}}else if(C===null&&k===null&&(G===null||G===1||G===-1))return!0;throw Error(f+"Invalid BigNumber: "+x)},S.maximum=S.max=function(){return Ie(arguments,-1)},S.minimum=S.min=function(){return Ie(arguments,1)},S.random=function(){var x=9007199254740992,B=Math.random()*x&2097151?function(){return c(Math.random()*x)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(U){var C,k,G,h,s,a=0,g=[],E=new S(Q);if(U==null?U=te:z(U,0,_),h=i(U/b),re)if(crypto.getRandomValues){for(C=crypto.getRandomValues(new Uint32Array(h*=2));a<h;)s=C[a]*131072+(C[a+1]>>>11),s>=9e15?(k=crypto.getRandomValues(new Uint32Array(2)),C[a]=k[0],C[a+1]=k[1]):(g.push(s%1e14),a+=2);a=h/2}else if(crypto.randomBytes){for(C=crypto.randomBytes(h*=7);a<h;)s=(C[a]&31)*281474976710656+C[a+1]*1099511627776+C[a+2]*4294967296+C[a+3]*16777216+(C[a+4]<<16)+(C[a+5]<<8)+C[a+6],s>=9e15?crypto.randomBytes(7).copy(C,a):(g.push(s%1e14),a+=7);a=h/7}else throw re=!1,Error(f+"crypto unavailable");if(!re)for(;a<h;)s=B(),s<9e15&&(g[a++]=s%1e14);for(h=g[--a],U%=b,h&&U&&(s=m[b-U],g[a]=c(h/s)*s);g[a]===0;g.pop(),a--);if(a<0)g=[G=0];else{for(G=-1;g[0]===0;g.splice(0,1),G-=b);for(a=1,s=g[0];s>=10;s/=10,a++);a<b&&(G-=b-a)}return E.e=G,E.c=g,E}}(),S.sum=function(){for(var x=1,B=arguments,U=new S(B[0]);x<B.length;)U=U.plus(B[x++]);return U},I=function(){var x="0123456789";function B(U,C,k,G){for(var h,s=[0],a,g=0,E=U.length;g<E;){for(a=s.length;a--;s[a]*=C);for(s[0]+=G.indexOf(U.charAt(g++)),h=0;h<s.length;h++)s[h]>k-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/k|0,s[h]%=k)}return s.reverse()}return function(U,C,k,G,h){var s,a,g,E,O,K,se,fe,he=U.indexOf("."),be=te,p=d;for(he>=0&&(E=ye,ye=0,U=U.replace(".",""),fe=new S(C),K=fe.pow(U.length-he),ye=E,fe.c=B(R(V(K.c),K.e,"0"),10,k,x),fe.e=fe.c.length),se=B(U,C,k,h?(s=le,x):(s=x,le)),g=E=se.length;se[--E]==0;se.pop());if(!se[0])return s.charAt(0);if(he<0?--g:(K.c=se,K.e=g,K.s=G,K=L(K,fe,be,p,k),se=K.c,O=K.r,g=K.e),a=g+be+1,he=se[a],E=k/2,O=O||a<0||se[a+1]!=null,O=p<4?(he!=null||O)&&(p==0||p==(K.s<0?3:2)):he>E||he==E&&(p==4||O||p==6&&se[a-1]&1||p==(K.s<0?8:7)),a<1||!se[0])U=O?R(s.charAt(1),-be,s.charAt(0)):s.charAt(0);else{if(se.length=a,O)for(--k;++se[--a]>k;)se[a]=0,a||(++g,se=[1].concat(se));for(E=se.length;!se[--E];);for(he=0,U="";he<=E;U+=s.charAt(se[he++]));U=R(U,g,s.charAt(0))}return U}}(),L=function(){function x(C,k,G){var h,s,a,g,E=0,O=C.length,K=k%v,se=k/v|0;for(C=C.slice();O--;)a=C[O]%v,g=C[O]/v|0,h=se*a+g*K,s=K*a+h%v*v+E,E=(s/G|0)+(h/v|0)+se*g,C[O]=s%G;return E&&(C=[E].concat(C)),C}function B(C,k,G,h){var s,a;if(G!=h)a=G>h?1:-1;else for(s=a=0;s<G;s++)if(C[s]!=k[s]){a=C[s]>k[s]?1:-1;break}return a}function U(C,k,G,h){for(var s=0;G--;)C[G]-=s,s=C[G]<k[G]?1:0,C[G]=s*h+C[G]-k[G];for(;!C[0]&&C.length>1;C.splice(0,1));}return function(C,k,G,h,s){var a,g,E,O,K,se,fe,he,be,p,u,l,N,H,X,Z,ge,_e=C.s==k.s?1:-1,me=C.c,we=k.c;if(!me||!me[0]||!we||!we[0])return new S(!C.s||!k.s||(me?we&&me[0]==we[0]:!we)?NaN:me&&me[0]==0||!we?_e*0:_e/0);for(he=new S(_e),be=he.c=[],g=C.e-k.e,_e=G+g+1,s||(s=w,g=$(C.e/b)-$(k.e/b),_e=_e/b|0),E=0;we[E]==(me[E]||0);E++);if(we[E]>(me[E]||0)&&g--,_e<0)be.push(1),O=!0;else{for(H=me.length,Z=we.length,E=0,_e+=2,K=c(s/(we[0]+1)),K>1&&(we=x(we,K,s),me=x(me,K,s),Z=we.length,H=me.length),N=Z,p=me.slice(0,Z),u=p.length;u<Z;p[u++]=0);ge=we.slice(),ge=[0].concat(ge),X=we[0],we[1]>=s/2&&X++;do{if(K=0,a=B(we,p,Z,u),a<0){if(l=p[0],Z!=u&&(l=l*s+(p[1]||0)),K=c(l/X),K>1)for(K>=s&&(K=s-1),se=x(we,K,s),fe=se.length,u=p.length;B(se,p,fe,u)==1;)K--,U(se,Z<fe?ge:we,fe,s),fe=se.length,a=1;else K==0&&(a=K=1),se=we.slice(),fe=se.length;if(fe<u&&(se=[0].concat(se)),U(p,se,u,s),u=p.length,a==-1)for(;B(we,p,Z,u)<1;)K++,U(p,Z<u?ge:we,u,s),u=p.length}else a===0&&(K++,p=[0]);be[E++]=K,p[0]?p[u++]=me[N]||0:(p=[me[N]],u=1)}while((N++<H||p[0]!=null)&&_e--);O=p[0]!=null,be[0]||be.splice(0,1)}if(s==w){for(E=1,_e=be[0];_e>=10;_e/=10,E++);ee(he,G+(he.e=E+g*b-1)+1,h,O)}else he.e=g,he.r=+O;return he}}();function Ae(x,B,U,C){var k,G,h,s,a;if(U==null?U=d:z(U,0,8),!x.c)return x.toString();if(k=x.c[0],h=x.e,B==null)a=V(x.c),a=C==1||C==2&&(h<=T||h>=M)?ie(a,h):R(a,h,"0");else if(x=ee(new S(x),B,U),G=x.e,a=V(x.c),s=a.length,C==1||C==2&&(B<=G||G<=T)){for(;s<B;a+="0",s++);a=ie(a,G)}else if(B-=h,a=R(a,G,"0"),G+1>s){if(--B>0)for(a+=".";B--;a+="0");}else if(B+=G-s,B>0)for(G+1==s&&(a+=".");B--;a+="0");return x.s<0&&k?"-"+a:a}function Ie(x,B){for(var U,C,k=1,G=new S(x[0]);k<x.length;k++)C=new S(x[k]),(!C.s||(U=Y(G,C))===B||U===0&&G.s===B)&&(G=C);return G}function ae(x,B,U){for(var C=1,k=B.length;!B[--k];B.pop());for(k=B[0];k>=10;k/=10,C++);return(U=C+U*b-1)>D?x.c=x.e=null:U<j?x.c=[x.e=0]:(x.e=U,x.c=B),x}F=function(){var x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,U=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,k=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,h,s,a){var g,E=s?h:h.replace(k,"");if(C.test(E))G.s=isNaN(E)?null:E<0?-1:1;else{if(!s&&(E=E.replace(x,function(O,K,se){return g=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!a||a==g?K:O}),a&&(g=a,E=E.replace(B,"$1").replace(U,"0.$1")),h!=E))return new S(E,g);if(S.DEBUG)throw Error(f+"Not a"+(a?" base "+a:"")+" number: "+h);G.s=null}G.c=G.e=null}}();function ee(x,B,U,C){var k,G,h,s,a,g,E,O=x.c,K=m;if(O){e:{for(k=1,s=O[0];s>=10;s/=10,k++);if(G=B-k,G<0)G+=b,h=B,a=O[g=0],E=c(a/K[k-h-1]%10);else if(g=i((G+1)/b),g>=O.length)if(C){for(;O.length<=g;O.push(0));a=E=0,k=1,G%=b,h=G-b+1}else break e;else{for(a=s=O[g],k=1;s>=10;s/=10,k++);G%=b,h=G-b+k,E=h<0?0:c(a/K[k-h-1]%10)}if(C=C||B<0||O[g+1]!=null||(h<0?a:a%K[k-h-1]),C=U<4?(E||C)&&(U==0||U==(x.s<0?3:2)):E>5||E==5&&(U==4||C||U==6&&(G>0?h>0?a/K[k-h]:0:O[g-1])%10&1||U==(x.s<0?8:7)),B<1||!O[0])return O.length=0,C?(B-=x.e+1,O[0]=K[(b-B%b)%b],x.e=-B||0):O[0]=x.e=0,x;if(G==0?(O.length=g,s=1,g--):(O.length=g+1,s=K[b-G],O[g]=h>0?c(a/K[k-h]%K[h])*s:0),C)for(;;)if(g==0){for(G=1,h=O[0];h>=10;h/=10,G++);for(h=O[0]+=s,s=1;h>=10;h/=10,s++);G!=s&&(x.e++,O[0]==w&&(O[0]=1));break}else{if(O[g]+=s,O[g]!=w)break;O[g--]=0,s=1}for(G=O.length;O[--G]===0;O.pop());}x.e>D?x.c=x.e=null:x.e<j&&(x.c=[x.e=0])}return x}function ne(x){var B,U=x.e;return U===null?x.toString():(B=V(x.c),B=U<=T||U>=M?ie(B,U):R(B,U,"0"),x.s<0?"-"+B:B)}return P.absoluteValue=P.abs=function(){var x=new S(this);return x.s<0&&(x.s=1),x},P.comparedTo=function(x,B){return Y(this,new S(x,B))},P.decimalPlaces=P.dp=function(x,B){var U,C,k,G=this;if(x!=null)return z(x,0,_),B==null?B=d:z(B,0,8),ee(new S(G),x+G.e+1,B);if(!(U=G.c))return null;if(C=((k=U.length-1)-$(this.e/b))*b,k=U[k])for(;k%10==0;k/=10,C--);return C<0&&(C=0),C},P.dividedBy=P.div=function(x,B){return L(this,new S(x,B),te,d)},P.dividedToIntegerBy=P.idiv=function(x,B){return L(this,new S(x,B),0,1)},P.exponentiatedBy=P.pow=function(x,B){var U,C,k,G,h,s,a,g,E,O=this;if(x=new S(x),x.c&&!x.isInteger())throw Error(f+"Exponent not an integer: "+ne(x));if(B!=null&&(B=new S(B)),s=x.e>14,!O.c||!O.c[0]||O.c[0]==1&&!O.e&&O.c.length==1||!x.c||!x.c[0])return E=new S(Math.pow(+ne(O),s?x.s*(2-W(x)):+ne(x))),B?E.mod(B):E;if(a=x.s<0,B){if(B.c?!B.c[0]:!B.s)return new S(NaN);C=!a&&O.isInteger()&&B.isInteger(),C&&(O=O.mod(B))}else{if(x.e>9&&(O.e>0||O.e<-1||(O.e==0?O.c[0]>1||s&&O.c[1]>=24e7:O.c[0]<8e13||s&&O.c[0]<=9999975e7)))return G=O.s<0&&W(x)?-0:0,O.e>-1&&(G=1/G),new S(a?1/G:G);ye&&(G=i(ye/b+2))}for(s?(U=new S(.5),a&&(x.s=1),g=W(x)):(k=Math.abs(+ne(x)),g=k%2),E=new S(Q);;){if(g){if(E=E.times(O),!E.c)break;G?E.c.length>G&&(E.c.length=G):C&&(E=E.mod(B))}if(k){if(k=c(k/2),k===0)break;g=k%2}else if(x=x.times(U),ee(x,x.e+1,1),x.e>14)g=W(x);else{if(k=+ne(x),k===0)break;g=k%2}O=O.times(O),G?O.c&&O.c.length>G&&(O.c.length=G):C&&(O=O.mod(B))}return C?E:(a&&(E=Q.div(E)),B?E.mod(B):G?ee(E,ye,d,h):E)},P.integerValue=function(x){var B=new S(this);return x==null?x=d:z(x,0,8),ee(B,B.e+1,x)},P.isEqualTo=P.eq=function(x,B){return Y(this,new S(x,B))===0},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(x,B){return Y(this,new S(x,B))>0},P.isGreaterThanOrEqualTo=P.gte=function(x,B){return(B=Y(this,new S(x,B)))===1||B===0},P.isInteger=function(){return!!this.c&&$(this.e/b)>this.c.length-2},P.isLessThan=P.lt=function(x,B){return Y(this,new S(x,B))<0},P.isLessThanOrEqualTo=P.lte=function(x,B){return(B=Y(this,new S(x,B)))===-1||B===0},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&this.c[0]==0},P.minus=function(x,B){var U,C,k,G,h=this,s=h.s;if(x=new S(x,B),B=x.s,!s||!B)return new S(NaN);if(s!=B)return x.s=-B,h.plus(x);var a=h.e/b,g=x.e/b,E=h.c,O=x.c;if(!a||!g){if(!E||!O)return E?(x.s=-B,x):new S(O?h:NaN);if(!E[0]||!O[0])return O[0]?(x.s=-B,x):new S(E[0]?h:d==3?-0:0)}if(a=$(a),g=$(g),E=E.slice(),s=a-g){for((G=s<0)?(s=-s,k=E):(g=a,k=O),k.reverse(),B=s;B--;k.push(0));k.reverse()}else for(C=(G=(s=E.length)<(B=O.length))?s:B,s=B=0;B<C;B++)if(E[B]!=O[B]){G=E[B]<O[B];break}if(G&&(k=E,E=O,O=k,x.s=-x.s),B=(C=O.length)-(U=E.length),B>0)for(;B--;E[U++]=0);for(B=w-1;C>s;){if(E[--C]<O[C]){for(U=C;U&&!E[--U];E[U]=B);--E[U],E[C]+=w}E[C]-=O[C]}for(;E[0]==0;E.splice(0,1),--g);return E[0]?ae(x,E,g):(x.s=d==3?-1:1,x.c=[x.e=0],x)},P.modulo=P.mod=function(x,B){var U,C,k=this;return x=new S(x,B),!k.c||!x.s||x.c&&!x.c[0]?new S(NaN):!x.c||k.c&&!k.c[0]?new S(k):(ue==9?(C=x.s,x.s=1,U=L(k,x,0,3),x.s=C,U.s*=C):U=L(k,x,0,ue),x=k.minus(U.times(x)),!x.c[0]&&ue==1&&(x.s=k.s),x)},P.multipliedBy=P.times=function(x,B){var U,C,k,G,h,s,a,g,E,O,K,se,fe,he,be,p=this,u=p.c,l=(x=new S(x,B)).c;if(!u||!l||!u[0]||!l[0])return!p.s||!x.s||u&&!u[0]&&!l||l&&!l[0]&&!u?x.c=x.e=x.s=null:(x.s*=p.s,!u||!l?x.c=x.e=null:(x.c=[0],x.e=0)),x;for(C=$(p.e/b)+$(x.e/b),x.s*=p.s,a=u.length,O=l.length,a<O&&(fe=u,u=l,l=fe,k=a,a=O,O=k),k=a+O,fe=[];k--;fe.push(0));for(he=w,be=v,k=O;--k>=0;){for(U=0,K=l[k]%be,se=l[k]/be|0,h=a,G=k+h;G>k;)g=u[--h]%be,E=u[h]/be|0,s=se*g+E*K,g=K*g+s%be*be+fe[G]+U,U=(g/he|0)+(s/be|0)+se*E,fe[G--]=g%he;fe[G]=U}return U?++C:fe.splice(0,1),ae(x,fe,C)},P.negated=function(){var x=new S(this);return x.s=-x.s||null,x},P.plus=function(x,B){var U,C=this,k=C.s;if(x=new S(x,B),B=x.s,!k||!B)return new S(NaN);if(k!=B)return x.s=-B,C.minus(x);var G=C.e/b,h=x.e/b,s=C.c,a=x.c;if(!G||!h){if(!s||!a)return new S(k/0);if(!s[0]||!a[0])return a[0]?x:new S(s[0]?C:k*0)}if(G=$(G),h=$(h),s=s.slice(),k=G-h){for(k>0?(h=G,U=a):(k=-k,U=s),U.reverse();k--;U.push(0));U.reverse()}for(k=s.length,B=a.length,k-B<0&&(U=a,a=s,s=U,B=k),k=0;B;)k=(s[--B]=s[B]+a[B]+k)/w|0,s[B]=w===s[B]?0:s[B]%w;return k&&(s=[k].concat(s),++h),ae(x,s,h)},P.precision=P.sd=function(x,B){var U,C,k,G=this;if(x!=null&&x!==!!x)return z(x,1,_),B==null?B=d:z(B,0,8),ee(new S(G),x,B);if(!(U=G.c))return null;if(k=U.length-1,C=k*b+1,k=U[k]){for(;k%10==0;k/=10,C--);for(k=U[0];k>=10;k/=10,C++);}return x&&G.e+1>C&&(C=G.e+1),C},P.shiftedBy=function(x){return z(x,-A,A),this.times("1e"+x)},P.squareRoot=P.sqrt=function(){var x,B,U,C,k,G=this,h=G.c,s=G.s,a=G.e,g=te+4,E=new S("0.5");if(s!==1||!h||!h[0])return new S(!s||s<0&&(!h||h[0])?NaN:h?G:1/0);if(s=Math.sqrt(+ne(G)),s==0||s==1/0?(B=V(h),(B.length+a)%2==0&&(B+="0"),s=Math.sqrt(+B),a=$((a+1)/2)-(a<0||a%2),s==1/0?B="5e"+a:(B=s.toExponential(),B=B.slice(0,B.indexOf("e")+1)+a),U=new S(B)):U=new S(s+""),U.c[0]){for(a=U.e,s=a+g,s<3&&(s=0);;)if(k=U,U=E.times(k.plus(L(G,k,g,1))),V(k.c).slice(0,s)===(B=V(U.c)).slice(0,s))if(U.e<a&&--s,B=B.slice(s-3,s+1),B=="9999"||!C&&B=="4999"){if(!C&&(ee(k,k.e+te+2,0),k.times(k).eq(G))){U=k;break}g+=4,s+=4,C=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(ee(U,U.e+te+2,1),x=!U.times(U).eq(G));break}}return ee(U,U.e+te+1,d,x)},P.toExponential=function(x,B){return x!=null&&(z(x,0,_),x++),Ae(this,x,B,1)},P.toFixed=function(x,B){return x!=null&&(z(x,0,_),x=x+this.e+1),Ae(this,x,B)},P.toFormat=function(x,B,U){var C,k=this;if(U==null)x!=null&&B&&typeof B=="object"?(U=B,B=null):x&&typeof x=="object"?(U=x,x=B=null):U=oe;else if(typeof U!="object")throw Error(f+"Argument not an object: "+U);if(C=k.toFixed(x,B),k.c){var G,h=C.split("."),s=+U.groupSize,a=+U.secondaryGroupSize,g=U.groupSeparator||"",E=h[0],O=h[1],K=k.s<0,se=K?E.slice(1):E,fe=se.length;if(a&&(G=s,s=a,a=G,fe-=G),s>0&&fe>0){for(G=fe%s||s,E=se.substr(0,G);G<fe;G+=s)E+=g+se.substr(G,s);a>0&&(E+=g+se.slice(G)),K&&(E="-"+E)}C=O?E+(U.decimalSeparator||"")+((a=+U.fractionGroupSize)?O.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(U.fractionGroupSeparator||"")):O):E}return(U.prefix||"")+C+(U.suffix||"")},P.toFraction=function(x){var B,U,C,k,G,h,s,a,g,E,O,K,se=this,fe=se.c;if(x!=null&&(s=new S(x),!s.isInteger()&&(s.c||s.s!==1)||s.lt(Q)))throw Error(f+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ne(s));if(!fe)return new S(se);for(B=new S(Q),g=U=new S(Q),C=a=new S(Q),K=V(fe),G=B.e=K.length-se.e-1,B.c[0]=m[(h=G%b)<0?b+h:h],x=!x||s.comparedTo(B)>0?G>0?B:g:s,h=D,D=1/0,s=new S(K),a.c[0]=0;E=L(s,B,0,1),k=U.plus(E.times(C)),k.comparedTo(x)!=1;)U=C,C=k,g=a.plus(E.times(k=g)),a=k,B=s.minus(E.times(k=B)),s=k;return k=L(x.minus(U),C,0,1),a=a.plus(k.times(g)),U=U.plus(k.times(C)),a.s=g.s=se.s,G=G*2,O=L(g,C,G,d).minus(se).abs().comparedTo(L(a,U,G,d).minus(se).abs())<1?[g,C]:[a,U],D=h,O},P.toNumber=function(){return+ne(this)},P.toPrecision=function(x,B){return x!=null&&z(x,1,_),Ae(this,x,B,2)},P.toString=function(x){var B,U=this,C=U.s,k=U.e;return k===null?C?(B="Infinity",C<0&&(B="-"+B)):B="NaN":(x==null?B=k<=T||k>=M?ie(V(U.c),k):R(V(U.c),k,"0"):x===10&&Ne?(U=ee(new S(U),te+k+1,d),B=R(V(U.c),U.e,"0")):(z(x,2,le.length,"Base"),B=I(R(V(U.c),k,"0"),10,x,C,!0)),C<0&&U.c[0]&&(B="-"+B)),B},P.valueOf=P.toJSON=function(){return ne(this)},P._isBigNumber=!0,J!=null&&S.set(J),S}function $(J){var L=J|0;return J>0||J===L?L:L-1}function V(J){for(var L,I,F=1,P=J.length,Q=J[0]+"";F<P;){for(L=J[F++]+"",I=b-L.length;I--;L="0"+L);Q+=L}for(P=Q.length;Q.charCodeAt(--P)===48;);return Q.slice(0,P+1||1)}function Y(J,L){var I,F,P=J.c,Q=L.c,te=J.s,d=L.s,T=J.e,M=L.e;if(!te||!d)return null;if(I=P&&!P[0],F=Q&&!Q[0],I||F)return I?F?0:-d:te;if(te!=d)return te;if(I=te<0,F=T==M,!P||!Q)return F?0:!P^I?1:-1;if(!F)return T>M^I?1:-1;for(d=(T=P.length)<(M=Q.length)?T:M,te=0;te<d;te++)if(P[te]!=Q[te])return P[te]>Q[te]^I?1:-1;return T==M?0:T>M^I?1:-1}function z(J,L,I,F){if(J<L||J>I||J!==c(J))throw Error(f+(F||"Argument")+(typeof J=="number"?J<L||J>I?" out of range: ":" not an integer: ":" not a primitive number: ")+String(J))}function W(J){var L=J.c.length-1;return $(J.e/b)==L&&J.c[L]%2!=0}function ie(J,L){return(J.length>1?J.charAt(0)+"."+J.slice(1):J)+(L<0?"e":"e+")+L}function R(J,L,I){var F,P;if(L<0){for(P=I+".";++L;P+=I);J=P+J}else if(F=J.length,++L>F){for(P=I,L-=F;--L;P+=I);J+=P}else L<F&&(J=J.slice(0,L)+"."+J.slice(L));return J}r=y(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(cu)}(yn)),yn.exports}var pi,Es;function uu(){return Es||(Es=1,pi=function(t,r,n){var i=new t.Uint8Array(n),c=r.pushInt,f=r.pushInt32,o=r.pushInt32Neg,w=r.pushInt64,b=r.pushInt64Neg,A=r.pushFloat,m=r.pushFloatSingle,v=r.pushFloatDouble,_=r.pushTrue,y=r.pushFalse,$=r.pushUndefined,V=r.pushNull,Y=r.pushInfinity,z=r.pushInfinityNeg,W=r.pushNaN,ie=r.pushNaNNeg,R=r.pushArrayStart,J=r.pushArrayStartFixed,L=r.pushArrayStartFixed32,I=r.pushArrayStartFixed64,F=r.pushObjectStart,P=r.pushObjectStartFixed,Q=r.pushObjectStartFixed32,te=r.pushObjectStartFixed64,d=r.pushByteString,T=r.pushByteStringStart,M=r.pushUtf8String,j=r.pushUtf8StringStart,D=r.pushSimpleUnassigned,re=r.pushTagStart,ue=r.pushTagStart4,ye=r.pushTagStart8,oe=r.pushTagUnassigned,le=r.pushBreak,Ne=t.Math.pow,S=0,Ae=0,Ie=0;function ae(q){for(q=q|0,S=0,Ae=q;(S|0)<(Ae|0)&&(Ie=yc[i[S]&255](i[S]|0)|0,!((Ie|0)>0)););return Ie|0}function ee(q){return q=q|0,((S|0)+(q|0)|0)<(Ae|0)?0:1}function ne(q){return q=q|0,i[q|0]<<8|i[q+1|0]|0}function x(q){return q=q|0,i[q|0]<<24|i[q+1|0]<<16|i[q+2|0]<<8|i[q+3|0]|0}function B(q){return q=q|0,c(q|0),S=S+1|0,0}function U(q){return q=q|0,ee(1)|0?1:(c(i[S+1|0]|0),S=S+2|0,0)}function C(q){return q=q|0,ee(2)|0?1:(c(ne(S+1|0)|0),S=S+3|0,0)}function k(q){return q=q|0,ee(4)|0?1:(f(ne(S+1|0)|0,ne(S+3|0)|0),S=S+5|0,0)}function G(q){return q=q|0,ee(8)|0?1:(w(ne(S+1|0)|0,ne(S+3|0)|0,ne(S+5|0)|0,ne(S+7|0)|0),S=S+9|0,0)}function h(q){return q=q|0,c(-1-(q-32|0)|0),S=S+1|0,0}function s(q){return q=q|0,ee(1)|0?1:(c(-1-(i[S+1|0]|0)|0),S=S+2|0,0)}function a(q){q=q|0;var ve=0;return ee(2)|0?1:(ve=ne(S+1|0)|0,c(-1-(ve|0)|0),S=S+3|0,0)}function g(q){return q=q|0,ee(4)|0?1:(o(ne(S+1|0)|0,ne(S+3|0)|0),S=S+5|0,0)}function E(q){return q=q|0,ee(8)|0?1:(b(ne(S+1|0)|0,ne(S+3|0)|0,ne(S+5|0)|0,ne(S+7|0)|0),S=S+9|0,0)}function O(q){q=q|0;var ve=0,Te=0,Ee=0;return Ee=q-64|0,ee(Ee|0)|0?1:(ve=S+1|0,Te=(S+1|0)+(Ee|0)|0,d(ve|0,Te|0),S=Te|0,0)}function K(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(1)|0||(Ee=i[S+1|0]|0,ve=S+2|0,Te=(S+2|0)+(Ee|0)|0,ee(Ee+1|0)|0)?1:(d(ve|0,Te|0),S=Te|0,0)}function se(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(2)|0||(Ee=ne(S+1|0)|0,ve=S+3|0,Te=(S+3|0)+(Ee|0)|0,ee(Ee+2|0)|0)?1:(d(ve|0,Te|0),S=Te|0,0)}function fe(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(4)|0||(Ee=x(S+1|0)|0,ve=S+5|0,Te=(S+5|0)+(Ee|0)|0,ee(Ee+4|0)|0)?1:(d(ve|0,Te|0),S=Te|0,0)}function he(q){return q=q|0,1}function be(q){return q=q|0,T(),S=S+1|0,0}function p(q){q=q|0;var ve=0,Te=0,Ee=0;return Ee=q-96|0,ee(Ee|0)|0?1:(ve=S+1|0,Te=(S+1|0)+(Ee|0)|0,M(ve|0,Te|0),S=Te|0,0)}function u(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(1)|0||(Ee=i[S+1|0]|0,ve=S+2|0,Te=(S+2|0)+(Ee|0)|0,ee(Ee+1|0)|0)?1:(M(ve|0,Te|0),S=Te|0,0)}function l(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(2)|0||(Ee=ne(S+1|0)|0,ve=S+3|0,Te=(S+3|0)+(Ee|0)|0,ee(Ee+2|0)|0)?1:(M(ve|0,Te|0),S=Te|0,0)}function N(q){q=q|0;var ve=0,Te=0,Ee=0;return ee(4)|0||(Ee=x(S+1|0)|0,ve=S+5|0,Te=(S+5|0)+(Ee|0)|0,ee(Ee+4|0)|0)?1:(M(ve|0,Te|0),S=Te|0,0)}function H(q){return q=q|0,1}function X(q){return q=q|0,j(),S=S+1|0,0}function Z(q){return q=q|0,J(q-128|0),S=S+1|0,0}function ge(q){return q=q|0,ee(1)|0?1:(J(i[S+1|0]|0),S=S+2|0,0)}function _e(q){return q=q|0,ee(2)|0?1:(J(ne(S+1|0)|0),S=S+3|0,0)}function me(q){return q=q|0,ee(4)|0?1:(L(ne(S+1|0)|0,ne(S+3|0)|0),S=S+5|0,0)}function we(q){return q=q|0,ee(8)|0?1:(I(ne(S+1|0)|0,ne(S+3|0)|0,ne(S+5|0)|0,ne(S+7|0)|0),S=S+9|0,0)}function Se(q){return q=q|0,R(),S=S+1|0,0}function Oe(q){q=q|0;var ve=0;return ve=q-160|0,ee(ve|0)|0?1:(P(ve|0),S=S+1|0,0)}function ii(q){return q=q|0,ee(1)|0?1:(P(i[S+1|0]|0),S=S+2|0,0)}function si(q){return q=q|0,ee(2)|0?1:(P(ne(S+1|0)|0),S=S+3|0,0)}function oi(q){return q=q|0,ee(4)|0?1:(Q(ne(S+1|0)|0,ne(S+3|0)|0),S=S+5|0,0)}function ai(q){return q=q|0,ee(8)|0?1:(te(ne(S+1|0)|0,ne(S+3|0)|0,ne(S+5|0)|0,ne(S+7|0)|0),S=S+9|0,0)}function ci(q){return q=q|0,F(),S=S+1|0,0}function Ot(q){return q=q|0,re(q-192|0|0),S=S+1|0,0}function p0(q){return q=q|0,re(q|0),S=S+1|0,0}function y0(q){return q=q|0,re(q|0),S=S+1|0,0}function w0(q){return q=q|0,re(q|0),S=S+1|0,0}function g0(q){return q=q|0,re(q|0),S=S+1|0,0}function He(q){return q=q|0,re(q-192|0|0),S=S+1|0,0}function m0(q){return q=q|0,re(q|0),S=S+1|0,0}function b0(q){return q=q|0,re(q|0),S=S+1|0,0}function _0(q){return q=q|0,re(q|0),S=S+1|0,0}function rc(q){return q=q|0,ee(1)|0?1:(re(i[S+1|0]|0),S=S+2|0,0)}function nc(q){return q=q|0,ee(2)|0?1:(re(ne(S+1|0)|0),S=S+3|0,0)}function ic(q){return q=q|0,ee(4)|0?1:(ue(ne(S+1|0)|0,ne(S+3|0)|0),S=S+5|0,0)}function sc(q){return q=q|0,ee(8)|0?1:(ye(ne(S+1|0)|0,ne(S+3|0)|0,ne(S+5|0)|0,ne(S+7|0)|0),S=S+9|0,0)}function qe(q){return q=q|0,D((q|0)-224|0),S=S+1|0,0}function oc(q){return q=q|0,y(),S=S+1|0,0}function ac(q){return q=q|0,_(),S=S+1|0,0}function cc(q){return q=q|0,V(),S=S+1|0,0}function uc(q){return q=q|0,$(),S=S+1|0,0}function fc(q){return q=q|0,ee(1)|0?1:(D(i[S+1|0]|0),S=S+2|0,0)}function lc(q){q=q|0;var ve=0,Te=0,Ee=1,en=0,Ur=0,x0=0;return ee(2)|0?1:(ve=i[S+1|0]|0,Te=i[S+2|0]|0,(ve|0)&128&&(Ee=-1),en=+(((ve|0)&124)>>2),Ur=+(((ve|0)&3)<<8|Te),+en==0?A(+(+Ee*5960464477539063e-23*+Ur)):+en==31?+Ee==1?+Ur>0?W():Y():+Ur>0?ie():z():A(+(+Ee*Ne(2,+(+en-25))*+(1024+Ur))),S=S+3|0,0)}function hc(q){return q=q|0,ee(4)|0?1:(m(i[S+1|0]|0,i[S+2|0]|0,i[S+3|0]|0,i[S+4|0]|0),S=S+5|0,0)}function dc(q){return q=q|0,ee(8)|0?1:(v(i[S+1|0]|0,i[S+2|0]|0,i[S+3|0]|0,i[S+4|0]|0,i[S+5|0]|0,i[S+6|0]|0,i[S+7|0]|0,i[S+8|0]|0),S=S+9|0,0)}function Ue(q){return q=q|0,1}function pc(q){return q=q|0,le(),S=S+1|0,0}var yc=[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,U,C,k,G,Ue,Ue,Ue,Ue,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,a,g,E,Ue,Ue,Ue,Ue,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,K,se,fe,he,Ue,Ue,Ue,be,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,u,l,N,H,Ue,Ue,Ue,X,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,ge,_e,me,we,Ue,Ue,Ue,Se,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,ii,si,oi,ai,Ue,Ue,Ue,ci,Ot,Ot,Ot,Ot,Ot,Ot,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,rc,nc,ic,sc,Ue,Ue,Ue,Ue,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,oc,ac,cc,uc,fc,lc,hc,dc,Ue,Ue,Ue,pc];return{parse:ae}}),pi}var yi={},it={},Bs;function Xn(){if(Bs)return it;Bs=1;const e=Zn().BigNumber;return it.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},it.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},it.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},it.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},it.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},it.SHIFT32=Math.pow(2,32),it.SHIFT16=Math.pow(2,16),it.MAX_SAFE_HIGH=2097151,it.NEG_ONE=new e(-1),it.TEN=new e(10),it.TWO=new e(2),it.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},it}var As;function os(){return As||(As=1,function(e){const{Buffer:t}=Wn(),r=Zn().BigNumber,n=Xn(),i=n.SHIFT32,c=n.SHIFT16,f=2097151;e.parseHalf=function(b){var A,m,v;return v=b[0]&128?-1:1,A=(b[0]&124)>>2,m=(b[0]&3)<<8|b[1],A?A===31?v*(m?NaN:1/0):v*Math.pow(2,A-25)*(1024+m):v*5960464477539063e-23*m};function o(w){return w<16?"0"+w.toString(16):w.toString(16)}e.arrayBufferToBignumber=function(w){const b=w.byteLength;let A="";for(let m=0;m<b;m++)A+=o(w[m]);return new r(A,16)},e.buildMap=w=>{const b=new Map,A=Object.keys(w),m=A.length;for(let v=0;v<m;v++)b.set(A[v],w[A[v]]);return b},e.buildInt32=(w,b)=>w*c+b,e.buildInt64=(w,b,A,m)=>{const v=e.buildInt32(w,b),_=e.buildInt32(A,m);return v>f?new r(v).times(i).plus(_):v*i+_},e.writeHalf=function(b,A){const m=t.allocUnsafe(4);m.writeFloatBE(A,0);const v=m.readUInt32BE(0);if((v&8191)!==0)return!1;var _=v>>16&32768;const y=v>>23&255,$=v&8388607;if(y>=113&&y<=142)_+=(y-112<<10)+($>>13);else if(y>=103&&y<113){if($&(1<<126-y)-1)return!1;_+=$+8388608>>126-y}else return!1;return b.writeUInt16BE(_,0),!0},e.keySorter=function(w,b){var A=w[0].byteLength,m=b[0].byteLength;return A>m?1:m>A?-1:w[0].compare(b[0])},e.isNegativeZero=w=>w===0&&1/w<0,e.nextPowerOf2=w=>{let b=0;if(w&&!(w&w-1))return w;for(;w!==0;)w>>=1,b+=1;return 1<<b}}(yi)),yi}var wi,vs;function ca(){if(vs)return wi;vs=1;const e=Xn(),t=e.MT,r=e.SIMPLE,n=e.SYMS;class i{constructor(f){if(typeof f!="number")throw new Error("Invalid Simple type: "+typeof f);if(f<0||f>255||(f|0)!==f)throw new Error("value must be a small positive integer: "+f);this.value=f}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(f){return f._pushInt(this.value,t.SIMPLE_FLOAT)}static isSimple(f){return f instanceof i}static decode(f,o){switch(o==null&&(o=!0),f){case r.FALSE:return!1;case r.TRUE:return!0;case r.NULL:return o?null:n.NULL;case r.UNDEFINED:return o?void 0:n.UNDEFINED;case-1:if(!o)throw new Error("Invalid BREAK");return n.BREAK;default:return new i(f)}}}return wi=i,wi}var gi,Ts;function ua(){if(Ts)return gi;Ts=1;class e{constructor(r,n,i){if(this.tag=r,this.value=n,this.err=i,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(r){return r._pushTag(this.tag),r.pushAny(this.value)}convert(r){var n,i;if(i=r!=null?r[this.tag]:void 0,typeof i!="function"&&(i=e["_tag"+this.tag],typeof i!="function"))return this;try{return i.call(e,this.value)}catch(c){return n=c,this.err=n,this}}}return gi=e,gi}var mi,Ss;function fa(){if(Ss)return mi;Ss=1;const e=self.location?self.location.protocol+"//"+self.location.host:"",t=self.URL;class r{constructor(c="",f=e){this.super=new t(c,f),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(c){this.super.hash=c}set host(c){this.super.host=c}set hostname(c){this.super.hostname=c}set href(c){this.super.href=c}set origin(c){this.super.origin=c}set password(c){this.super.password=c}set pathname(c){this.super.pathname=c}set port(c){this.super.port=c}set protocol(c){this.super.protocol=c}set search(c){this.super.search=c}set searchParams(c){this.super.searchParams=c}set username(c){this.super.username=c}createObjectURL(c){return this.super.createObjectURL(c)}revokeObjectURL(c){this.super.revokeObjectURL(c)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function n(i){if(typeof i=="string")return new t(i).toString();if(!(i instanceof t)){const c=i.username&&i.password?`${i.username}:${i.password}@`:"",f=i.auth?i.auth+"@":"",o=i.port?":"+i.port:"",w=i.protocol?i.protocol+"//":"",b=i.host||"",A=i.hostname||"",m=i.search||(i.query?"?"+i.query:""),v=i.hash||"",_=i.pathname||"",y=i.path||_+m;return`${w}${c||f}${b||A+o}${y}${v}`}}return mi={URLWithLegacySupport:r,URLSearchParams:self.URLSearchParams,defaultBase:e,format:n},mi}var bi,Ns;function fu(){if(Ns)return bi;Ns=1;const{URLWithLegacySupport:e,format:t}=fa();return bi=(r,n={},i={},c)=>{let f=n.protocol?n.protocol.replace(":",""):"http";f=(i[f]||c||f)+":";let o;try{o=new e(r)}catch{o={}}const w=Object.assign({},n,{protocol:f||o.protocol,host:n.host||o.host});return new e(r,t(w)).toString()},bi}var _i,Is;function la(){if(Is)return _i;Is=1;const{URLWithLegacySupport:e,format:t,URLSearchParams:r,defaultBase:n}=fa(),i=fu();return _i={URL:e,URLSearchParams:r,format:t,relative:i,defaultBase:n},_i}var xi,Rs;function ha(){if(Rs)return xi;Rs=1;const{Buffer:e}=Wn(),t=Di(),r=Zn().BigNumber,n=uu(),i=os(),c=Xn(),f=ca(),o=ua(),{URL:w}=la();class b{constructor(m){m=m||{},!m.size||m.size<65536?m.size=65536:m.size=i.nextPowerOf2(m.size),this._heap=new ArrayBuffer(m.size),this._heap8=new Uint8Array(this._heap),this._buffer=e.from(this._heap),this._reset(),this._knownTags=Object.assign({0:v=>new Date(v),1:v=>new Date(v*1e3),2:v=>i.arrayBufferToBignumber(v),3:v=>c.NEG_ONE.minus(i.arrayBufferToBignumber(v)),4:v=>c.TEN.pow(v[0]).times(v[1]),5:v=>c.TWO.pow(v[0]).times(v[1]),32:v=>new w(v),35:v=>new RegExp(v)},m.tags),this.parser=n(gc,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var m=this._parents.pop();if(m.length>0)throw new Error(`Missing ${m.length} elements`);switch(m.type){case c.PARENT.TAG:this._push(this.createTag(m.ref[0],m.ref[1]));break;case c.PARENT.BYTE_STRING:this._push(this.createByteString(m.ref,m.length));break;case c.PARENT.UTF8_STRING:this._push(this.createUtf8String(m.ref,m.length));break;case c.PARENT.MAP:if(m.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(m.ref,m.length));break;case c.PARENT.OBJECT:if(m.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(m.ref,m.length));break;case c.PARENT.ARRAY:this._push(this.createArray(m.ref,m.length));break}this._currentParent&&this._currentParent.type===c.PARENT.TAG&&this._dec()}_dec(){const m=this._currentParent;m.length<0||(m.length--,m.length===0&&this._closeParent())}_push(m,v){const _=this._currentParent;switch(_.values++,_.type){case c.PARENT.ARRAY:case c.PARENT.BYTE_STRING:case c.PARENT.UTF8_STRING:_.length>-1?this._ref[this._ref.length-_.length]=m:this._ref.push(m),this._dec();break;case c.PARENT.OBJECT:_.tmpKey!=null?(this._ref[_.tmpKey]=m,_.tmpKey=null,this._dec()):(_.tmpKey=m,typeof _.tmpKey!="string"&&(_.type=c.PARENT.MAP,_.ref=i.buildMap(_.ref)));break;case c.PARENT.MAP:_.tmpKey!=null?(this._ref.set(_.tmpKey,m),_.tmpKey=null,this._dec()):_.tmpKey=m;break;case c.PARENT.TAG:this._ref.push(m),v||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(m,v,_){this._parents[this._depth]={type:v,length:_,ref:m,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:c.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(m,v){const _=this._knownTags[m];return _?_(v):new o(m,v)}createMap(m,v){return m}createObject(m,v){return m}createArray(m,v){return m}createByteString(m,v){return e.concat(m)}createByteStringFromHeap(m,v){return m===v?e.alloc(0):e.from(this._heap.slice(m,v))}createInt(m){return m}createInt32(m,v){return i.buildInt32(m,v)}createInt64(m,v,_,y){return i.buildInt64(m,v,_,y)}createFloat(m){return m}createFloatSingle(m,v,_,y){return t.read([m,v,_,y],0,!1,23,4)}createFloatDouble(m,v,_,y,$,V,Y,z){return t.read([m,v,_,y,$,V,Y,z],0,!1,52,8)}createInt32Neg(m,v){return-1-i.buildInt32(m,v)}createInt64Neg(m,v,_,y){const $=i.buildInt32(m,v),V=i.buildInt32(_,y);return $>c.MAX_SAFE_HIGH?c.NEG_ONE.minus(new r($).times(c.SHIFT32).plus(V)):-1-($*c.SHIFT32+V)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(m,v){return m.join("")}createUtf8StringFromHeap(m,v){return m===v?"":this._buffer.toString("utf8",m,v)}createSimpleUnassigned(m){return new f(m)}pushInt(m){this._push(this.createInt(m))}pushInt32(m,v){this._push(this.createInt32(m,v))}pushInt64(m,v,_,y){this._push(this.createInt64(m,v,_,y))}pushFloat(m){this._push(this.createFloat(m))}pushFloatSingle(m,v,_,y){this._push(this.createFloatSingle(m,v,_,y))}pushFloatDouble(m,v,_,y,$,V,Y,z){this._push(this.createFloatDouble(m,v,_,y,$,V,Y,z))}pushInt32Neg(m,v){this._push(this.createInt32Neg(m,v))}pushInt64Neg(m,v,_,y){this._push(this.createInt64Neg(m,v,_,y))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],c.PARENT.ARRAY,-1)}pushArrayStartFixed(m){this._createArrayStartFixed(m)}pushArrayStartFixed32(m,v){const _=i.buildInt32(m,v);this._createArrayStartFixed(_)}pushArrayStartFixed64(m,v,_,y){const $=i.buildInt64(m,v,_,y);this._createArrayStartFixed($)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(m){this._createObjectStartFixed(m)}pushObjectStartFixed32(m,v){const _=i.buildInt32(m,v);this._createObjectStartFixed(_)}pushObjectStartFixed64(m,v,_,y){const $=i.buildInt64(m,v,_,y);this._createObjectStartFixed($)}pushByteStringStart(){this._parents[this._depth]={type:c.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(m,v){this._push(this.createByteStringFromHeap(m,v))}pushUtf8StringStart(){this._parents[this._depth]={type:c.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(m,v){this._push(this.createUtf8StringFromHeap(m,v))}pushSimpleUnassigned(m){this._push(this.createSimpleUnassigned(m))}pushTagStart(m){this._parents[this._depth]={type:c.PARENT.TAG,length:1,ref:[m]}}pushTagStart4(m,v){this.pushTagStart(i.buildInt32(m,v))}pushTagStart8(m,v,_,y){this.pushTagStart(i.buildInt64(m,v,_,y))}pushTagUnassigned(m){this._push(this.createTag(m))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(m){if(m===0){this._push(this.createObject({}));return}this._createParent({},c.PARENT.OBJECT,m)}_createArrayStartFixed(m){if(m===0){this._push(this.createArray([]));return}this._createParent(new Array(m),c.PARENT.ARRAY,m)}_decode(m){if(m.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(m);const v=this.parser.parse(m.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(v>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(m){return this._decode(m),this._res[0]}decodeAll(m){return this._decode(m),this._res}static decode(m,v){return typeof m=="string"&&(m=e.from(m,v||"hex")),new b({size:m.length}).decodeFirst(m)}static decodeAll(m,v){return typeof m=="string"&&(m=e.from(m,v||"hex")),new b({size:m.length}).decodeAll(m)}}return b.decodeFirst=b.decode,xi=b,xi}var Ei,Us;function lu(){if(Us)return Ei;Us=1;const{Buffer:e}=Wn(),t=ha(),r=os();class n extends t{createTag(f,o){return`${f}(${o})`}createInt(f){return super.createInt(f).toString()}createInt32(f,o){return super.createInt32(f,o).toString()}createInt64(f,o,w,b){return super.createInt64(f,o,w,b).toString()}createInt32Neg(f,o){return super.createInt32Neg(f,o).toString()}createInt64Neg(f,o,w,b){return super.createInt64Neg(f,o,w,b).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(f){const o=super.createFloat(f);return r.isNegativeZero(f)?"-0_1":`${o}_1`}createFloatSingle(f,o,w,b){return`${super.createFloatSingle(f,o,w,b)}_2`}createFloatDouble(f,o,w,b,A,m,v,_){return`${super.createFloatDouble(f,o,w,b,A,m,v,_)}_3`}createByteString(f,o){const w=f.join(", ");return o===-1?`(_ ${w})`:`h'${w}`}createByteStringFromHeap(f,o){return`h'${e.from(super.createByteStringFromHeap(f,o)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(f){return`simple(${f})`}createArray(f,o){const w=super.createArray(f,o);return o===-1?`[_ ${w.join(", ")}]`:`[${w.join(", ")}]`}createMap(f,o){const w=super.createMap(f),b=Array.from(w.keys()).reduce(i(w),"");return o===-1?`{_ ${b}}`:`{${b}}`}createObject(f,o){const w=super.createObject(f),b=Object.keys(w).reduce(i(w),"");return o===-1?`{_ ${b}}`:`{${b}}`}createUtf8String(f,o){const w=f.join(", ");return o===-1?`(_ ${w})`:`"${w}"`}createUtf8StringFromHeap(f,o){return`"${e.from(super.createUtf8StringFromHeap(f,o)).toString("utf8")}"`}static diagnose(f,o){return typeof f=="string"&&(f=e.from(f,o||"hex")),new n().decodeFirst(f)}}Ei=n;function i(c){return(f,o)=>f?`${f}, ${o}: ${c[o]}`:`${o}: ${c[o]}`}return Ei}var Bi,Fs;function hu(){if(Fs)return Bi;Fs=1;const{Buffer:e}=Wn(),{URL:t}=la(),r=Zn().BigNumber,n=os(),i=Xn(),c=i.MT,f=i.NUMBYTES,o=i.SHIFT32,w=i.SYMS,b=i.TAG,A=i.MT.SIMPLE_FLOAT<<5|i.NUMBYTES.TWO,m=i.MT.SIMPLE_FLOAT<<5|i.NUMBYTES.FOUR,v=i.MT.SIMPLE_FLOAT<<5|i.NUMBYTES.EIGHT,_=i.MT.SIMPLE_FLOAT<<5|i.SIMPLE.TRUE,y=i.MT.SIMPLE_FLOAT<<5|i.SIMPLE.FALSE,$=i.MT.SIMPLE_FLOAT<<5|i.SIMPLE.UNDEFINED,V=i.MT.SIMPLE_FLOAT<<5|i.SIMPLE.NULL,Y=new r("0x20000000000000"),z=e.from("f97e00","hex"),W=e.from("f9fc00","hex"),ie=e.from("f97c00","hex");function R(L){return{}.toString.call(L).slice(8,-1)}class J{constructor(I){I=I||{},this.streaming=typeof I.stream=="function",this.onData=I.stream,this.semanticTypes=[[t,this._pushUrl],[r,this._pushBigNumber]];const F=I.genTypes||[],P=F.length;for(let Q=0;Q<P;Q++)this.addSemanticType(F[Q][0],F[Q][1]);this._reset()}addSemanticType(I,F){const P=this.semanticTypes.length;for(let Q=0;Q<P;Q++)if(this.semanticTypes[Q][0]===I){const d=this.semanticTypes[Q][1];return this.semanticTypes[Q][1]=F,d}return this.semanticTypes.push([I,F]),null}push(I){return I&&(this.result[this.offset]=I,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=I.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(I,F,P){return this.result[this.offset]=I,this.resultMethod[this.offset]=F,this.resultLength[this.offset]=P,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(I){return this.pushWrite(I,1,1)}_pushUInt16BE(I){return this.pushWrite(I,2,2)}_pushUInt32BE(I){return this.pushWrite(I,3,4)}_pushDoubleBE(I){return this.pushWrite(I,4,8)}_pushNaN(){return this.push(z)}_pushInfinity(I){const F=I<0?W:ie;return this.push(F)}_pushFloat(I){const F=e.allocUnsafe(2);if(n.writeHalf(F,I)&&n.parseHalf(F)===I)return this._pushUInt8(A)&&this.push(F);const P=e.allocUnsafe(4);return P.writeFloatBE(I,0),P.readFloatBE(0)===I?this._pushUInt8(m)&&this.push(P):this._pushUInt8(v)&&this._pushDoubleBE(I)}_pushInt(I,F,P){const Q=F<<5;return I<24?this._pushUInt8(Q|I):I<=255?this._pushUInt8(Q|f.ONE)&&this._pushUInt8(I):I<=65535?this._pushUInt8(Q|f.TWO)&&this._pushUInt16BE(I):I<=4294967295?this._pushUInt8(Q|f.FOUR)&&this._pushUInt32BE(I):I<=Number.MAX_SAFE_INTEGER?this._pushUInt8(Q|f.EIGHT)&&this._pushUInt32BE(Math.floor(I/o))&&this._pushUInt32BE(I%o):F===c.NEG_INT?this._pushFloat(P):this._pushFloat(I)}_pushIntNum(I){return I<0?this._pushInt(-I-1,c.NEG_INT,I):this._pushInt(I,c.POS_INT)}_pushNumber(I){switch(!1){case I===I:return this._pushNaN(I);case isFinite(I):return this._pushInfinity(I);case I%1!==0:return this._pushIntNum(I);default:return this._pushFloat(I)}}_pushString(I){const F=e.byteLength(I,"utf8");return this._pushInt(F,c.UTF8_STRING)&&this.pushWrite(I,5,F)}_pushBoolean(I){return this._pushUInt8(I?_:y)}_pushUndefined(I){return this._pushUInt8($)}_pushArray(I,F){const P=F.length;if(!I._pushInt(P,c.ARRAY))return!1;for(let Q=0;Q<P;Q++)if(!I.pushAny(F[Q]))return!1;return!0}_pushTag(I){return this._pushInt(I,c.TAG)}_pushDate(I,F){return I._pushTag(b.DATE_EPOCH)&&I.pushAny(Math.round(F/1e3))}_pushBuffer(I,F){return I._pushInt(F.length,c.BYTE_STRING)&&I.push(F)}_pushNoFilter(I,F){return I._pushBuffer(I,F.slice())}_pushRegexp(I,F){return I._pushTag(b.REGEXP)&&I.pushAny(F.source)}_pushSet(I,F){if(!I._pushInt(F.size,c.ARRAY))return!1;for(const P of F)if(!I.pushAny(P))return!1;return!0}_pushUrl(I,F){return I._pushTag(b.URI)&&I.pushAny(F.format())}_pushBigint(I){let F=b.POS_BIGINT;I.isNegative()&&(I=I.negated().minus(1),F=b.NEG_BIGINT);let P=I.toString(16);P.length%2&&(P="0"+P);const Q=e.from(P,"hex");return this._pushTag(F)&&this._pushBuffer(this,Q)}_pushBigNumber(I,F){if(F.isNaN())return I._pushNaN();if(!F.isFinite())return I._pushInfinity(F.isNegative()?-1/0:1/0);if(F.isInteger())return I._pushBigint(F);if(!(I._pushTag(b.DECIMAL_FRAC)&&I._pushInt(2,c.ARRAY)))return!1;const P=F.decimalPlaces(),Q=F.multipliedBy(new r(10).pow(P));return I._pushIntNum(-P)?Q.abs().isLessThan(Y)?I._pushIntNum(Q.toNumber()):I._pushBigint(Q):!1}_pushMap(I,F){return I._pushInt(F.size,c.MAP)?this._pushRawMap(F.size,Array.from(F)):!1}_pushObject(I){if(!I)return this._pushUInt8(V);for(var F=this.semanticTypes.length,P=0;P<F;P++)if(I instanceof this.semanticTypes[P][0])return this.semanticTypes[P][1].call(I,this,I);var Q=I.encodeCBOR;if(typeof Q=="function")return Q.call(I,this);var te=Object.keys(I),d=te.length;return this._pushInt(d,c.MAP)?this._pushRawMap(d,te.map(T=>[T,I[T]])):!1}_pushRawMap(I,F){F=F.map(function(Q){return Q[0]=J.encode(Q[0]),Q}).sort(n.keySorter);for(var P=0;P<I;P++)if(!this.push(F[P][0])||!this.pushAny(F[P][1]))return!1;return!0}write(I){return this.pushAny(I)}pushAny(I){var F=R(I);switch(F){case"Number":return this._pushNumber(I);case"String":return this._pushString(I);case"Boolean":return this._pushBoolean(I);case"Object":return this._pushObject(I);case"Array":return this._pushArray(this,I);case"Uint8Array":return this._pushBuffer(this,e.isBuffer(I)?I:e.from(I));case"Null":return this._pushUInt8(V);case"Undefined":return this._pushUndefined(I);case"Map":return this._pushMap(this,I);case"Set":return this._pushSet(this,I);case"URL":return this._pushUrl(this,I);case"BigNumber":return this._pushBigNumber(this,I);case"Date":return this._pushDate(this,I);case"RegExp":return this._pushRegexp(this,I);case"Symbol":switch(I){case w.NULL:return this._pushObject(null);case w.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+I.toString())}default:throw new Error("Unknown type: "+typeof I+", "+(I?I.toString():""))}}finalize(){if(this.offset===0)return null;for(var I=this.result,F=this.resultLength,P=this.resultMethod,Q=this.offset,te=0,d=0;d<Q;d++)te+=F[d];var T=e.allocUnsafe(te),M=0,j=0;for(d=0;d<Q;d++){switch(j=F[d],P[d]){case 0:I[d].copy(T,M);break;case 1:T.writeUInt8(I[d],M,!0);break;case 2:T.writeUInt16BE(I[d],M,!0);break;case 3:T.writeUInt32BE(I[d],M,!0);break;case 4:T.writeDoubleBE(I[d],M,!0);break;case 5:T.write(I[d],M,j,"utf8");break;default:throw new Error("unkown method")}M+=j}var D=T;return this._reset(),D}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(I){const F=new J;if(!F.pushAny(I))throw new Error("Failed to encode input");return F.finalize()}}return Bi=J,Bi}var Os;function du(){return Os||(Os=1,function(e){e.Diagnose=lu(),e.Decoder=ha(),e.Encoder=hu(),e.Simple=ca(),e.Tagged=ua(),e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}}(hi)),hi}var pu=du();const da=mc(pu);function dt(e){return dn(Wc.create().update(new Uint8Array(e)).digest())}function wn(e){if(e instanceof da.Tagged)return wn(e.value);if(typeof e=="string")return pa(e);if(typeof e=="number")return dt(Me(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return dt(e);if(Array.isArray(e)){const t=e.map(wn);return dt(pt(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return dt(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return wn(e.toHash());if(typeof e=="object")return kn(e);if(typeof e=="bigint")return dt(Me(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const pa=e=>{const t=new TextEncoder().encode(e);return dt(t)};function Gi(e){return kn(e)}function kn(e){const n=Object.entries(e).filter(([,f])=>f!==void 0).map(([f,o])=>{const w=pa(f),b=wn(o);return[w,b]}).sort(([f],[o])=>Bo(f,o)),i=pt(...n.map(f=>pt(...f)));return dt(i)}var yu=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const wu=new TextEncoder().encode(`
ic-request`);class A0{getPrincipal(){return this._principal||(this._principal=xe.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,n=yu(t,["body"]),i=Gi(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(pt(wu,i))}})}}class Ps{getPrincipal(){return xe.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var Or={},Tt={},Fe={},Ms;function ya(){if(Ms)return Fe;Ms=1,Object.defineProperty(Fe,"__esModule",{value:!0});const e=9007199254740992;function t(d,...T){const M=new Uint8Array(d.byteLength+T.reduce((D,re)=>D+re.byteLength,0));M.set(new Uint8Array(d),0);let j=d.byteLength;for(const D of T)M.set(new Uint8Array(D),j),j+=D.byteLength;return M.buffer}function r(d,T,M){M=M.replace(/[^0-9a-fA-F]/g,"");const j=2**(T-24);M=M.slice(-j*2).padStart(j*2,"0");const D=[(d<<5)+T].concat(M.match(/../g).map(re=>parseInt(re,16)));return new Uint8Array(D).buffer}function n(d,T){if(T<24)return new Uint8Array([(d<<5)+T]).buffer;{const M=T<=255?24:T<=65535?25:T<=4294967295?26:27;return r(d,M,T.toString(16))}}function i(d){const T=[];for(let M=0;M<d.length;M++){let j=d.charCodeAt(M);j<128?T.push(j):j<2048?T.push(192|j>>6,128|j&63):j<55296||j>=57344?T.push(224|j>>12,128|j>>6&63,128|j&63):(M++,j=(j&1023)<<10|d.charCodeAt(M)&1023,T.push(240|j>>18,128|j>>12&63,128|j>>6&63,128|j&63))}return t(new Uint8Array(n(3,d.length)),new Uint8Array(T))}function c(d,T){if(d==14277111)return t(new Uint8Array([217,217,247]),T);if(d<24)return t(new Uint8Array([192+d]),T);{const M=d<=255?24:d<=65535?25:d<=4294967295?26:27,j=2**(M-24),D=d.toString(16).slice(-j*2).padStart(j*2,"0"),re=[192+M].concat(D.match(/../g).map(ue=>parseInt(ue,16)));return new Uint8Array(re).buffer}}Fe.tagged=c;function f(d){return new Uint8Array(d).buffer}Fe.raw=f;function o(d){if(isNaN(d))throw new RangeError("Invalid number.");d=Math.min(Math.max(0,d),23);const T=[0+d];return new Uint8Array(T).buffer}Fe.uSmall=o;function w(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,d),255),d=d.toString(16),r(0,24,d)}Fe.u8=w;function b(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,d),65535),d=d.toString(16),r(0,25,d)}Fe.u16=b;function A(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,d),4294967295),d=d.toString(16),r(0,26,d)}Fe.u32=A;function m(d,T){if(typeof d=="string"&&T==16){if(d.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return r(0,27,d)}if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,d),e),d=d.toString(16),r(0,27,d)}Fe.u64=m;function v(d){if(isNaN(d))throw new RangeError("Invalid number.");if(d===0)return o(0);d=Math.min(Math.max(0,-d),24)-1;const T=[32+d];return new Uint8Array(T).buffer}Fe.iSmall=v;function _(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,-d-1),255),d=d.toString(16),r(1,24,d)}Fe.i8=_;function y(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,-d-1),65535),d=d.toString(16),r(1,25,d)}Fe.i16=y;function $(d,T){if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,-d-1),4294967295),d=d.toString(16),r(1,26,d)}Fe.i32=$;function V(d,T){if(typeof d=="string"&&T==16){if(d.startsWith("-")?d=d.slice(1):d="0",d.match(/[^0-9a-fA-F]/)||d.length>16)throw new RangeError("Invalid number.");let M=!1,j=d.split("").reduceRight((D,re)=>{if(M)return re+D;let ue=parseInt(re,16)-1;return ue>=0?(M=!0,ue.toString(16)+D):"f"+D},"");return M?r(1,27,j):m(0)}if(d=parseInt(""+d,T),isNaN(d))throw new RangeError("Invalid number.");return d=Math.min(Math.max(0,-d-1),9007199254740992),d=d.toString(16),r(1,27,d)}Fe.i64=V;function Y(d){return d>=0?d<24?o(d):d<=255?w(d):d<=65535?b(d):d<=4294967295?A(d):m(d):d>=-24?v(d):d>=-255?_(d):d>=-65535?y(d):d>=-4294967295?$(d):V(d)}Fe.number=Y;function z(d){return t(n(2,d.byteLength),d)}Fe.bytes=z;function W(d){return i(d)}Fe.string=W;function ie(d){return t(n(4,d.length),...d)}Fe.array=ie;function R(d,T=!1){d instanceof Map||(d=new Map(Object.entries(d)));let M=Array.from(d.entries());return T&&(M=M.sort(([j],[D])=>j.localeCompare(D))),t(n(5,d.size),...M.map(([j,D])=>t(i(j),D)))}Fe.map=R;function J(d){const T=new Float32Array([d]);return t(new Uint8Array([250]),new Uint8Array(T.buffer))}Fe.singleFloat=J;function L(d){const T=new Float64Array([d]);return t(new Uint8Array([251]),new Uint8Array(T.buffer))}Fe.doubleFloat=L;function I(d){return d?F():P()}Fe.bool=I;function F(){return f(new Uint8Array([245]))}Fe.true_=F;function P(){return f(new Uint8Array([244]))}Fe.false_=P;function Q(){return f(new Uint8Array([246]))}Fe.null_=Q;function te(){return f(new Uint8Array([247]))}return Fe.undefined_=te,Fe}var ks;function gu(){if(ks)return Tt;ks=1;var e=Tt&&Tt.__importStar||function(o){if(o&&o.__esModule)return o;var w={};if(o!=null)for(var b in o)Object.hasOwnProperty.call(o,b)&&(w[b]=o[b]);return w.default=o,w};Object.defineProperty(Tt,"__esModule",{value:!0});const t=e(ya()),r=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class n{constructor(w,b=!1){this._serializer=w,this._stable=b,this.name="jsonDefault",this.priority=-100}match(w){return["undefined","boolean","number","string","object"].indexOf(typeof w)!=-1}encode(w){switch(typeof w){case"undefined":return t.undefined_();case"boolean":return t.bool(w);case"number":return Math.floor(w)===w?t.number(w):t.doubleFloat(w);case"string":return t.string(w);case"object":if(w===null)return t.null_();if(Array.isArray(w))return t.array(w.map(b=>this._serializer.serializeValue(b)));if(r.find(b=>w instanceof b))return t.bytes(w.buffer);if(Object.getOwnPropertyNames(w).indexOf("toJSON")!==-1)return this.encode(w.toJSON());if(w instanceof Map){const b=new Map;for(const[A,m]of w.entries())b.set(A,this._serializer.serializeValue(m));return t.map(b,this._stable)}else{const b=new Map;for(const[A,m]of Object.entries(w))b.set(A,this._serializer.serializeValue(m));return t.map(b,this._stable)}default:throw new Error("Invalid value.")}}}Tt.JsonDefaultCborEncoder=n;class i{constructor(){this.name="cborEncoder",this.priority=-90}match(w){return typeof w=="object"&&typeof w.toCBOR=="function"}encode(w){return w.toCBOR()}}Tt.ToCborEncoder=i;class c{constructor(){this._encoders=new Set}static withDefaultEncoders(w=!1){const b=new this;return b.addEncoder(new n(b,w)),b.addEncoder(new i),b}removeEncoder(w){for(const b of this._encoders.values())b.name==w&&this._encoders.delete(b)}addEncoder(w){this._encoders.add(w)}getEncoderFor(w){let b=null;for(const A of this._encoders)(!b||A.priority>b.priority)&&A.match(w)&&(b=A);if(b===null)throw new Error("Could not find an encoder for value.");return b}serializeValue(w){return this.getEncoderFor(w).encode(w)}serialize(w){return this.serializeValue(w)}}Tt.CborSerializer=c;class f extends c{serialize(w){return t.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(w))]))}}return Tt.SelfDescribeCborSerializer=f,Tt}var Cs;function mu(){return Cs||(Cs=1,function(e){function t(i){for(var c in i)e.hasOwnProperty(c)||(e[c]=i[c])}var r=Or&&Or.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(c[f]=i[f]);return c.default=i,c};Object.defineProperty(e,"__esModule",{value:!0}),t(gu());const n=r(ya());e.value=n}(Or)),Or}var jt=mu();class bu{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return jt.value.bytes(t.toUint8Array())}}class _u{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return jt.value.bytes(new Uint8Array(t))}}class xu{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?jt.value.tagged(2,jt.value.bytes(On(t.toString(16)))):jt.value.tagged(3,jt.value.bytes(On((BigInt("-1")*t).toString(16))))}}const Jn=jt.SelfDescribeCborSerializer.withDefaultEncoders(!0);Jn.addEncoder(new bu);Jn.addEncoder(new _u);Jn.addEncoder(new xu);var Vi;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(Vi||(Vi={}));function Ai(e){return Jn.serialize(e)}function qs(e){const t=e.byteLength;let r=BigInt(0);for(let n=0;n<t;n++)r=r*BigInt(256)+BigInt(e[n]);return r}class Eu extends da.Decoder{createByteString(t){return pt(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}function Ut(e){const t=new Uint8Array(e),r=new Eu({size:t.byteLength,tags:{2:n=>qs(n),3:n=>-qs(n),[Vi.Semantic]:n=>n}});try{return r.decodeFirst(t)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${ze(t)}`)}}const an=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Hi;(function(e){e.Call="call"})(Hi||(Hi={}));function ji(){const e=new ArrayBuffer(16),t=new DataView(e),r=an(),n=an(),i=an(),c=an();return t.setUint32(0,r),t.setUint32(4,n),t.setUint32(8,i),t.setUint32(12,c),e}const $s=BigInt(1e6),Bu=60*1e3;class cn{constructor(t){if(t<90*1e3){const o=BigInt(Date.now()+t)*$s/BigInt(1e9);this._value=o*BigInt(1e9);return}const c=BigInt(Math.floor(Date.now()+t-Bu))*$s/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=c}toCBOR(){return jt.value.u64(this._value.toString(16),16)}toHash(){return Me(this._value)}}function Gs(e=ji){return async t=>{const r=t.request.headers;t.request.headers=r,t.endpoint==="call"&&(t.body.nonce=e())}}function kr(e){const t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}class vi extends Pe{constructor(t,r){super(t),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Au extends Pe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class vu extends Pe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class Tu extends Pe{constructor(t,r,n,i,c,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const as=BigInt(0),Cn=BigInt(1);function Kr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function wa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?as:BigInt("0x"+e)}function Bt(e){return wa(vr(e))}function Wr(e){return Xe(e),wa(vr(Uint8Array.from(e).reverse()))}function We(e,t){return go(e.toString(16).padStart(t*2,"0"))}function Qn(e,t){return We(e,t).reverse()}function nt(e,t,r){let n;if(typeof t=="string")try{n=go(t)}catch(c){throw new Error(e+" must be hex string or Uint8Array, cause: "+c)}else if(es(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}const Ti=e=>typeof e=="bigint"&&as<=e;function ga(e,t,r){return Ti(e)&&Ti(t)&&Ti(r)&&t<=e&&e<r}function Cr(e,t,r,n){if(!ga(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Hr(e){let t;for(t=0;e>as;e>>=Cn,t+=1);return t}function Su(e,t){return e>>BigInt(t)&Cn}const Er=e=>(Cn<<BigInt(e))-Cn;function Nu(e){return typeof e=="function"&&Number.isSafeInteger(e.outputLen)}function Lr(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(i,c,f){const o=e[i];if(f&&o===void 0)return;const w=typeof o;if(w!==c||o===null)throw new Error(`param "${i}" is invalid: expected ${c}, got ${w}`)}Object.entries(t).forEach(([i,c])=>n(i,c,!1)),Object.entries(r).forEach(([i,c])=>n(i,c,!0))}const Vs=()=>{throw new Error("not implemented")};function Zr(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const c=e(r,...n);return t.set(r,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),Ze=BigInt(1),Dt=BigInt(2),Iu=BigInt(3),ma=BigInt(4),ba=BigInt(5),_a=BigInt(8);function $e(e,t){const r=e%t;return r>=ot?r:t+r}function wt(e,t,r){let n=e;for(;t-- >ot;)n*=n,n%=r;return n}function Hs(e,t){if(e===ot)throw new Error("invert: expected non-zero number");if(t<=ot)throw new Error("invert: expected positive modulus, got "+t);let r=$e(e,t),n=t,i=ot,c=Ze;for(;r!==ot;){const o=n/r,w=n%r,b=i-c*o;n=r,r=w,i=c,c=b}if(n!==Ze)throw new Error("invert: does not exist");return $e(i,t)}function xa(e,t){const r=(e.ORDER+Ze)/ma,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function Ru(e,t){const r=(e.ORDER-ba)/_a,n=e.mul(t,Dt),i=e.pow(n,r),c=e.mul(t,i),f=e.mul(e.mul(c,Dt),i),o=e.mul(c,e.sub(f,e.ONE));if(!e.eql(e.sqr(o),t))throw new Error("Cannot find square root");return o}function Uu(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Ze,r=0;for(;t%Dt===ot;)t/=Dt,r++;let n=Dt;const i=ur(e);for(;qn(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return xa;let c=i.pow(n,t);const f=(t+Ze)/Dt;return function(w,b){if(w.is0(b))return b;if(qn(w,b)!==1)throw new Error("Cannot find square root");let A=r,m=w.mul(w.ONE,c),v=w.pow(b,t),_=w.pow(b,f);for(;!w.eql(v,w.ONE);){if(w.is0(v))return w.ZERO;let y=1,$=w.sqr(v);for(;!w.eql($,w.ONE);)if(y++,$=w.sqr($),y===A)throw new Error("Cannot find square root");const V=Ze<<BigInt(A-y-1),Y=w.pow(m,V);A=y,m=w.sqr(Y),v=w.mul(v,m),_=w.mul(_,Y)}return _}}function Fu(e){return e%ma===Iu?xa:e%_a===ba?Ru:Uu(e)}const Ou=(e,t)=>($e(e,t)&Ze)===Ze,Pu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ea(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Pu.reduce((n,i)=>(n[i]="function",n),t);return Lr(e,r),e}function gn(e,t,r){if(r<ot)throw new Error("invalid exponent, negatives unsupported");if(r===ot)return e.ONE;if(r===Ze)return t;let n=e.ONE,i=t;for(;r>ot;)r&Ze&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Ze;return n}function rr(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((f,o,w)=>e.is0(o)?f:(n[w]=f,e.mul(f,o)),e.ONE),c=e.inv(i);return t.reduceRight((f,o,w)=>e.is0(o)?f:(n[w]=e.mul(f,n[w]),e.mul(f,o)),c),n}function qn(e,t){const r=(e.ORDER-Ze)/Dt,n=e.pow(t,r),i=e.eql(n,e.ONE),c=e.eql(n,e.ZERO),f=e.eql(n,e.neg(e.ONE));if(!i&&!c&&!f)throw new Error("invalid Legendre symbol result");return i?1:c?0:-1}function Mu(e,t){t!==void 0&&vc(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ur(e,t,r=!1,n={}){if(e<=ot)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,c;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const A=t;A.BITS&&(i=A.BITS),A.sqrt&&(c=A.sqrt),typeof A.isLE=="boolean"&&(r=A.isLE)}else typeof t=="number"&&(i=t),n.sqrt&&(c=n.sqrt);const{nBitLength:f,nByteLength:o}=Mu(e,i);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let w;const b=Object.freeze({ORDER:e,isLE:r,BITS:f,BYTES:o,MASK:Er(f),ZERO:ot,ONE:Ze,create:A=>$e(A,e),isValid:A=>{if(typeof A!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof A);return ot<=A&&A<e},is0:A=>A===ot,isValidNot0:A=>!b.is0(A)&&b.isValid(A),isOdd:A=>(A&Ze)===Ze,neg:A=>$e(-A,e),eql:(A,m)=>A===m,sqr:A=>$e(A*A,e),add:(A,m)=>$e(A+m,e),sub:(A,m)=>$e(A-m,e),mul:(A,m)=>$e(A*m,e),pow:(A,m)=>gn(b,A,m),div:(A,m)=>$e(A*Hs(m,e),e),sqrN:A=>A*A,addN:(A,m)=>A+m,subN:(A,m)=>A-m,mulN:(A,m)=>A*m,inv:A=>Hs(A,e),sqrt:c||(A=>(w||(w=Fu(e)),w(b,A))),toBytes:A=>r?Qn(A,o):We(A,o),fromBytes:A=>{if(A.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+A.length);return r?Wr(A):Bt(A)},invertBatch:A=>rr(b,A),cmov:(A,m,v)=>v?m:A});return Object.freeze(b)}function Ba(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Aa(e){const t=Ba(e);return t+Math.ceil(t/2)}function ku(e,t,r=!1){const n=e.length,i=Ba(t),c=Aa(t);if(n<16||n<c||n>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+n);const f=r?Wr(e):Bt(e),o=$e(f,t-Ze)+Ze;return r?Qn(o,i):We(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sr=BigInt(0),er=BigInt(1);function jr(e,t){const r=t.negate();return e?r:t}function $n(e,t,r){const n=t==="pz"?f=>f.pz:f=>f.ez,i=rr(e.Fp,r.map(n));return r.map((f,o)=>f.toAffine(i[o])).map(e.fromAffine)}function va(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Si(e,t){va(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,c=Er(e),f=BigInt(e);return{windows:r,windowSize:n,mask:c,maxNumber:i,shiftBy:f}}function js(e,t,r){const{windowSize:n,mask:i,maxNumber:c,shiftBy:f}=r;let o=Number(e&i),w=e>>f;o>n&&(o-=c,w+=er);const b=t*n,A=b+Math.abs(o)-1,m=o===0,v=o<0,_=t%2!==0;return{nextN:w,offset:A,isZero:m,isNeg:v,isNegF:_,offsetF:b}}function Cu(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function qu(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const Ni=new WeakMap,Ta=new WeakMap;function Ii(e){return Ta.get(e)||1}function zs(e){if(e!==Sr)throw new Error("invalid wNAF")}function Sa(e,t){return{constTimeNegate:jr,hasPrecomputes(r){return Ii(r)!==1},unsafeLadder(r,n,i=e.ZERO){let c=r;for(;n>Sr;)n&er&&(i=i.add(c)),c=c.double(),n>>=er;return i},precomputeWindow(r,n){const{windows:i,windowSize:c}=Si(n,t),f=[];let o=r,w=o;for(let b=0;b<i;b++){w=o,f.push(w);for(let A=1;A<c;A++)w=w.add(o),f.push(w);o=w.double()}return f},wNAF(r,n,i){let c=e.ZERO,f=e.BASE;const o=Si(r,t);for(let w=0;w<o.windows;w++){const{nextN:b,offset:A,isZero:m,isNeg:v,isNegF:_,offsetF:y}=js(i,w,o);i=b,m?f=f.add(jr(_,n[y])):c=c.add(jr(v,n[A]))}return zs(i),{p:c,f}},wNAFUnsafe(r,n,i,c=e.ZERO){const f=Si(r,t);for(let o=0;o<f.windows&&i!==Sr;o++){const{nextN:w,offset:b,isZero:A,isNeg:m}=js(i,o,f);if(i=w,!A){const v=n[b];c=c.add(m?v.negate():v)}}return zs(i),c},getPrecomputes(r,n,i){let c=Ni.get(n);return c||(c=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(c=i(c)),Ni.set(n,c))),c},wNAFCached(r,n,i){const c=Ii(r);return this.wNAF(c,this.getPrecomputes(c,r,i),n)},wNAFCachedUnsafe(r,n,i,c){const f=Ii(r);return f===1?this.unsafeLadder(r,n,c):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,c)},setWindowSize(r,n){va(n,t),Ta.set(r,n),Ni.delete(r)}}}function $u(e,t,r,n){let i=t,c=e.ZERO,f=e.ZERO;for(;r>Sr||n>Sr;)r&er&&(c=c.add(i)),n&er&&(f=f.add(i)),i=i.double(),r>>=er,n>>=er;return{p1:c,p2:f}}function Na(e,t,r,n){Cu(r,e),qu(n,t);const i=r.length,c=n.length;if(i!==c)throw new Error("arrays of points and scalars must have equal length");const f=e.ZERO,o=Hr(BigInt(i));let w=1;o>12?w=o-3:o>4?w=o-2:o>0&&(w=2);const b=Er(w),A=new Array(Number(b)+1).fill(f),m=Math.floor((t.BITS-1)/w)*w;let v=f;for(let _=m;_>=0;_-=w){A.fill(f);for(let $=0;$<c;$++){const V=n[$],Y=Number(V>>BigInt(_)&b);A[Y]=A[Y].add(r[$])}let y=f;for(let $=A.length-1,V=f;$>0;$--)V=V.add(A[$]),y=y.add(V);if(v=v.add(y),_!==0)for(let $=0;$<w;$++)v=v.double()}return v}function Ys(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ea(t),t}else return ur(e)}function Ia(e,t,r={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const o of["p","n","h"]){const w=t[o];if(!(typeof w=="bigint"&&w>Sr))throw new Error(`CURVE.${o} must be positive bigint`)}const n=Ys(t.p,r.Fp),i=Ys(t.n,r.Fn),f=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const o of f)if(!n.isValid(t[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}const Gu=Bt;function Vt(e,t){if(Xr(e),Xr(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function Vu(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Xr(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Hu(e,t,r,n){Xe(e),Xe(t),Xr(r),t.length>255&&(t=n(ke(Vn("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:c}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=ke(t,Vt(t.length,1)),w=Vt(0,c),b=Vt(r,2),A=new Array(f),m=n(ke(w,e,b,Vt(0,1),o));A[0]=n(ke(m,Vt(1,1),o));for(let _=1;_<=f;_++){const y=[Vu(m,A[_-1]),Vt(_+1,1),o];A[_]=n(ke(...y))}return ke(...A).slice(0,r)}function ju(e,t,r,n,i){if(Xe(e),Xe(t),Xr(r),t.length>255){const c=Math.ceil(2*n/8);t=i.create({dkLen:c}).update(Vn("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(Vt(r,2)).update(t).update(Vt(t.length,1)).digest()}function Ks(e,t,r){Lr(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:c,hash:f,expand:o,DST:w}=r;if(!es(w)&&typeof w!="string")throw new Error("DST must be string or uint8array");if(!Nu(r.hash))throw new Error("expected valid hash");Xe(e),Xr(t);const b=typeof w=="string"?Vn(w):w,A=n.toString(2).length,m=Math.ceil((A+i)/8),v=t*c*m;let _;if(o==="xmd")_=Hu(e,b,v,f);else if(o==="xof")_=ju(e,b,v,i,f);else if(o==="_internal_pass")_=e;else throw new Error('expand must be "xmd" or "xof"');const y=new Array(t);for(let $=0;$<t;$++){const V=new Array(c);for(let Y=0;Y<c;Y++){const z=m*(Y+$*c),W=_.subarray(z,z+m);V[Y]=$e(Gu(W),n)}y[$]=V}return y}function Ra(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,i)=>{const[c,f,o,w]=r.map(m=>m.reduce((v,_)=>e.add(e.mul(v,n),_))),[b,A]=rr(e,[f,w],!0);return n=e.mul(c,b),i=e.mul(i,e.mul(o,A)),{x:n,y:i}}}function Ws(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function n(c){return e.fromAffine(t(c))}function i(c){const f=c.clearCofactor();return f.equals(e.ZERO)?e.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(c,f){const o=r.DST?r.DST:{},w=Object.assign({},r,o,f),b=Ks(c,2,w),A=n(b[0]),m=n(b[1]);return i(A.add(m))},encodeToCurve(c,f){const o=r.encodeDST?r.encodeDST:{},w=Object.assign({},r,o,f),b=Ks(c,1,w);return i(n(b[0]))},mapToCurve(c){if(!Array.isArray(c))throw new Error("expected array of bigints");for(const f of c)if(typeof f!="bigint")throw new Error("expected array of bigints");return i(n(c))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zi=BigInt(0),st=BigInt(1),$t=BigInt(2),mr=BigInt(3),Yi=BigInt(4);function Ua(e,t,r){function n(i){const c=e.sqr(i),f=e.mul(c,i);return e.add(e.add(f,e.mul(i,t)),r)}return n}function Fa(e,t,r){const{BYTES:n}=e;function i(c){let f;if(typeof c=="bigint")f=c;else{let o=nt("private key",c);if(t){if(!t.includes(o.length*2))throw new Error("invalid private key");const w=new Uint8Array(n);w.set(o,w.length-o.length),o=w}try{f=e.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof c}`)}}if(r&&(f=e.create(f)),!e.isValidNot0(f))throw new Error("invalid private key: out of range [1..N-1]");return f}return i}function zu(e,t={}){const{Fp:r,Fn:n}=Ia("weierstrass",e,t),{h:i,n:c}=e;Lr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=t;if(f&&(!r.is0(e.a)||typeof f.beta!="bigint"||typeof f.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function o(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function w(I,F,P){const{x:Q,y:te}=F.toAffine(),d=r.toBytes(Q);if(Kr("isCompressed",P),P){o();const T=!r.isOdd(te);return ke(Yu(T),d)}else return ke(Uint8Array.of(4),d,r.toBytes(te))}function b(I){Xe(I);const F=r.BYTES,P=F+1,Q=2*F+1,te=I.length,d=I[0],T=I.subarray(1);if(te===P&&(d===2||d===3)){const M=r.fromBytes(T);if(!r.isValid(M))throw new Error("bad point: is not on curve, wrong x");const j=v(M);let D;try{D=r.sqrt(j)}catch(ye){const oe=ye instanceof Error?": "+ye.message:"";throw new Error("bad point: is not on curve, sqrt error"+oe)}o();const re=r.isOdd(D);return(d&1)===1!==re&&(D=r.neg(D)),{x:M,y:D}}else if(te===Q&&d===4){const M=r.fromBytes(T.subarray(F*0,F*1)),j=r.fromBytes(T.subarray(F*1,F*2));if(!_(M,j))throw new Error("bad point: is not on curve");return{x:M,y:j}}else throw new Error(`bad point: got length ${te}, expected compressed=${P} or uncompressed=${Q}`)}const A=t.toBytes||w,m=t.fromBytes||b,v=Ua(r,e.a,e.b);function _(I,F){const P=r.sqr(F),Q=v(I);return r.eql(P,Q)}if(!_(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const y=r.mul(r.pow(e.a,mr),Yi),$=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(y,$)))throw new Error("bad curve params: a or b");function V(I,F,P=!1){if(!r.isValid(F)||P&&r.is0(F))throw new Error(`bad point coordinate ${I}`);return F}function Y(I){if(!(I instanceof R))throw new Error("ProjectivePoint expected")}const z=Zr((I,F)=>{const{px:P,py:Q,pz:te}=I;if(r.eql(te,r.ONE))return{x:P,y:Q};const d=I.is0();F==null&&(F=d?r.ONE:r.inv(te));const T=r.mul(P,F),M=r.mul(Q,F),j=r.mul(te,F);if(d)return{x:r.ZERO,y:r.ZERO};if(!r.eql(j,r.ONE))throw new Error("invZ was invalid");return{x:T,y:M}}),W=Zr(I=>{if(I.is0()){if(t.allowInfinityPoint&&!r.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:F,y:P}=I.toAffine();if(!r.isValid(F)||!r.isValid(P))throw new Error("bad point: x or y not field elements");if(!_(F,P))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ie(I,F,P,Q,te){return P=new R(r.mul(P.px,I),P.py,P.pz),F=jr(Q,F),P=jr(te,P),F.add(P)}class R{constructor(F,P,Q){this.px=V("x",F),this.py=V("y",P,!0),this.pz=V("z",Q),Object.freeze(this)}static fromAffine(F){const{x:P,y:Q}=F||{};if(!F||!r.isValid(P)||!r.isValid(Q))throw new Error("invalid affine point");if(F instanceof R)throw new Error("projective point not allowed");return r.is0(P)&&r.is0(Q)?R.ZERO:new R(P,Q,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(F){return $n(R,"pz",F)}static fromBytes(F){return Xe(F),R.fromHex(F)}static fromHex(F){const P=R.fromAffine(m(nt("pointHex",F)));return P.assertValidity(),P}static fromPrivateKey(F){const P=Fa(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return R.BASE.multiply(P(F))}static msm(F,P){return Na(R,n,F,P)}precompute(F=8,P=!0){return L.setWindowSize(this,F),P||this.multiply(mr),this}_setWindowSize(F){this.precompute(F)}assertValidity(){W(this)}hasEvenY(){const{y:F}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(F)}equals(F){Y(F);const{px:P,py:Q,pz:te}=this,{px:d,py:T,pz:M}=F,j=r.eql(r.mul(P,M),r.mul(d,te)),D=r.eql(r.mul(Q,M),r.mul(T,te));return j&&D}negate(){return new R(this.px,r.neg(this.py),this.pz)}double(){const{a:F,b:P}=e,Q=r.mul(P,mr),{px:te,py:d,pz:T}=this;let M=r.ZERO,j=r.ZERO,D=r.ZERO,re=r.mul(te,te),ue=r.mul(d,d),ye=r.mul(T,T),oe=r.mul(te,d);return oe=r.add(oe,oe),D=r.mul(te,T),D=r.add(D,D),M=r.mul(F,D),j=r.mul(Q,ye),j=r.add(M,j),M=r.sub(ue,j),j=r.add(ue,j),j=r.mul(M,j),M=r.mul(oe,M),D=r.mul(Q,D),ye=r.mul(F,ye),oe=r.sub(re,ye),oe=r.mul(F,oe),oe=r.add(oe,D),D=r.add(re,re),re=r.add(D,re),re=r.add(re,ye),re=r.mul(re,oe),j=r.add(j,re),ye=r.mul(d,T),ye=r.add(ye,ye),re=r.mul(ye,oe),M=r.sub(M,re),D=r.mul(ye,ue),D=r.add(D,D),D=r.add(D,D),new R(M,j,D)}add(F){Y(F);const{px:P,py:Q,pz:te}=this,{px:d,py:T,pz:M}=F;let j=r.ZERO,D=r.ZERO,re=r.ZERO;const ue=e.a,ye=r.mul(e.b,mr);let oe=r.mul(P,d),le=r.mul(Q,T),Ne=r.mul(te,M),S=r.add(P,Q),Ae=r.add(d,T);S=r.mul(S,Ae),Ae=r.add(oe,le),S=r.sub(S,Ae),Ae=r.add(P,te);let Ie=r.add(d,M);return Ae=r.mul(Ae,Ie),Ie=r.add(oe,Ne),Ae=r.sub(Ae,Ie),Ie=r.add(Q,te),j=r.add(T,M),Ie=r.mul(Ie,j),j=r.add(le,Ne),Ie=r.sub(Ie,j),re=r.mul(ue,Ae),j=r.mul(ye,Ne),re=r.add(j,re),j=r.sub(le,re),re=r.add(le,re),D=r.mul(j,re),le=r.add(oe,oe),le=r.add(le,oe),Ne=r.mul(ue,Ne),Ae=r.mul(ye,Ae),le=r.add(le,Ne),Ne=r.sub(oe,Ne),Ne=r.mul(ue,Ne),Ae=r.add(Ae,Ne),oe=r.mul(le,Ae),D=r.add(D,oe),oe=r.mul(Ie,Ae),j=r.mul(S,j),j=r.sub(j,oe),oe=r.mul(S,le),re=r.mul(Ie,re),re=r.add(re,oe),new R(j,D,re)}subtract(F){return this.add(F.negate())}is0(){return this.equals(R.ZERO)}multiply(F){const{endo:P}=t;if(!n.isValidNot0(F))throw new Error("invalid scalar: out of range");let Q,te;const d=T=>L.wNAFCached(this,T,R.normalizeZ);if(P){const{k1neg:T,k1:M,k2neg:j,k2:D}=P.splitScalar(F),{p:re,f:ue}=d(M),{p:ye,f:oe}=d(D);te=ue.add(oe),Q=ie(P.beta,re,ye,T,j)}else{const{p:T,f:M}=d(F);Q=T,te=M}return R.normalizeZ([Q,te])[0]}multiplyUnsafe(F){const{endo:P}=t,Q=this;if(!n.isValid(F))throw new Error("invalid scalar: out of range");if(F===zi||Q.is0())return R.ZERO;if(F===st)return Q;if(L.hasPrecomputes(this))return this.multiply(F);if(P){const{k1neg:te,k1:d,k2neg:T,k2:M}=P.splitScalar(F),{p1:j,p2:D}=$u(R,Q,d,M);return ie(P.beta,j,D,te,T)}else return L.wNAFCachedUnsafe(Q,F)}multiplyAndAddUnsafe(F,P,Q){const te=this.multiplyUnsafe(P).add(F.multiplyUnsafe(Q));return te.is0()?void 0:te}toAffine(F){return z(this,F)}isTorsionFree(){const{isTorsionFree:F}=t;return i===st?!0:F?F(R,this):L.wNAFCachedUnsafe(this,c).is0()}clearCofactor(){const{clearCofactor:F}=t;return i===st?this:F?F(R,this):this.multiplyUnsafe(i)}toBytes(F=!0){return Kr("isCompressed",F),this.assertValidity(),A(R,this,F)}toRawBytes(F=!0){return this.toBytes(F)}toHex(F=!0){return vr(this.toBytes(F))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}R.BASE=new R(e.Gx,e.Gy,r.ONE),R.ZERO=new R(r.ZERO,r.ONE,r.ZERO),R.Fp=r,R.Fn=n;const J=n.BITS,L=Sa(R,t.endo?Math.ceil(J/2):J);return R}function Zs(e){const{CURVE:t,curveOpts:r}=Ku(e),n=zu(t,r);return Wu(e,n)}function Yu(e){return Uint8Array.of(e?2:3)}function Ku(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=ur(t.n,e.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function Wu(e,t){const{Fp:r,Fn:n}=t;function i(o){return ga(o,st,n.ORDER)}const c=Ua(r,e.a,e.b),f=Fa(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:i})}function Zu(e,t){const r=e.ORDER;let n=zi;for(let y=r-st;y%$t===zi;y/=$t)n+=st;const i=n,c=$t<<i-st-st,f=c*$t,o=(r-st)/f,w=(o-st)/$t,b=f-st,A=c,m=e.pow(t,o),v=e.pow(t,(o+st)/$t);let _=(y,$)=>{let V=m,Y=e.pow($,b),z=e.sqr(Y);z=e.mul(z,$);let W=e.mul(y,z);W=e.pow(W,w),W=e.mul(W,Y),Y=e.mul(W,$),z=e.mul(W,y);let ie=e.mul(z,Y);W=e.pow(ie,A);let R=e.eql(W,e.ONE);Y=e.mul(z,v),W=e.mul(ie,V),z=e.cmov(Y,z,R),ie=e.cmov(W,ie,R);for(let J=i;J>st;J--){let L=J-$t;L=$t<<L-st;let I=e.pow(ie,L);const F=e.eql(I,e.ONE);Y=e.mul(z,V),V=e.mul(V,V),I=e.mul(ie,V),z=e.cmov(Y,z,F),ie=e.cmov(I,ie,F)}return{isValid:R,value:z}};if(e.ORDER%Yi===mr){const y=(e.ORDER-mr)/Yi,$=e.sqrt(e.neg(t));_=(V,Y)=>{let z=e.sqr(Y);const W=e.mul(V,Y);z=e.mul(z,W);let ie=e.pow(z,y);ie=e.mul(ie,W);const R=e.mul(ie,$),J=e.mul(e.sqr(ie),Y),L=e.eql(J,V);let I=e.cmov(R,ie,L);return{isValid:L,value:I}}}return _}function Oa(e,t){Ea(e);const{A:r,B:n,Z:i}=t;if(!e.isValid(r)||!e.isValid(n)||!e.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const c=Zu(e,i);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let o,w,b,A,m,v,_,y;o=e.sqr(f),o=e.mul(o,i),w=e.sqr(o),w=e.add(w,o),b=e.add(w,e.ONE),b=e.mul(b,n),A=e.cmov(i,e.neg(w),!e.eql(w,e.ZERO)),A=e.mul(A,r),w=e.sqr(b),v=e.sqr(A),m=e.mul(v,r),w=e.add(w,m),w=e.mul(w,b),v=e.mul(v,A),m=e.mul(v,n),w=e.add(w,m),_=e.mul(o,b);const{isValid:$,value:V}=c(w,v);y=e.mul(o,f),y=e.mul(y,V),_=e.cmov(_,b,$),y=e.cmov(y,V,$);const Y=e.isOdd(f)===e.isOdd(y);y=e.cmov(e.neg(y),y,Y);const z=rr(e,[A],!0)[0];return _=e.mul(_,z),{x:_,y}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xu=BigInt(0),un=BigInt(1),Xs=BigInt(2),br=BigInt(3);function Ju(e){const t=[];for(;e>un;e>>=un)(e&un)===Xu?t.unshift(0):(e&br)===br?(t.unshift(-1),e+=un):t.unshift(1);return t}function Qu(e){const{Fp:t,Fr:r,Fp2:n,Fp6:i,Fp12:c}=e.fields,f=e.params.xNegative,o=e.params.twistType,w=Zs(e.G1),b=Object.assign(w,Ws(w.Point,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),A=Zs(e.G2),m=Object.assign(A,Ws(A.Point,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let v;if(o==="multiplicative")v=(ae,ee,ne,x,B,U)=>c.mul014(x,ae,n.mul(ee,B),n.mul(ne,U));else if(o==="divisive")v=(ae,ee,ne,x,B,U)=>c.mul034(x,n.mul(ne,U),n.mul(ee,B),ae);else throw new Error("bls: unknown twist type");const _=n.div(n.ONE,n.mul(n.ONE,Xs));function y(ae,ee,ne,x){const B=n.sqr(ne),U=n.sqr(x),C=n.mulByB(n.mul(U,br)),k=n.mul(C,br),G=n.sub(n.sub(n.sqr(n.add(ne,x)),U),B),h=n.sub(C,B),s=n.mul(n.sqr(ee),br),a=n.neg(G);return ae.push([h,s,a]),ee=n.mul(n.mul(n.mul(n.sub(B,k),ee),ne),_),ne=n.sub(n.sqr(n.mul(n.add(B,k),_)),n.mul(n.sqr(C),br)),x=n.mul(B,G),{Rx:ee,Ry:ne,Rz:x}}function $(ae,ee,ne,x,B,U){const C=n.sub(ne,n.mul(U,x)),k=n.sub(ee,n.mul(B,x)),G=n.sub(n.mul(C,B),n.mul(k,U)),h=n.neg(C),s=k;ae.push([G,h,s]);const a=n.sqr(k),g=n.mul(a,k),E=n.mul(a,ee),O=n.add(n.sub(g,n.mul(E,Xs)),n.mul(n.sqr(C),x));return ee=n.mul(k,O),ne=n.sub(n.mul(n.sub(E,O),C),n.mul(g,ne)),x=n.mul(x,g),{Rx:ee,Ry:ne,Rz:x}}const V=Ju(e.params.ateLoopSize),Y=Zr(ae=>{const ee=ae,{x:ne,y:x}=ee.toAffine(),B=ne,U=x,C=n.neg(x);let k=B,G=U,h=n.ONE;const s=[];for(const a of V){const g=[];({Rx:k,Ry:G,Rz:h}=y(g,k,G,h)),a&&({Rx:k,Ry:G,Rz:h}=$(g,k,G,h,B,a===-1?C:U)),s.push(g)}if(e.postPrecompute){const a=s[s.length-1];e.postPrecompute(k,G,h,B,U,$.bind(null,a))}return s});function z(ae,ee=!1){let ne=c.ONE;if(ae.length){const x=ae[0][0].length;for(let B=0;B<x;B++){ne=c.sqr(ne);for(const[U,C,k]of ae)for(const[G,h,s]of U[B])ne=v(G,h,s,ne,C,k)}}return f&&(ne=c.conjugate(ne)),ee?c.finalExponentiate(ne):ne}function W(ae,ee=!0){const ne=[];$n(b.Point,"pz",ae.map(({g1:x})=>x)),$n(m.Point,"pz",ae.map(({g2:x})=>x));for(const{g1:x,g2:B}of ae){if(x.is0()||B.is0())throw new Error("pairing is not available for ZERO point");x.assertValidity(),B.assertValidity();const U=x.toAffine();ne.push([Y(B),U.x,U.y])}return z(ne,ee)}function ie(ae,ee,ne=!0){return W([{g1:ae,g2:ee}],ne)}const R=e.randomBytes||bo,J={randomPrivateKey:()=>{const ae=Aa(r.ORDER);return ku(R(ae),r.ORDER)},calcPairingPrecomputes:Y};function L(ae){if(!Array.isArray(ae)||ae.length===0)throw new Error("expected non-empty array")}function I(ae){return ae instanceof b.Point?ae:b.Point.fromHex(ae)}function F(ae){return ae instanceof m.Point?ae:T.fromHex(ae)}function P(ae,ee){function ne(C){return C instanceof ae.Point?C:ae.Point.fromHex(C)}function x(C){return C instanceof ee.Point?C:ee.Point.fromHex(C)}function B(C){if(!(C instanceof ee.Point))throw new Error(`expected valid message hashed to ${U?"G2":"G1"} curve`);return C}const U=ee.Point.Fp.BYTES>ae.Point.Fp.BYTES;return{getPublicKey(C){return ae.Point.fromPrivateKey(C)},sign(C,k,G){if(G!=null)throw new Error("sign() expects 2 arguments");return B(C).assertValidity(),C.multiply(ae.normPrivateKeyToScalar(k))},verify(C,k,G,h){if(h!=null)throw new Error("verify() expects 3 arguments");C=x(C),G=ne(G);const s=G.negate(),a=ae.Point.BASE,g=B(k),E=C,K=W(U?[{g1:s,g2:g},{g1:a,g2:E}]:[{g1:g,g2:s},{g1:E,g2:a}]);return c.eql(K,c.ONE)},aggregatePublicKeys(C){L(C),C=C.map(G=>ne(G));const k=C.reduce((G,h)=>G.add(h),ae.Point.ZERO);return k.assertValidity(),k},aggregateSignatures(C){L(C),C=C.map(G=>x(G));const k=C.reduce((G,h)=>G.add(h),ee.Point.ZERO);return k.assertValidity(),k},hash(C,k){Xe(C);const G=k?{DST:k}:void 0;return ee.hashToCurve(C,G)},Signature:U?e.G2.Signature:e.G1.ShortSignature}}const Q=P(b,m),te=P(m,b),{ShortSignature:d}=e.G1,{Signature:T}=e.G2;function M(ae,ee){return ae instanceof b.Point?ae:te.hash(nt("point",ae),ee==null?void 0:ee.DST)}function j(ae,ee){return ae instanceof m.Point?ae:Q.hash(nt("point",ae),ee==null?void 0:ee.DST)}function D(ae){return Q.getPublicKey(ae).toBytes(!0)}function re(ae){return te.getPublicKey(ae).toBytes(!0)}function ue(ae,ee,ne){const x=j(ae,ne),B=Q.sign(x,ee);return ae instanceof m.Point?B:T.toBytes(B)}function ye(ae,ee,ne){const x=M(ae,ne),B=te.sign(x,ee);return ae instanceof b.Point?B:d.toBytes(B)}function oe(ae,ee,ne,x){const B=j(ee,x);return Q.verify(ae,B,ne)}function le(ae,ee,ne,x){const B=M(ee,x);return te.verify(ae,B,ne)}function Ne(ae){const ee=Q.aggregatePublicKeys(ae);return ae[0]instanceof b.Point?ee:ee.toBytes(!0)}function S(ae){const ee=Q.aggregateSignatures(ae);return ae[0]instanceof m.Point?ee:T.toBytes(ee)}function Ae(ae){const ee=te.aggregateSignatures(ae);return ae[0]instanceof b.Point?ee:d.toBytes(ee)}function Ie(ae,ee,ne,x){if(L(ee),ne.length!==ee.length)throw new Error("amount of public keys and messages should be equal");const B=F(ae),U=ee.map(h=>j(h,x)),C=ne.map(I),k=new Map;for(let h=0;h<C.length;h++){const s=C[h],a=U[h];let g=k.get(a);g===void 0&&(g=[],k.set(a,g)),g.push(s)}const G=[];try{for(const[h,s]of k){const a=s.reduce((g,E)=>g.add(E));G.push({g1:a,g2:h})}return G.push({g1:b.Point.BASE.negate(),g2:B}),c.eql(W(G),c.ONE)}catch{return!1}}return b.Point.BASE.precompute(4),{longSignatures:Q,shortSignatures:te,millerLoopBatch:z,pairing:ie,pairingBatch:W,verifyBatch:Ie,curves:{G1:w.Point,G2:A.Point},fields:{Fr:r,Fp:t,Fp2:n,Fp6:i,Fp12:c},params:{ateLoopSize:e.params.ateLoopSize,twistType:e.params.twistType,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:J,getPublicKey:D,getPublicKeyForShortSignatures:re,sign:ue,signShortSignature:ye,verify:oe,verifyShortSignature:le,aggregatePublicKeys:Ne,aggregateSignatures:S,aggregateShortSignatures:Ae,G1:b,G2:m,Signature:T,ShortSignature:d}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Js=BigInt(0),_r=BigInt(1),It=BigInt(2),Qs=BigInt(3);function Ri(e,t,r,n,i=1,c){const f=BigInt(c===void 0?n:c),o=r**BigInt(n),w=[];for(let b=0;b<i;b++){const A=BigInt(b+1),m=[];for(let v=0,_=_r;v<n;v++){const y=(A*_-A)/f%o;m.push(e.pow(t,y)),_*=r}w.push(m)}return w}function Lu(e,t,r){const n=t.pow(r,(e.ORDER-_r)/Qs),i=t.pow(r,(e.ORDER-_r)/It);function c(v,_){const y=t.mul(t.frobeniusMap(v,1),n),$=t.mul(t.frobeniusMap(_,1),i);return[y,$]}const f=t.pow(r,(e.ORDER**It-_r)/Qs),o=t.pow(r,(e.ORDER**It-_r)/It);if(!t.eql(o,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function w(v,_){return[t.mul(v,f),t.neg(_)]}const b=v=>(_,y)=>{const $=y.toAffine(),V=v($.x,$.y);return _.fromAffine({x:V[0],y:V[1]})},A=b(c),m=b(w);return{psi:c,psi2:w,G2psi:A,G2psi2:m,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:o}}function Du(e){const{ORDER:t}=e,r=ur(t),n=r.create(e.NONRESIDUE||BigInt(-1)),i=r.div(r.ONE,It),c=Ri(r,n,r.ORDER,2)[0],f=({c0:d,c1:T},{c0:M,c1:j})=>({c0:r.add(d,M),c1:r.add(T,j)}),o=({c0:d,c1:T},{c0:M,c1:j})=>({c0:r.sub(d,M),c1:r.sub(T,j)}),w=({c0:d,c1:T},M)=>{if(typeof M=="bigint")return{c0:r.mul(d,M),c1:r.mul(T,M)};const{c0:j,c1:D}=M;let re=r.mul(d,j),ue=r.mul(T,D);const ye=r.sub(re,ue),oe=r.sub(r.mul(r.add(d,T),r.add(j,D)),r.add(re,ue));return{c0:ye,c1:oe}},b=({c0:d,c1:T})=>{const M=r.add(d,T),j=r.sub(d,T),D=r.add(d,d);return{c0:r.mul(M,j),c1:r.mul(D,T)}},A=d=>{if(d.length!==2)throw new Error("invalid tuple");const T=d.map(M=>r.create(M));return{c0:T[0],c1:T[1]}};function m(d,T){return typeof d=="bigint"&&Js<=d&&d<T}const v=t*t,_=A(e.FP2_NONRESIDUE),y={ORDER:v,isLE:r.isLE,NONRESIDUE:_,BITS:Hr(v),BYTES:Math.ceil(Hr(v)/8),MASK:Er(Hr(v)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:d=>d,isValid:({c0:d,c1:T})=>m(d,v)&&m(T,v),is0:({c0:d,c1:T})=>r.is0(d)&&r.is0(T),isValidNot0:d=>!y.is0(d)&&y.isValid(d),eql:({c0:d,c1:T},{c0:M,c1:j})=>r.eql(d,M)&&r.eql(T,j),neg:({c0:d,c1:T})=>({c0:r.neg(d),c1:r.neg(T)}),pow:(d,T)=>gn(y,d,T),invertBatch:d=>rr(y,d),add:f,sub:o,mul:w,sqr:b,addN:f,subN:o,mulN:w,sqrN:b,div:(d,T)=>y.mul(d,typeof T=="bigint"?r.inv(r.create(T)):y.inv(T)),inv:({c0:d,c1:T})=>{const M=r.inv(r.create(d*d+T*T));return{c0:r.mul(M,r.create(d)),c1:r.mul(M,r.create(-T))}},sqrt:d=>{if(e.Fp2sqrt)return e.Fp2sqrt(d);const{c0:T,c1:M}=d;if(r.is0(M))return qn(r,T)===1?y.create({c0:r.sqrt(T),c1:r.ZERO}):y.create({c0:r.ZERO,c1:r.sqrt(r.div(T,n))});const j=r.sqrt(r.sub(r.sqr(T),r.mul(r.sqr(M),n)));let D=r.mul(r.add(j,T),i);qn(r,D)===-1&&(D=r.sub(D,j));const ue=r.sqrt(D),ye=y.create({c0:ue,c1:r.div(r.mul(M,i),ue)});if(!y.eql(y.sqr(ye),d))throw new Error("Cannot find square root");const oe=ye,le=y.neg(oe),{re:Ne,im:S}=y.reim(oe),{re:Ae,im:Ie}=y.reim(le);return S>Ie||S===Ie&&Ne>Ae?oe:le},isOdd:d=>{const{re:T,im:M}=y.reim(d),j=T%It,D=T===Js,re=M%It;return BigInt(j||D&&re)==_r},fromBytes(d){if(d.length!==y.BYTES)throw new Error("fromBytes invalid length="+d.length);return{c0:r.fromBytes(d.subarray(0,r.BYTES)),c1:r.fromBytes(d.subarray(r.BYTES))}},toBytes:({c0:d,c1:T})=>ke(r.toBytes(d),r.toBytes(T)),cmov:({c0:d,c1:T},{c0:M,c1:j},D)=>({c0:r.cmov(d,M,D),c1:r.cmov(T,j,D)}),reim:({c0:d,c1:T})=>({re:d,im:T}),mulByNonresidue:({c0:d,c1:T})=>y.mul({c0:d,c1:T},_),mulByB:e.Fp2mulByB,fromBigTuple:A,frobeniusMap:({c0:d,c1:T},M)=>({c0:d,c1:r.mul(T,c[M%2])})},$=({c0:d,c1:T,c2:M},{c0:j,c1:D,c2:re})=>({c0:y.add(d,j),c1:y.add(T,D),c2:y.add(M,re)}),V=({c0:d,c1:T,c2:M},{c0:j,c1:D,c2:re})=>({c0:y.sub(d,j),c1:y.sub(T,D),c2:y.sub(M,re)}),Y=({c0:d,c1:T,c2:M},j)=>{if(typeof j=="bigint")return{c0:y.mul(d,j),c1:y.mul(T,j),c2:y.mul(M,j)};const{c0:D,c1:re,c2:ue}=j,ye=y.mul(d,D),oe=y.mul(T,re),le=y.mul(M,ue);return{c0:y.add(ye,y.mulByNonresidue(y.sub(y.mul(y.add(T,M),y.add(re,ue)),y.add(oe,le)))),c1:y.add(y.sub(y.mul(y.add(d,T),y.add(D,re)),y.add(ye,oe)),y.mulByNonresidue(le)),c2:y.sub(y.add(oe,y.mul(y.add(d,M),y.add(D,ue))),y.add(ye,le))}},z=({c0:d,c1:T,c2:M})=>{let j=y.sqr(d),D=y.mul(y.mul(d,T),It),re=y.mul(y.mul(T,M),It),ue=y.sqr(M);return{c0:y.add(y.mulByNonresidue(re),j),c1:y.add(y.mulByNonresidue(ue),D),c2:y.sub(y.sub(y.add(y.add(D,y.sqr(y.add(y.sub(d,T),M))),re),j),ue)}},[W,ie]=Ri(y,_,r.ORDER,6,2,3),R={ORDER:y.ORDER,isLE:y.isLE,BITS:3*y.BITS,BYTES:3*y.BYTES,MASK:Er(3*y.BITS),ZERO:{c0:y.ZERO,c1:y.ZERO,c2:y.ZERO},ONE:{c0:y.ONE,c1:y.ZERO,c2:y.ZERO},create:d=>d,isValid:({c0:d,c1:T,c2:M})=>y.isValid(d)&&y.isValid(T)&&y.isValid(M),is0:({c0:d,c1:T,c2:M})=>y.is0(d)&&y.is0(T)&&y.is0(M),isValidNot0:d=>!R.is0(d)&&R.isValid(d),neg:({c0:d,c1:T,c2:M})=>({c0:y.neg(d),c1:y.neg(T),c2:y.neg(M)}),eql:({c0:d,c1:T,c2:M},{c0:j,c1:D,c2:re})=>y.eql(d,j)&&y.eql(T,D)&&y.eql(M,re),sqrt:Vs,div:(d,T)=>R.mul(d,typeof T=="bigint"?r.inv(r.create(T)):R.inv(T)),pow:(d,T)=>gn(R,d,T),invertBatch:d=>rr(R,d),add:$,sub:V,mul:Y,sqr:z,addN:$,subN:V,mulN:Y,sqrN:z,inv:({c0:d,c1:T,c2:M})=>{let j=y.sub(y.sqr(d),y.mulByNonresidue(y.mul(M,T))),D=y.sub(y.mulByNonresidue(y.sqr(M)),y.mul(d,T)),re=y.sub(y.sqr(T),y.mul(d,M)),ue=y.inv(y.add(y.mulByNonresidue(y.add(y.mul(M,D),y.mul(T,re))),y.mul(d,j)));return{c0:y.mul(ue,j),c1:y.mul(ue,D),c2:y.mul(ue,re)}},fromBytes:d=>{if(d.length!==R.BYTES)throw new Error("fromBytes invalid length="+d.length);return{c0:y.fromBytes(d.subarray(0,y.BYTES)),c1:y.fromBytes(d.subarray(y.BYTES,2*y.BYTES)),c2:y.fromBytes(d.subarray(2*y.BYTES))}},toBytes:({c0:d,c1:T,c2:M})=>ke(y.toBytes(d),y.toBytes(T),y.toBytes(M)),cmov:({c0:d,c1:T,c2:M},{c0:j,c1:D,c2:re},ue)=>({c0:y.cmov(d,j,ue),c1:y.cmov(T,D,ue),c2:y.cmov(M,re,ue)}),fromBigSix:d=>{if(!Array.isArray(d)||d.length!==6)throw new Error("invalid Fp6 usage");return{c0:y.fromBigTuple(d.slice(0,2)),c1:y.fromBigTuple(d.slice(2,4)),c2:y.fromBigTuple(d.slice(4,6))}},frobeniusMap:({c0:d,c1:T,c2:M},j)=>({c0:y.frobeniusMap(d,j),c1:y.mul(y.frobeniusMap(T,j),W[j%6]),c2:y.mul(y.frobeniusMap(M,j),ie[j%6])}),mulByFp2:({c0:d,c1:T,c2:M},j)=>({c0:y.mul(d,j),c1:y.mul(T,j),c2:y.mul(M,j)}),mulByNonresidue:({c0:d,c1:T,c2:M})=>({c0:y.mulByNonresidue(M),c1:d,c2:T}),mul1:({c0:d,c1:T,c2:M},j)=>({c0:y.mulByNonresidue(y.mul(M,j)),c1:y.mul(d,j),c2:y.mul(T,j)}),mul01({c0:d,c1:T,c2:M},j,D){let re=y.mul(d,j),ue=y.mul(T,D);return{c0:y.add(y.mulByNonresidue(y.sub(y.mul(y.add(T,M),D),ue)),re),c1:y.sub(y.sub(y.mul(y.add(j,D),y.add(d,T)),re),ue),c2:y.add(y.sub(y.mul(y.add(d,M),j),re),ue)}}},J=Ri(y,_,r.ORDER,12,1,6)[0],L=({c0:d,c1:T},{c0:M,c1:j})=>({c0:R.add(d,M),c1:R.add(T,j)}),I=({c0:d,c1:T},{c0:M,c1:j})=>({c0:R.sub(d,M),c1:R.sub(T,j)}),F=({c0:d,c1:T},M)=>{if(typeof M=="bigint")return{c0:R.mul(d,M),c1:R.mul(T,M)};let{c0:j,c1:D}=M,re=R.mul(d,j),ue=R.mul(T,D);return{c0:R.add(re,R.mulByNonresidue(ue)),c1:R.sub(R.mul(R.add(d,T),R.add(j,D)),R.add(re,ue))}},P=({c0:d,c1:T})=>{let M=R.mul(d,T);return{c0:R.sub(R.sub(R.mul(R.add(R.mulByNonresidue(T),d),R.add(d,T)),M),R.mulByNonresidue(M)),c1:R.add(M,M)}};function Q(d,T){const M=y.sqr(d),j=y.sqr(T);return{first:y.add(y.mulByNonresidue(j),M),second:y.sub(y.sub(y.sqr(y.add(d,T)),M),j)}}const te={ORDER:y.ORDER,isLE:R.isLE,BITS:2*R.BITS,BYTES:2*R.BYTES,MASK:Er(2*R.BITS),ZERO:{c0:R.ZERO,c1:R.ZERO},ONE:{c0:R.ONE,c1:R.ZERO},create:d=>d,isValid:({c0:d,c1:T})=>R.isValid(d)&&R.isValid(T),is0:({c0:d,c1:T})=>R.is0(d)&&R.is0(T),isValidNot0:d=>!te.is0(d)&&te.isValid(d),neg:({c0:d,c1:T})=>({c0:R.neg(d),c1:R.neg(T)}),eql:({c0:d,c1:T},{c0:M,c1:j})=>R.eql(d,M)&&R.eql(T,j),sqrt:Vs,inv:({c0:d,c1:T})=>{let M=R.inv(R.sub(R.sqr(d),R.mulByNonresidue(R.sqr(T))));return{c0:R.mul(d,M),c1:R.neg(R.mul(T,M))}},div:(d,T)=>te.mul(d,typeof T=="bigint"?r.inv(r.create(T)):te.inv(T)),pow:(d,T)=>gn(te,d,T),invertBatch:d=>rr(te,d),add:L,sub:I,mul:F,sqr:P,addN:L,subN:I,mulN:F,sqrN:P,fromBytes:d=>{if(d.length!==te.BYTES)throw new Error("fromBytes invalid length="+d.length);return{c0:R.fromBytes(d.subarray(0,R.BYTES)),c1:R.fromBytes(d.subarray(R.BYTES))}},toBytes:({c0:d,c1:T})=>ke(R.toBytes(d),R.toBytes(T)),cmov:({c0:d,c1:T},{c0:M,c1:j},D)=>({c0:R.cmov(d,M,D),c1:R.cmov(T,j,D)}),fromBigTwelve:d=>({c0:R.fromBigSix(d.slice(0,6)),c1:R.fromBigSix(d.slice(6,12))}),frobeniusMap(d,T){const{c0:M,c1:j,c2:D}=R.frobeniusMap(d.c1,T),re=J[T%12];return{c0:R.frobeniusMap(d.c0,T),c1:R.create({c0:y.mul(M,re),c1:y.mul(j,re),c2:y.mul(D,re)})}},mulByFp2:({c0:d,c1:T},M)=>({c0:R.mulByFp2(d,M),c1:R.mulByFp2(T,M)}),conjugate:({c0:d,c1:T})=>({c0:d,c1:R.neg(T)}),mul014:({c0:d,c1:T},M,j,D)=>{let re=R.mul01(d,M,j),ue=R.mul1(T,D);return{c0:R.add(R.mulByNonresidue(ue),re),c1:R.sub(R.sub(R.mul01(R.add(T,d),M,y.add(j,D)),re),ue)}},mul034:({c0:d,c1:T},M,j,D)=>{const re=R.create({c0:y.mul(d.c0,M),c1:y.mul(d.c1,M),c2:y.mul(d.c2,M)}),ue=R.mul01(T,j,D),ye=R.mul01(R.add(d,T),y.add(M,j),D);return{c0:R.add(R.mulByNonresidue(ue),re),c1:R.sub(ye,R.add(re,ue))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:r,Fp2:y,Fp6:R,Fp12:te,Fp4Square:Q}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const et=BigInt(0),Gn=BigInt(1),Ye=BigInt(2),Ln=BigInt(3),Jr=BigInt(4),Ht=BigInt("0xd201000000010000"),ef=Hr(Ht),cr={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:et,b:Jr,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},tf=ur(cr.n),{Fp:pe,Fp2:de,Fp6:Ki,Fp4Square:Ui,Fp12:Be}=Du({ORDER:cr.p,FP2_NONRESIDUE:[Gn,Gn],Fp2mulByB:({c0:e,c1:t})=>{const r=pe.mul(e,Jr),n=pe.mul(t,Jr);return{c0:pe.sub(r,n),c1:pe.add(r,n)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:r,c1:n,c2:i}=e,{c0:c,c1:f,c2:o}=t,{first:w,second:b}=Ui(r,f),{first:A,second:m}=Ui(c,i),{first:v,second:_}=Ui(n,o),y=de.mulByNonresidue(_);return{c0:Ki.create({c0:de.add(de.mul(de.sub(w,r),Ye),w),c1:de.add(de.mul(de.sub(A,n),Ye),A),c2:de.add(de.mul(de.sub(v,i),Ye),v)}),c1:Ki.create({c0:de.add(de.mul(de.add(y,c),Ye),y),c1:de.add(de.mul(de.add(b,f),Ye),b),c2:de.add(de.mul(de.add(m,o),Ye),m)})}},Fp12cyclotomicExp(e,t){let r=Be.ONE;for(let n=ef-1;n>=0;n--)r=Be._cyclotomicSquare(r),Su(t,n)&&(r=Be.mul(r,e));return r},Fp12finalExponentiate:e=>{const t=Ht,r=Be.div(Be.frobeniusMap(e,6),e),n=Be.mul(Be.frobeniusMap(r,2),r),i=Be.conjugate(Be._cyclotomicExp(n,t)),c=Be.mul(Be.conjugate(Be._cyclotomicSquare(n)),i),f=Be.conjugate(Be._cyclotomicExp(c,t)),o=Be.conjugate(Be._cyclotomicExp(f,t)),w=Be.mul(Be.conjugate(Be._cyclotomicExp(o,t)),Be._cyclotomicSquare(i)),b=Be.conjugate(Be._cyclotomicExp(w,t)),A=Be.frobeniusMap(Be.mul(i,o),2),m=Be.frobeniusMap(Be.mul(f,n),3),v=Be.frobeniusMap(Be.mul(w,Be.conjugate(n)),1),_=Be.mul(Be.mul(b,Be.conjugate(c)),n);return Be.mul(Be.mul(Be.mul(A,m),v),_)}}),{G2psi:Ls,G2psi2:rf}=Lu(pe,de,de.div(de.ONE,de.NONRESIDUE)),Fi=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:pe.ORDER,m:2,k:128,expand:"xmd",hash:rs}),cs={p:de.ORDER,n:cr.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:de.ZERO,b:de.fromBigTuple([Jr,Jr]),Gx:de.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:de.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Dn=Dr(pe.toBytes(et),{infinity:!0,compressed:!0});function ei(e){e=e.slice();const t=e[0]&224,r=!!(t>>7&1),n=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:r,infinity:n,sort:i,value:e}}function Dr(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function nf(e,t,r){const{BYTES:n,ORDER:i}=pe,c=t.is0(),{x:f,y:o}=t.toAffine();if(r){if(c)return Dn.slice();const w=!!(o*Ye/i);return Dr(We(f,n),{compressed:!0,sort:w})}else return c?ke(Uint8Array.of(64),new Uint8Array(2*n-1)):ke(We(f,n),We(o,n))}function Oi(e){e.assertValidity();const{BYTES:t,ORDER:r}=pe,{x:n,y:i}=e.toAffine();if(e.is0())return Dn.slice();const c=!!(i*Ye/r);return Dr(We(n,t),{compressed:!0,sort:c})}function sf(e){const{compressed:t,infinity:r,sort:n,value:i}=ei(e),{BYTES:c,ORDER:f}=pe;if(i.length===48&&t){const o=Bt(i),w=pe.create(o&pe.MASK);if(r){if(w!==et)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:et,y:et}}const b=pe.add(pe.pow(w,Ln),pe.create(cr.b));let A=pe.sqrt(b);if(!A)throw new Error("invalid G1 point: compressed point");return A*Ye/f!==BigInt(n)&&(A=pe.neg(A)),{x:pe.create(w),y:pe.create(A)}}else if(i.length===96&&!t){const o=Bt(i.subarray(0,c)),w=Bt(i.subarray(c));if(r){if(o!==et||w!==et)throw new Error("G1: non-empty point at infinity");return ti.G1.Point.ZERO.toAffine()}return{x:pe.create(o),y:pe.create(w)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function Ds(e){const{infinity:t,sort:r,value:n}=ei(nt("signatureHex",e,48)),i=pe.ORDER,c=ti.G1.Point,f=Bt(n);if(t)return c.ZERO;const o=pe.create(f&pe.MASK),w=pe.add(pe.pow(o,Ln),pe.create(cr.b));let b=pe.sqrt(w);if(!b)throw new Error("invalid G1 point: compressed");const A=BigInt(r);b*Ye/i!==A&&(b=pe.neg(b));const m=c.fromAffine({x:o,y:b});return m.assertValidity(),m}function of(e,t,r){const{BYTES:n,ORDER:i}=pe,c=t.is0(),{x:f,y:o}=t.toAffine();if(r){if(c)return ke(Dn,We(et,n));const w=!!(o.c1===et?o.c0*Ye/i:o.c1*Ye/i);return ke(Dr(We(f.c1,n),{compressed:!0,sort:w}),We(f.c0,n))}else{if(c)return ke(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:w,im:b}=de.reim(f),{re:A,im:m}=de.reim(o);return ke(We(b,n),We(w,n),We(m,n),We(A,n))}}function Pi(e){e.assertValidity();const{BYTES:t}=pe;if(e.is0())return ke(Dn,We(et,t));const{x:r,y:n}=e.toAffine(),{re:i,im:c}=de.reim(r),{re:f,im:o}=de.reim(n),b=!!((o>et?o*Ye:f*Ye)/pe.ORDER&Gn),A=i;return ke(Dr(We(c,t),{sort:b,compressed:!0}),We(A,t))}function af(e){const{BYTES:t,ORDER:r}=pe,{compressed:n,infinity:i,sort:c,value:f}=ei(e);if(!n&&!i&&c||!n&&i&&c||c&&i&&n)throw new Error("invalid encoding flag: "+(e[0]&224));const o=(w,b,A)=>Bt(w.slice(b,A));if(f.length===96&&n){if(i){if(f.reduce((y,$)=>y!==0?$+1:$,0)>0)throw new Error("invalid G2 point: compressed");return{x:de.ZERO,y:de.ZERO}}const w=o(f,0,t),b=o(f,t,2*t),A=de.create({c0:pe.create(b),c1:pe.create(w)}),m=de.add(de.pow(A,Ln),cs.b);let v=de.sqrt(m);const _=v.c1===et?v.c0*Ye/r:v.c1*Ye/r?Gn:et;return v=c&&_>0?v:de.neg(v),{x:A,y:v}}else if(f.length===192&&!n){if(i){if(f.reduce((v,_)=>v!==0?_+1:_,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:de.ZERO,y:de.ZERO}}const w=o(f,0*t,1*t),b=o(f,1*t,2*t),A=o(f,2*t,3*t),m=o(f,3*t,4*t);return{x:de.fromBigTuple([b,w]),y:de.fromBigTuple([m,A])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function eo(e){const{ORDER:t}=pe,{infinity:r,sort:n,value:i}=ei(nt("signatureHex",e)),c=ti.G2.Point,f=i.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const o=Bt(i.slice(0,f)),w=Bt(i.slice(f));if(r)return c.ZERO;const b=pe.create(o&pe.MASK),A=pe.create(w),m=de.create({c0:A,c1:b}),v=de.add(de.pow(m,Ln),cs.b);let _=de.sqrt(v);if(!_)throw new Error("Failed to find a square root");const{re:y,im:$}=de.reim(_),V=BigInt(n),Y=$>et&&$*Ye/t!==V,z=$===et&&y*Ye/t!==V;(Y||z)&&(_=de.neg(_));const W=c.fromAffine({x:m,y:_});return W.assertValidity(),W}const ti=Qu({fields:{Fp:pe,Fp2:de,Fp6:Ki,Fp12:Be,Fr:tf},G1:{...cr,Fp:pe,htfDefaults:{...Fi,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new e(pe.mul(t.px,r),t.py,t.pz);return t.multiplyUnsafe(Ht).negate().multiplyUnsafe(Ht).equals(n)},clearCofactor:(e,t)=>t.multiplyUnsafe(Ht).add(t),mapToCurve:hf,fromBytes:sf,toBytes:nf,ShortSignature:{fromBytes(e){return Xe(e),Ds(e)},fromHex(e){return Ds(e)},toBytes(e){return Oi(e)},toRawBytes(e){return Oi(e)},toHex(e){return vr(Oi(e))}}},G2:{...cs,Fp:de,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Fi},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:df,isTorsionFree:(e,t)=>t.multiplyUnsafe(Ht).negate().equals(Ls(e,t)),clearCofactor:(e,t)=>{const r=Ht;let n=t.multiplyUnsafe(r).negate(),i=Ls(e,t),c=t.double();return c=rf(e,c),c=c.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),c=c.add(i),c=c.subtract(n),c.subtract(t)},fromBytes:af,toBytes:of,Signature:{fromBytes(e){return Xe(e),eo(e)},fromHex(e){return eo(e)},toBytes(e){return Pi(e)},toRawBytes(e){return Pi(e)},toHex(e){return vr(Pi(e))}}},params:{ateLoopSize:Ht,r:cr.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:Fi,hash:rs}),cf=Ra(de,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>de.fromBigTuple(t.map(BigInt))))),uf=Ra(pe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),ff=Oa(pe,{A:pe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:pe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:pe.create(BigInt(11))}),lf=Oa(de,{A:de.create({c0:pe.create(et),c1:pe.create(BigInt(240))}),B:de.create({c0:pe.create(BigInt(1012)),c1:pe.create(BigInt(1012))}),Z:de.create({c0:pe.create(BigInt(-2)),c1:pe.create(BigInt(-1))})});function hf(e){const{x:t,y:r}=ff(pe.create(e[0]));return uf(t,r)}function df(e){const{x:t,y:r}=lf(de.fromBigTuple(e));return cf(t,r)}function pf(e,t,r){const n=typeof e=="string"?e:ze(e),i=typeof t=="string"?t:ze(t),c=typeof r=="string"?r:ze(r);return ti.verifyShortSignature(i,c,n)}const Pa=e=>je(new Ir(e)),us=e=>{const t=Pa(e);return new Date(Number(t)/1e6)};var yf=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},wf=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},mn;class xt extends Pe{constructor(t){super(`Invalid certificate: ${t}`)}}var at;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(at||(at={}));function gf(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class nr{constructor(t,r,n,i,c=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=c,mn.set(this,!1),yf(this,mn,f,"f"),this.cert=Ut(new Uint8Array(t))}static async create(t){const r=nr.createUnverified(t);return await r.verify(),r}static createUnverified(t){let r=t.blsVerify;return r||(r=pf),new nr(t.certificate,t.rootKey,t.canisterId,r,t.maxAgeInMinutes,t.disableTimeVerification)}lookup(t){return Nr(t,this.cert.tree)}lookup_label(t){return this.lookup([t])}async verify(){const t=await bn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=bf(r),c=pt(qr("ic-state-root"),t);let f=!1;const o=ut(this.lookup(["time"]));if(!o)throw new xt("Certificate does not contain a time");if(!wf(this,mn,"f")){const b=this._maxAgeInMinutes*60*1e3,A=Date.now(),m=A-b,v=A+3e5,_=us(o);if(_.getTime()<m)throw new xt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+_.toISOString()+" Current time: "+new Date(A).toISOString());if(_.getTime()>v)throw new xt("Certificate is signed more than 5 minutes in the future. Certificate time: "+_.toISOString()+" Current time: "+new Date(A).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(c))}catch{f=!1}if(!f)throw new xt("Signature verification failed")}async _checkDelegationAndGetKey(t){if(!t)return this._rootKey;const r=await nr.createUnverified({certificate:t.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new xt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Zf&&!Ma({canisterId:this._canisterId,subnetId:xe.fromUint8Array(new Uint8Array(t.subnet_id)),tree:r.cert.tree}))throw new xt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${ze(t.subnet_id)}`);const n=ut(r.lookup(["subnet",t.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${ze(t.subnet_id)}`);return n}}mn=new WeakMap;const Pr=On("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),mf=96;function bf(e){const t=Pr.byteLength+mf;if(e.byteLength!==t)throw new TypeError(`BLS DER-encoded public key must be ${t} bytes long`);const r=e.slice(0,Pr.byteLength);if(!Hn(r,Pr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Pr}, but get ${r}`);return e.slice(Pr.byteLength)}function ut(e){if(e.status===Ge.Found){if(e.value instanceof ArrayBuffer)return e.value;if(e.value instanceof Uint8Array)return e.value.buffer}}async function bn(e){switch(e[0]){case at.Empty:return dt(qr("ic-hashtree-empty"));case at.Pruned:return e[1];case at.Leaf:return dt(pt(qr("ic-hashtree-leaf"),e[1]));case at.Labeled:return dt(pt(qr("ic-hashtree-labeled"),e[1],await bn(e[2])));case at.Fork:return dt(pt(qr("ic-hashtree-fork"),await bn(e[1]),await bn(e[2])));default:throw new Error("unreachable")}}function qr(e){const t=new Uint8Array([e.length]),r=new TextEncoder().encode(e);return pt(t,r)}var Ge;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(Ge||(Ge={}));var Rt;(function(e){e.Less="less",e.Greater="greater"})(Rt||(Rt={}));function Nr(e,t){if(e.length===0)switch(t[0]){case at.Leaf:{if(!t[1])throw new Error("Invalid tree structure for leaf");return t[1]instanceof ArrayBuffer?{status:Ge.Found,value:t[1]}:t[1]instanceof Uint8Array?{status:Ge.Found,value:t[1].buffer}:{status:Ge.Found,value:t[1]}}default:return{status:Ge.Found,value:t}}const r=typeof e[0]=="string"?new TextEncoder().encode(e[0]):e[0],n=_n(r,t);switch(n.status){case Ge.Found:return Nr(e.slice(1),n.value);case Rt.Greater:case Rt.Less:return{status:Ge.Absent};default:return n}}function Wi(e){switch(e[0]){case at.Empty:return[];case at.Fork:return Wi(e[1]).concat(Wi(e[2]));default:return[e]}}function _n(e,t){switch(t[0]){case at.Labeled:return gf(e,t[1])?{status:Rt.Greater}:Hn(e,t[1])?{status:Ge.Found,value:t[2]}:{status:Rt.Less};case at.Fork:const r=_n(e,t[1]);switch(r.status){case Rt.Greater:{const n=_n(e,t[2]);return n.status===Rt.Less?{status:Ge.Absent}:n}case Ge.Unknown:{let n=_n(e,t[2]);return n.status===Rt.Less?{status:Ge.Unknown}:n}default:return r}case at.Pruned:return{status:Ge.Unknown};default:return{status:Ge.Absent}}}function Ma(e){const{canisterId:t,subnetId:r,tree:n}=e,i=Nr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==Ge.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Ut(i.value).map(w=>[xe.fromUint8Array(w[0]),xe.fromUint8Array(w[1])]).some(w=>w[0].ltEq(t)&&w[1].gtEq(t))}class _f{constructor(t,r,n){this.key=t,this.path=r,this.decodeStrategy=n}}const ka=async e=>{const{agent:t,paths:r}=e,n=xe.from(e.canisterId),i=[...new Set(r)],c=i.map(w=>Zi(w,n)),f=new Map,o=i.map((w,b)=>(async()=>{var A;try{const m=await t.readState(n,{paths:[c[b]]});if(t.rootKey==null)throw new Error("Agent is missing root key");const v=await nr.create({certificate:m.certificate,rootKey:t.rootKey,canisterId:n,disableTimeVerification:!0}),_=(V,Y)=>{if(Y==="subnet"){if(t.rootKey==null)throw new Error("Agent is missing root key");const z=Ca(m.certificate,n,t.rootKey);return{path:Y,data:z}}else return{path:Y,data:ut(V.lookup(Zi(Y,n)))}},{path:y,data:$}=_(v,i[b]);if(!$)console.warn(`Expected to find result for path ${y}, but instead found nothing.`),typeof y=="string"?f.set(y,null):f.set(y.key,null);else switch(y){case"time":{f.set(y,us($));break}case"controllers":{f.set(y,Ef($));break}case"module_hash":{f.set(y,to($));break}case"subnet":{f.set(y,$);break}case"candid":{f.set(y,new TextDecoder().decode($));break}default:if(typeof y!="string"&&"key"in y&&"path"in y)switch(y.decodeStrategy){case"raw":f.set(y.key,$);break;case"leb128":{f.set(y.key,Pa($));break}case"cbor":{f.set(y.key,qa($));break}case"hex":{f.set(y.key,to($));break}case"utf-8":f.set(y.key,xf($))}}}catch(m){if(!((A=m==null?void 0:m.message)===null||A===void 0)&&A.includes("Invalid certificate"))throw new Pe(m.message);typeof w!="string"&&"key"in w&&"path"in w?f.set(w.key,null):f.set(w,null),console.group(),console.warn(`Expected to find result for path ${w}, but instead found nothing.`),console.warn(m),console.groupEnd()}})());return await Promise.all(o),f},Ca=(e,t,r)=>{if(!t._isPrincipal)throw new Error("Invalid canisterId");const n=Ut(new Uint8Array(e)),i=n.tree;let c=n.delegation,f;if(c&&c.subnet_id?f=xe.fromUint8Array(new Uint8Array(c.subnet_id)):!c&&typeof r<"u"?(f=xe.selfAuthenticating(new Uint8Array(r)),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=xe.selfAuthenticating(xe.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),c={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!Ma({canisterId:t,subnetId:f,tree:i}))throw new Error("Canister not in range");const w=Nr(["subnet",c.subnet_id,"node"],i);if(w.status!==Ge.Found)throw new Error("Node not found");if(w.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const b=Wi(w.value),A=new Map;return b.forEach(m=>{const v=xe.from(new Uint8Array(m[1])).toText(),_=Nr(["public_key"],m[2]);if(_.status!==Ge.Found)throw new Error("Public key not found");const y=_.value;if(y.byteLength!==44)throw new Error("Invalid public key length");A.set(v,y)}),{subnetId:xe.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:A}},Zi=(e,t)=>{const r=new TextEncoder,n=c=>new DataView(r.encode(c).buffer).buffer,i=new DataView(t.toUint8Array().buffer).buffer;switch(e){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in e&&"path"in e)if(typeof e.path=="string"||e.path instanceof ArrayBuffer){const c=e.path,f=typeof c=="string"?n(c):c;return[n("canister"),i,n("metadata"),f]}else return e.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${e} was formatted correctly.`)},to=e=>ze(e),qa=e=>Ut(e),xf=e=>new TextDecoder().decode(e),Ef=e=>qa(e).map(r=>xe.fromUint8Array(new Uint8Array(r))),Bf=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:_f,encodePath:Zi,fetchNodeKeys:Ca,request:ka},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt(0),tt=BigInt(1),Mi=BigInt(2),Af=BigInt(8),vf={zip215:!0};function Tf(e,t,r,n){const i=e.sqr(r),c=e.sqr(n),f=e.add(e.mul(t.a,i),c),o=e.add(e.ONE,e.mul(t.d,e.mul(i,c)));return e.eql(f,o)}function Sf(e,t={}){const{Fp:r,Fn:n}=Ia("edwards",e,t),{h:i,n:c}=e;Lr(t,{},{uvRatio:"function"});const f=Mi<<BigInt(n.BYTES*8)-tt,o=$=>r.create($),w=t.uvRatio||(($,V)=>{try{return{isValid:!0,value:r.sqrt(r.div($,V))}}catch{return{isValid:!1,value:mt}}});if(!Tf(r,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function b($,V,Y=!1){const z=Y?tt:mt;return Cr("coordinate "+$,V,z,f),V}function A($){if(!($ instanceof _))throw new Error("ExtendedPoint expected")}const m=Zr(($,V)=>{const{ex:Y,ey:z,ez:W}=$,ie=$.is0();V==null&&(V=ie?Af:r.inv(W));const R=o(Y*V),J=o(z*V),L=o(W*V);if(ie)return{x:mt,y:tt};if(L!==tt)throw new Error("invZ was invalid");return{x:R,y:J}}),v=Zr($=>{const{a:V,d:Y}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:z,ey:W,ez:ie,et:R}=$,J=o(z*z),L=o(W*W),I=o(ie*ie),F=o(I*I),P=o(J*V),Q=o(I*o(P+L)),te=o(F+o(Y*o(J*L)));if(Q!==te)throw new Error("bad point: equation left != right (1)");const d=o(z*W),T=o(ie*R);if(d!==T)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(V,Y,z,W){this.ex=b("x",V),this.ey=b("y",Y),this.ez=b("z",z,!0),this.et=b("t",W),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(V){if(V instanceof _)throw new Error("extended point not allowed");const{x:Y,y:z}=V||{};return b("x",Y),b("y",z),new _(Y,z,tt,o(Y*z))}static normalizeZ(V){return $n(_,"ez",V)}static msm(V,Y){return Na(_,n,V,Y)}_setWindowSize(V){this.precompute(V)}precompute(V=8,Y=!0){return y.setWindowSize(this,V),Y||this.multiply(Mi),this}assertValidity(){v(this)}equals(V){A(V);const{ex:Y,ey:z,ez:W}=this,{ex:ie,ey:R,ez:J}=V,L=o(Y*J),I=o(ie*W),F=o(z*J),P=o(R*W);return L===I&&F===P}is0(){return this.equals(_.ZERO)}negate(){return new _(o(-this.ex),this.ey,this.ez,o(-this.et))}double(){const{a:V}=e,{ex:Y,ey:z,ez:W}=this,ie=o(Y*Y),R=o(z*z),J=o(Mi*o(W*W)),L=o(V*ie),I=Y+z,F=o(o(I*I)-ie-R),P=L+R,Q=P-J,te=L-R,d=o(F*Q),T=o(P*te),M=o(F*te),j=o(Q*P);return new _(d,T,j,M)}add(V){A(V);const{a:Y,d:z}=e,{ex:W,ey:ie,ez:R,et:J}=this,{ex:L,ey:I,ez:F,et:P}=V,Q=o(W*L),te=o(ie*I),d=o(J*z*P),T=o(R*F),M=o((W+ie)*(L+I)-Q-te),j=T-d,D=T+d,re=o(te-Y*Q),ue=o(M*j),ye=o(D*re),oe=o(M*re),le=o(j*D);return new _(ue,ye,le,oe)}subtract(V){return this.add(V.negate())}multiply(V){const Y=V;Cr("scalar",Y,tt,c);const{p:z,f:W}=y.wNAFCached(this,Y,_.normalizeZ);return _.normalizeZ([z,W])[0]}multiplyUnsafe(V,Y=_.ZERO){const z=V;return Cr("scalar",z,mt,c),z===mt?_.ZERO:this.is0()||z===tt?this:y.wNAFCachedUnsafe(this,z,_.normalizeZ,Y)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return y.wNAFCachedUnsafe(this,c).is0()}toAffine(V){return m(this,V)}clearCofactor(){return i===tt?this:this.multiplyUnsafe(i)}static fromBytes(V,Y=!1){return Xe(V),this.fromHex(V,Y)}static fromHex(V,Y=!1){const{d:z,a:W}=e,ie=r.BYTES;V=nt("pointHex",V,ie),Kr("zip215",Y);const R=V.slice(),J=V[ie-1];R[ie-1]=J&-129;const L=Wr(R),I=Y?f:r.ORDER;Cr("pointHex.y",L,mt,I);const F=o(L*L),P=o(F-tt),Q=o(z*F-W);let{isValid:te,value:d}=w(P,Q);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const T=(d&tt)===tt,M=(J&128)!==0;if(!Y&&d===mt&&M)throw new Error("Point.fromHex: x=0 and x_0=1");return M!==T&&(d=o(-d)),_.fromAffine({x:d,y:L})}static fromPrivateScalar(V){return _.BASE.multiply(V)}toBytes(){const{x:V,y:Y}=this.toAffine(),z=Qn(Y,r.BYTES);return z[z.length-1]|=V&tt?128:0,z}toRawBytes(){return this.toBytes()}toHex(){return vr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(e.Gx,e.Gy,tt,o(e.Gx*e.Gy)),_.ZERO=new _(mt,tt,tt,mt),_.Fp=r,_.Fn=n;const y=Sa(_,n.BYTES*8);return _}function Nf(e,t){Lr(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=t,{BASE:i,Fp:c,Fn:f}=e,o=f.ORDER,w=t.randomBytes||bo,b=t.adjustScalarBytes||(R=>R),A=t.domain||((R,J,L)=>{if(Kr("phflag",L),J.length||L)throw new Error("Contexts/pre-hash are not supported");return R});function m(R){return f.create(R)}function v(R){return m(Wr(R))}function _(R){const J=c.BYTES;R=nt("private key",R,J);const L=nt("hashed private key",n(R),2*J),I=b(L.slice(0,J)),F=L.slice(J,2*J),P=v(I);return{head:I,prefix:F,scalar:P}}function y(R){const{head:J,prefix:L,scalar:I}=_(R),F=i.multiply(I),P=F.toBytes();return{head:J,prefix:L,scalar:I,point:F,pointBytes:P}}function $(R){return y(R).pointBytes}function V(R=Uint8Array.of(),...J){const L=ke(...J);return v(n(A(L,nt("context",R),!!r)))}function Y(R,J,L={}){R=nt("message",R),r&&(R=r(R));const{prefix:I,scalar:F,pointBytes:P}=y(J),Q=V(L.context,I,R),te=i.multiply(Q).toBytes(),d=V(L.context,te,P,R),T=m(Q+d*F);Cr("signature.s",T,mt,o);const M=c.BYTES,j=ke(te,Qn(T,M));return nt("result",j,M*2)}const z=vf;function W(R,J,L,I=z){const{context:F,zip215:P}=I,Q=c.BYTES;R=nt("signature",R,2*Q),J=nt("message",J),L=nt("publicKey",L,Q),P!==void 0&&Kr("zip215",P),r&&(J=r(J));const te=Wr(R.slice(Q,2*Q));let d,T,M;try{d=e.fromHex(L,P),T=e.fromHex(R.slice(0,Q),P),M=i.multiplyUnsafe(te)}catch{return!1}if(!P&&d.isSmallOrder())return!1;const j=V(F,T.toBytes(),d.toBytes(),J);return T.add(d.multiplyUnsafe(j)).subtract(M).clearCofactor().is0()}return i.precompute(8),{getPublicKey:$,sign:Y,verify:W,utils:{getExtendedPublicKey:y,randomPrivateKey:()=>w(c.BYTES),precompute(R=8,J=e.BASE){return J.precompute(R,!1)}},Point:e}}function If(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=ur(t.n,e.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:e.uvRatio},c={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:i,eddsaOpts:c}}function Rf(e,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:e})}function Uf(e){const{CURVE:t,curveOpts:r,eddsaOpts:n}=If(e),i=Sf(t,r),c=Nf(i,n);return Rf(e,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Ff=BigInt(1),ro=BigInt(2);BigInt(3);const Of=BigInt(5),Pf=BigInt(8),ri={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Pf,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Mf(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),c=ri.p,o=e*e%c*e%c,w=wt(o,ro,c)*o%c,b=wt(w,Ff,c)*e%c,A=wt(b,Of,c)*b%c,m=wt(A,t,c)*A%c,v=wt(m,r,c)*m%c,_=wt(v,n,c)*v%c,y=wt(_,i,c)*_%c,$=wt(y,i,c)*_%c,V=wt($,t,c)*A%c;return{pow_p_5_8:wt(V,ro,c)*e%c,b2:o}}function kf(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const no=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Cf(e,t){const r=ri.p,n=$e(t*t*t,r),i=$e(n*n*t,r),c=Mf(e*i).pow_p_5_8;let f=$e(e*n*c,r);const o=$e(t*f*f,r),w=f,b=$e(f*no,r),A=o===e,m=o===$e(-e,r),v=o===$e(-e*no,r);return A&&(f=w),(m||v)&&(f=b),Ou(f,r)&&(f=$e(-f,r)),{isValid:A||m,value:f}}const qf=ur(ri.p,void 0,!0),$f={...ri,Fp:qf,hash:Kc,adjustScalarBytes:kf,uvRatio:Cf},Gf=Uf($f);var io=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},rt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Le,$r,$a,Ga;class Vf{constructor(t={}){Le.set(this,void 0),$r.set(this,void 0),this[$a]=this.entries.bind(this),this[Ga]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=t,i=Date.now();io(this,Le,new Map([...r].map(([c,f])=>[c,{value:f,timestamp:i}])),"f"),io(this,$r,n,"f")}prune(){const t=Date.now();for(const[r,n]of rt(this,Le,"f").entries())t-n.timestamp>rt(this,$r,"f")&&rt(this,Le,"f").delete(r);return this}set(t,r){this.prune();const n={value:r,timestamp:Date.now()};return rt(this,Le,"f").set(t,n),this}get(t){const r=rt(this,Le,"f").get(t);if(r!==void 0){if(Date.now()-r.timestamp>rt(this,$r,"f")){rt(this,Le,"f").delete(t);return}return r.value}}clear(){rt(this,Le,"f").clear()}entries(){const t=rt(this,Le,"f").entries();return function*(){for(const[n,i]of t)yield[n,i.value]}()}values(){const t=rt(this,Le,"f").values();return function*(){for(const n of t)yield n.value}()}keys(){return rt(this,Le,"f").keys()}forEach(t,r){for(const[n,i]of rt(this,Le,"f").entries())t.call(r,i.value,n,this)}has(t){return rt(this,Le,"f").has(t)}delete(t){return rt(this,Le,"f").delete(t)}get size(){return rt(this,Le,"f").size}}Le=new WeakMap,$r=new WeakMap,$a=Symbol.iterator,Ga=Symbol.toStringTag;const so=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},oo=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Xi=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},Hf=(e,t)=>{const r=Xi(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const ao=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function jf(e,t){const r=2+so(e.byteLength+1),n=t.byteLength+r+e.byteLength;let i=0;const c=new Uint8Array(1+so(n)+n);return c[i++]=48,i+=oo(c,i,n),c.set(t,i),i+=t.byteLength,c[i++]=3,i+=oo(c,i,e.byteLength+1),c[i++]=0,c.set(new Uint8Array(e),i),c}const zf=(e,t)=>{let r=0;const n=(o,w)=>{if(i[r++]!==o)throw new Error("Expected: "+w)},i=new Uint8Array(e);if(n(48,"sequence"),r+=Xi(i,r),!Hn(i.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,n(3,"bit string");const c=Hf(i,r)-1;r+=Xi(i,r),n(0,"0 padding");const f=i.slice(r);if(c!==f.length)throw new Error(`DER payload mismatch: Expected length ${c} actual length ${f.length}`);return f};var co=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},uo=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},xn,En;class tr{constructor(t){if(xn.set(this,void 0),En.set(this,void 0),t.byteLength!==tr.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");co(this,xn,t,"f"),co(this,En,tr.derEncode(t),"f")}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new tr(t)}static fromDer(t){return new tr(this.derDecode(t))}static derEncode(t){return jf(t,ao).buffer}static derDecode(t){const r=zf(t,ao);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return uo(this,xn,"f")}get derKey(){return uo(this,En,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}xn=new WeakMap,En=new WeakMap;tr.RAW_KEY_LENGTH=32;class Yf{constructor(){this.observers=[]}subscribe(t){this.observers.push(t)}unsubscribe(t){this.observers=this.observers.filter(r=>r!==t)}notify(t,...r){this.observers.forEach(n=>n(t,...r))}}class Kf extends Yf{constructor(){super()}print(t,...r){this.notify({message:t,level:"info"},...r)}warn(t,...r){this.notify({message:t,level:"warn"},...r)}error(t,r,...n){this.notify({message:t,level:"error",error:r},...n)}}var gt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Qe=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},bt,Bn,An,vn,Tn,Sn,Nn,In,pr;const Va=.5,Ha=1.5,ja=500,za=6e4,Ya=9e5,Ka=10;class ni{constructor(t=ni.default){bt.set(this,void 0),Bn.set(this,void 0),An.set(this,void 0),vn.set(this,void 0),Tn.set(this,void 0),Sn.set(this,void 0),Nn.set(this,void 0),In.set(this,void 0),pr.set(this,0);const{initialInterval:r=ja,randomizationFactor:n=Va,multiplier:i=Ha,maxInterval:c=za,maxElapsedTime:f=Ya,maxIterations:o=Ka,date:w=Date}=t;gt(this,bt,r,"f"),gt(this,Bn,n,"f"),gt(this,An,i,"f"),gt(this,vn,c,"f"),gt(this,In,w,"f"),gt(this,Tn,w.now(),"f"),gt(this,Sn,f,"f"),gt(this,Nn,o,"f")}get ellapsedTimeInMsec(){return Qe(this,In,"f").now()-Qe(this,Tn,"f")}get currentInterval(){return Qe(this,bt,"f")}get count(){return Qe(this,pr,"f")}get randomValueFromInterval(){const t=Qe(this,Bn,"f")*Qe(this,bt,"f"),r=Qe(this,bt,"f")-t,n=Qe(this,bt,"f")+t;return Math.random()*(n-r)+r}incrementCurrentInterval(){var t;return gt(this,bt,Math.min(Qe(this,bt,"f")*Qe(this,An,"f"),Qe(this,vn,"f")),"f"),gt(this,pr,(t=Qe(this,pr,"f"),t++,t),"f"),Qe(this,bt,"f")}next(){return this.ellapsedTimeInMsec>=Qe(this,Sn,"f")||Qe(this,pr,"f")>=Qe(this,Nn,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}bt=new WeakMap,Bn=new WeakMap,An=new WeakMap,vn=new WeakMap,Tn=new WeakMap,Sn=new WeakMap,Nn=new WeakMap,In=new WeakMap,pr=new WeakMap;ni.default={initialInterval:ja,randomizationFactor:Va,multiplier:Ha,maxInterval:za,maxElapsedTime:Ya,maxIterations:Ka,date:Date};var Ke=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},ce=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},De,Wt,Br,_t,St,xr,Gr,yr,lt,ht,Zt,Xt,Vr,wr,gr,Jt,Lt,Wa,Rn,Un,Qt,Nt;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})(Nt||(Nt={}));const fn=60*1e3,Wf="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Zf="aaaaa-aa",Xf="ic0.app",Jf=".ic0.app",Qf="icp0.io",Lf=".icp0.io",Df="icp-api.io",e0=".icp-api.io";class ki extends Pe{constructor(t){super(t),this.message=t}}class ln extends Pe{constructor(t){super(t),this.message=t}}function t0(){let e;if(typeof window<"u")if(window.fetch)e=window.fetch.bind(window);else throw new ki("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)e=global.fetch.bind(global);else throw new ki("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new ki("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function r0(e){let t;if(e!==void 0)!e.match(/^[a-z]+:/)&&typeof window<"u"?t=new URL(window.location.protocol+"//"+e):t=new URL(e);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,c=i==null?void 0:i.hostname;let f;c&&typeof c=="string"&&(n.some(o=>c.endsWith(o))?f=c:f=r.find(o=>c.endsWith(o))),i&&f?t=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):t=new URL("https://icp-api.io")}return t.toString()}class zt{constructor(t={}){var r,n;De.add(this),Wt.set(this,null),Br.set(this,!1),_t.set(this,void 0),St.set(this,void 0),xr.set(this,void 0),Gr.set(this,void 0),yr.set(this,0),lt.set(this,void 0),ht.set(this,void 0),Zt.set(this,void 0),Xt.set(this,void 0),this._isAgent=!0,this.config={},Vr.set(this,0),this.log=new Kf,wr.set(this,[]),gr.set(this,[]),Jt.set(this,new Vf({expirationTime:5*60*1e3})),Lt.set(this,!0),Un.set(this,(f,o)=>{if(ce(this,Lt,"f")===!1)return f;if(!o)throw new xt("Invalid signature from replica signed query: no matching node key found.");const{status:w,signatures:b=[],requestId:A}=f,m=Mr(new TextEncoder().encode("\vic-response"));for(const v of b){const{timestamp:_,identity:y}=v,$=xe.fromUint8Array(y).toText();let V;if(w==="replied"){const{reply:R}=f;V=kn({status:w,reply:R,timestamp:BigInt(_),request_id:A})}else if(w==="rejected"){const{reject_code:R,reject_message:J,error_code:L}=f;V=kn({status:w,reject_code:R,reject_message:J,error_code:L,timestamp:BigInt(_),request_id:A})}else throw new Error(`Unknown status: ${w}`);const Y=pt(m,Mr(new Uint8Array(V))),z=o==null?void 0:o.nodeKeys.get($);if(!z)throw new xt("Invalid signature from replica signed query: no matching node key found.");const W=tr.fromDer(z).rawKey;if(Gf.verify(v.signature,new Uint8Array(Y),new Uint8Array(W)))return f;throw new xt(`Invalid signature from replica ${$} signed query.`)}return f}),this.config=t,Ke(this,St,t.fetch||t0()||fetch.bind(global),"f"),Ke(this,xr,t.fetchOptions,"f"),Ke(this,Gr,t.callOptions,"f"),Ke(this,Br,(r=t.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),t.rootKey?this.rootKey=t.rootKey:ce(this,Br,"f")?this.rootKey=null:this.rootKey=On(Wf);const i=r0(t.host);this.host=new URL(i),t.verifyQuerySignatures!==void 0&&Ke(this,Lt,t.verifyQuerySignatures,"f"),Ke(this,ht,(n=t.retryTimes)!==null&&n!==void 0?n:3,"f");const c=()=>new ni({maxIterations:ce(this,ht,"f")});if(Ke(this,Zt,t.backoffStrategy||c,"f"),this.host.hostname.endsWith(Jf)?this.host.hostname=Xf:this.host.hostname.endsWith(Lf)?this.host.hostname=Qf:this.host.hostname.endsWith(e0)&&(this.host.hostname=Df),t.credentials){const{name:f,password:o}=t.credentials;Ke(this,lt,`${f}${o?":"+o:""}`,"f")}if(Ke(this,_t,Promise.resolve(t.identity||new Ps),"f"),t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes>5)throw new Pe(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);if(t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes<=0)throw new Pe(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);Ke(this,Xt,t.ingressExpiryInMinutes||5,"f"),this.addTransform("update",Gs(ji)),t.useQueryNonces&&this.addTransform("query",Gs(ji)),t.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ce(this,Vr,"f")}static createSync(t={}){return new this(Object.assign({},t))}static async create(t={shouldFetchRootKey:!1}){const r=zt.createSync(t),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&t.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(t){var r;try{return"config"in t?await zt.create(t.config):await zt.create({fetch:t._fetch,fetchOptions:t._fetchOptions,callOptions:t._callOptions,host:t._host.toString(),identity:(r=t._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Pe("Failed to create agent from provided agent")}}isLocal(){const t=this.host.hostname;return t==="127.0.0.1"||t.endsWith("127.0.0.1")}addTransform(t,r,n=r.priority||0){if(t==="update"){const i=ce(this,gr,"f").findIndex(c=>(c.priority||0)<n);ce(this,gr,"f").splice(i>=0?i:ce(this,gr,"f").length,0,Object.assign(r,{priority:n}))}else if(t==="query"){const i=ce(this,wr,"f").findIndex(c=>(c.priority||0)<n);ce(this,wr,"f").splice(i>=0?i:ce(this,wr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ce(this,_t,"f"))throw new ln("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,_t,"f")).getPrincipal()}async call(t,r,n){var i,c;await ce(this,De,"m",Qt).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,o=await(n!==void 0?await n:await ce(this,_t,"f"));if(!o)throw new ln("This identity has expired due this application's security policy. Please refresh your authentication.");const w=xe.from(t),b=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):w,A=o.getPrincipal()||xe.anonymous();let m=new cn(ce(this,Xt,"f")*fn);Math.abs(ce(this,yr,"f"))>1e3*30&&(m=new cn(ce(this,Xt,"f")*fn+ce(this,yr,"f")));const v={request_type:Hi.Call,canister_id:w,method_name:r.methodName,arg:r.arg,sender:A,ingress_expiry:m};let _=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,lt,"f")?{Authorization:"Basic "+btoa(ce(this,lt,"f"))}:{})},endpoint:"call",body:v}),y;r!=null&&r.nonce?y=$(r.nonce):_.body.nonce?y=$(_.body.nonce):y=void 0,v.nonce=y;function $(W){return new Uint8Array(W)}_=await o.transformRequest(_);const V=Ai(_.body),Y=ce(this,Zt,"f").call(this),z=Gi(v);try{const W=()=>(this.log.print(`fetching "/api/v3/canister/${b.toText()}/call" with request:`,_),ce(this,St,"f").call(this,""+new URL(`/api/v3/canister/${b.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Gr,"f")),_.request),{body:V}))),ie=()=>(this.log.print(`fetching "/api/v2/canister/${b.toText()}/call" with request:`,_),ce(this,St,"f").call(this,""+new URL(`/api/v2/canister/${b.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Gr,"f")),_.request),{body:V}))),J=await ce(this,De,"m",Rn).call(this,{request:f?W:ie,backoff:Y,tries:0}),L=await J.arrayBuffer(),I=J.status===200&&L.byteLength>0?Ut(L):null;if(I&&"certificate"in I){const F=await this.parseTimeFromResponse({certificate:I.certificate});Ke(this,Vr,F,"f")}return{requestId:z,response:{ok:J.ok,status:J.status,statusText:J.statusText,body:I,headers:kr(J.headers)},requestDetails:v}}catch(W){if(W.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(t,Object.assign(Object.assign({},r),{callSync:!1}),n);const ie=`Error while making call: ${(c=W.message)!==null&&c!==void 0?c:String(W)}`,R=new Au(ie,W,ze(z),ze(_.body.sender_pubkey),ze(_.body.sender_sig),String(_.body.content.ingress_expiry._value));throw this.log.error(ie,R),R}}async query(t,r,n){var i,c,f,o;await ce(this,De,"m",Qt).call(this);const w=ce(this,Zt,"f").call(this),b=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):xe.from(t);this.log.print(`ecid ${b.toString()}`),this.log.print(`canisterId ${t.toString()}`);let A,m;const v=await(n!==void 0?n:ce(this,_t,"f"));if(!v)throw new ln("This identity has expired due this application's security policy. Please refresh your authentication.");const _=xe.from(t),y=(v==null?void 0:v.getPrincipal())||xe.anonymous(),$={request_type:"query",canister_id:_,method_name:r.methodName,arg:r.arg,sender:y,ingress_expiry:new cn(ce(this,Xt,"f")*fn)},V=Gi($);A=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,lt,"f")?{Authorization:"Basic "+btoa(ce(this,lt,"f"))}:{})},endpoint:"read",body:$}),A=await(v==null?void 0:v.transformRequest(A));const Y=Ai(A.body),z={canister:_.toText(),ecid:b,transformedRequest:A,body:Y,requestId:V,backoff:w,tries:0},W=async()=>({requestDetails:$,query:await ce(this,De,"m",Wa).call(this,z)}),ie=async()=>{if(!ce(this,Lt,"f"))return;const R=ce(this,Jt,"f").get(b.toString());return R||(await this.fetchSubnetKeys(b.toString()),ce(this,Jt,"f").get(b.toString()))};try{const[R,J]=await Promise.all([W(),ie()]);m=R;const{requestDetails:L,query:I}=m,F=Object.assign(Object.assign({},I),{requestDetails:L});if(this.log.print("Query response:",F),!ce(this,Lt,"f"))return F;try{return ce(this,Un,"f").call(this,F,J)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,Jt,"f").delete(t.toString()),await this.fetchSubnetKeys(b.toString());const Q=ce(this,Jt,"f").get(t.toString());if(!Q)throw new xt("Invalid signature from replica signed query: no matching node key found.");return ce(this,Un,"f").call(this,F,Q)}}catch(R){const J=`Error while making call: ${(i=R.message)!==null&&i!==void 0?i:String(R)}`,L=new vu(J,R,String(V),ze((c=A==null?void 0:A.body)===null||c===void 0?void 0:c.sender_pubkey),ze((f=A==null?void 0:A.body)===null||f===void 0?void 0:f.sender_sig),String((o=A==null?void 0:A.body)===null||o===void 0?void 0:o.content.ingress_expiry._value));throw this.log.error(J,L),L}}async createReadStateRequest(t,r){await ce(this,De,"m",Qt).call(this);const n=await(r!==void 0?await r:await ce(this,_t,"f"));if(!n)throw new ln("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||xe.anonymous(),c=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,lt,"f")?{Authorization:"Basic "+btoa(ce(this,lt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:i,ingress_expiry:new cn(ce(this,Xt,"f")*fn)}});return n==null?void 0:n.transformRequest(c)}async readState(t,r,n,i){var c,f,o,w;function b($){for(const V of $.paths){const[Y,z]=V,W=Mr(new TextEncoder().encode("request_status"));if(Hn(Y,W))return z}}const A=b(r);await ce(this,De,"m",Qt).call(this);const m=typeof t=="string"?xe.fromText(t):t,v=i??await this.createReadStateRequest(r,n),_=Ai(v.body);this.log.print(`fetching "/api/v2/canister/${m}/read_state" with request:`,v);const y=ce(this,Zt,"f").call(this);try{const $=await ce(this,De,"m",Rn).call(this,{request:()=>ce(this,St,"f").call(this,""+new URL(`/api/v2/canister/${m.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,xr,"f")),v.request),{body:_})),backoff:y,tries:0});if(!$.ok)throw new Error(`Server returned an error:
  Code: ${$.status} (${$.statusText})
  Body: ${await $.text()}
`);const V=Ut(await $.arrayBuffer());this.log.print("Read state response:",V);const Y=await this.parseTimeFromResponse(V);return Y>0&&(this.log.print("Read state response time:",Y),Ke(this,Vr,Y,"f")),V}catch($){const V=`Caught exception while attempting to read state: ${(c=$.message)!==null&&c!==void 0?c:String($)}`,Y=new Tu(V,$,String(A),ze((f=v==null?void 0:v.body)===null||f===void 0?void 0:f.sender_pubkey),ze((o=v==null?void 0:v.body)===null||o===void 0?void 0:o.sender_sig),String((w=v==null?void 0:v.body)===null||w===void 0?void 0:w.content.ingress_expiry._value));throw this.log.error(V,Y),Y}}async parseTimeFromResponse(t){let r;if(t.certificate){const n=Ut(t.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Nr(["time"],r);if(i.status!==Ge.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const c=us(Mr(i.value));return this.log.print("Time from response:",c),this.log.print("Time from response in milliseconds:",Number(c)),Number(c)}else this.log.warn("No certificate found in response");return 0}async syncTime(t){await ce(this,De,"m",Qt).call(this);const r=await wc(()=>Promise.resolve().then(()=>Bf),void 0,import.meta.url),n=Date.now();try{t||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=zt.createSync({identity:new Ps,host:this.host.toString(),fetch:ce(this,St,"f"),retryTimes:0}),f=(await r.request({canisterId:t??xe.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(Ke(this,yr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,yr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const t=ce(this,lt,"f")?{Authorization:"Basic "+btoa(ce(this,lt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ce(this,Zt,"f").call(this),n=await ce(this,De,"m",Rn).call(this,{backoff:r,request:()=>ce(this,St,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:t},ce(this,xr,"f"))),tries:0});return Ut(await n.arrayBuffer())}async fetchRootKey(){let t;return ce(this,Wt,"f")?t=await ce(this,Wt,"f"):(Ke(this,Wt,new Promise((r,n)=>{this.status().then(i=>{const c=i.root_key;this.rootKey=c,r(c)}).catch(n)}),"f"),t=await ce(this,Wt,"f")),Ke(this,Wt,null,"f"),t}invalidateIdentity(){Ke(this,_t,null,"f")}replaceIdentity(t){Ke(this,_t,Promise.resolve(t),"f")}async fetchSubnetKeys(t){await ce(this,De,"m",Qt).call(this);const r=xe.from(t),i=(await ka({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,Jt,"f").set(r.toText(),i),i}_transform(t){let r=Promise.resolve(t);if(t.endpoint==="call")for(const n of ce(this,gr,"f"))r=r.then(i=>n(i).then(c=>c||i));else for(const n of ce(this,wr,"f"))r=r.then(i=>n(i).then(c=>c||i));return r}}Wt=new WeakMap,Br=new WeakMap,_t=new WeakMap,St=new WeakMap,xr=new WeakMap,Gr=new WeakMap,yr=new WeakMap,lt=new WeakMap,ht=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,Vr=new WeakMap,wr=new WeakMap,gr=new WeakMap,Jt=new WeakMap,Lt=new WeakMap,Un=new WeakMap,De=new WeakSet,Wa=async function e(t){var r,n;const{ecid:i,transformedRequest:c,body:f,requestId:o,backoff:w,tries:b}=t,A=b===0?0:w.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:b,backoff:w,delay:A}),A===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,ht,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);A>0&&await new Promise(y=>setTimeout(y,A));let m;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,c);const y=await ce(this,St,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,xr,"f")),c.request),{body:f}));if(y.status===200){const $=Ut(await y.arrayBuffer());m=Object.assign(Object.assign({},$),{httpDetails:{ok:y.ok,status:y.status,statusText:y.statusText,headers:kr(y.headers)},requestId:o})}else throw new vi(`Gateway returned an error:
  Code: ${y.status} (${y.statusText})
  Body: ${await y.text()}
`,{ok:y.ok,status:y.status,statusText:y.statusText,headers:kr(y.headers)})}catch(y){if(b<ce(this,ht,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${y}
  Retrying query.`),await ce(this,De,"m",e).call(this,Object.assign(Object.assign({},t),{tries:b+1}));throw y}const v=(n=(r=m.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,Lt,"f"))return m;if(!v)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const _=Number(BigInt(v)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:_}),Number(this.waterMark)>_){const y=new Pe("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",y,{timestamp:v,waterMark:this.waterMark}),b<ce(this,ht,"f"))return await ce(this,De,"m",e).call(this,Object.assign(Object.assign({},t),{tries:b+1}));throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,ht,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return m},Rn=async function e(t){const{request:r,backoff:n,tries:i}=t,c=i===0?0:n.next();if(c===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,ht,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(b=>setTimeout(b,c));let f;try{f=await r()}catch(b){if(ce(this,ht,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${b}
  Retrying request.`),await ce(this,De,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw b}if(f.ok)return f;const o=await f.clone().text(),w=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${o}
`;if(f.status===404&&f.url.includes("api/v3"))throw new vi("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:kr(f.headers)});if(i<ce(this,ht,"f"))return await ce(this,De,"m",e).call(this,{request:r,backoff:n,tries:i+1});throw new vi(w,{ok:f.ok,status:f.status,statusText:f.statusText,headers:kr(f.headers)})},Qt=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Br,"f"))await this.fetchRootKey();else throw new Pe(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Br,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var fo;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(fo||(fo={}));function lo(){const e=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}const n0=5*60*1e3;function Za(){return c0(s0(i0(),1e3),a0(1e3,1.2),o0(n0))}function i0(){let e=!0;return async()=>e?(e=!1,!0):!1}function s0(e,t){return async(r,n,i)=>{if(await e(r,n,i))return new Promise(c=>setTimeout(c,t))}}function o0(e){const t=Date.now()+e;return async(r,n,i)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${ze(n)}
  Request status: ${i}
`)}}function a0(e,t){let r=e;return()=>new Promise(n=>setTimeout(()=>{r*=t,n()},r))}function c0(...e){return async(t,r,n)=>{for(const i of e)await i(t,r,n)}}async function Xa(e,t,r,n=Za(),i,c){var f;const o=[new TextEncoder().encode("request_status"),r],w=i??await((f=e.createReadStateRequest)===null||f===void 0?void 0:f.call(e,{paths:[o]})),b=await e.readState(t,{paths:[o]},void 0,w);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");const A=await nr.create({certificate:b.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:c}),m=ut(A.lookup([...o,new TextEncoder().encode("status")]));let v;switch(typeof m>"u"?v=Nt.Unknown:v=new TextDecoder().decode(m),v){case Nt.Replied:return{reply:ut(A.lookup([...o,"reply"])),certificate:A};case Nt.Received:case Nt.Unknown:case Nt.Processing:return await n(t,r,v),Xa(e,t,r,n,w,c);case Nt.Rejected:{const _=new Uint8Array(ut(A.lookup([...o,"reject_code"])))[0],y=new TextDecoder().decode(ut(A.lookup([...o,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${ze(r)}
  Reject code: ${_}
  Reject text: ${y}
`)}case Nt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${ze(r)}
`)}throw new Error("unreachable")}const u0=({IDL:e})=>{const t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),i=e.Nat64,c=i,f=e.Nat32,o=e.Record({start_height:f,end_height:e.Opt(f),network:t}),w=e.Vec(e.Nat8),b=e.Record({tip_height:f,block_headers:e.Vec(w)}),A=e.Record({network:t}),m=e.Nat64,v=e.Vec(m),_=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),y=e.Vec(e.Nat8),$=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),V=e.Record({height:e.Nat32,value:i,outpoint:$}),Y=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:f,tip_block_hash:y,utxos:e.Vec(V)}),z=e.Record({transaction:e.Vec(e.Nat8),network:t}),W=e.Principal,ie=e.Record({canister_id:W,num_requested_changes:e.Opt(e.Nat64)}),R=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),J=e.Vec(e.Nat8),L=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:J}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),I=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:R,details:L}),F=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(I),total_num_changes:e.Nat64}),P=e.Record({canister_id:W}),Q=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),te=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:Q,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),d=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:te,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),T=e.Record({canister_id:W}),M=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(Q),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),j=e.Record({settings:e.Opt(M),sender_canister_version:e.Opt(e.Nat64)}),D=e.Record({canister_id:W}),re=e.Record({canister_id:W}),ue=e.Record({canister_id:W,snapshot_id:J}),ye=e.Record({canister_id:W}),oe=e.Variant({secp256k1:e.Null}),le=e.Record({key_id:e.Record({name:e.Text,curve:oe}),canister_id:e.Opt(W),derivation_path:e.Vec(e.Vec(e.Nat8))}),Ne=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),S=e.Record({canister_id:W}),Ae=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),Ie=e.Record({canister_log_records:e.Vec(Ae)}),ae=e.Record({value:e.Text,name:e.Text}),ee=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(ae)}),ne=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:ee})],[ee],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(ae)}),x=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),B=e.Record({hash:e.Vec(e.Nat8)}),U=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:x,chunk_hashes_list:e.Vec(B),target_canister:W,store_canister:e.Opt(W),sender_canister_version:e.Opt(e.Nat64)}),C=e.Vec(e.Nat8),k=e.Record({arg:e.Vec(e.Nat8),wasm_module:C,mode:x,canister_id:W,sender_canister_version:e.Opt(e.Nat64)}),G=e.Record({canister_id:W}),h=e.Record({id:J,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),s=e.Vec(h),a=e.Record({canister_id:W,sender_canister_version:e.Opt(e.Nat64),snapshot_id:J}),g=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),E=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),O=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(E)})),K=e.Record({settings:e.Opt(M),specified_id:e.Opt(W),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),se=e.Record({canister_id:W}),fe=e.Record({canister_id:W,amount:e.Nat}),he=e.Vec(e.Nat8),be=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),p=e.Record({key_id:e.Record({algorithm:be,name:e.Text}),canister_id:e.Opt(W),derivation_path:e.Vec(e.Vec(e.Nat8))}),u=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),l=e.Record({key_id:e.Record({name:e.Text,curve:oe}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),N=e.Record({signature:e.Vec(e.Nat8)}),H=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),X=e.Record({aux:e.Opt(H),key_id:e.Record({algorithm:be,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),Z=e.Record({signature:e.Vec(e.Nat8)}),ge=e.Record({canister_id:W}),_e=e.Record({canister_id:W}),me=e.Record({canister_id:W}),we=e.Vec(B),Se=e.Record({subnet_id:e.Principal}),Oe=e.Record({replica_version:e.Text}),ii=e.Record({replace_snapshot:e.Opt(J),canister_id:W}),si=h,oi=e.Record({canister_id:W,sender_canister_version:e.Opt(e.Nat64)}),ai=e.Record({canister_id:e.Principal,settings:M,sender_canister_version:e.Opt(e.Nat64)}),ci=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),Ot=B;return e.Service({bitcoin_get_balance:e.Func([n],[c],[]),bitcoin_get_block_headers:e.Func([o],[b],[]),bitcoin_get_current_fee_percentiles:e.Func([A],[v],[]),bitcoin_get_utxos:e.Func([_],[Y],[]),bitcoin_send_transaction:e.Func([z],[],[]),canister_info:e.Func([ie],[F],[]),canister_status:e.Func([P],[d],[]),clear_chunk_store:e.Func([T],[],[]),create_canister:e.Func([j],[D],[]),delete_canister:e.Func([re],[],[]),delete_canister_snapshot:e.Func([ue],[],[]),deposit_cycles:e.Func([ye],[],[]),ecdsa_public_key:e.Func([le],[Ne],[]),fetch_canister_logs:e.Func([S],[Ie],["query"]),http_request:e.Func([ne],[ee],[]),install_chunked_code:e.Func([U],[],[]),install_code:e.Func([k],[],[]),list_canister_snapshots:e.Func([G],[s],[]),load_canister_snapshot:e.Func([a],[],[]),node_metrics_history:e.Func([g],[O],[]),provisional_create_canister_with_cycles:e.Func([K],[se],[]),provisional_top_up_canister:e.Func([fe],[],[]),raw_rand:e.Func([],[he],[]),schnorr_public_key:e.Func([p],[u],[]),sign_with_ecdsa:e.Func([l],[N],[]),sign_with_schnorr:e.Func([X],[Z],[]),start_canister:e.Func([ge],[],[]),stop_canister:e.Func([_e],[],[]),stored_chunks:e.Func([me],[we],[]),subnet_info:e.Func([Se],[Oe],[]),take_canister_snapshot:e.Func([ii],[si],[]),uninstall_code:e.Func([oi],[],[]),update_settings:e.Func([ai],[],[]),upload_chunk:e.Func([ci],[Ot],[])})};class Ja extends Pe{constructor(t,r,n,i){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(c=>`  "${c}": ${JSON.stringify(i[c])}`)].join(`
`)),this.canisterId=t,this.methodName=r,this.type=n,this.props=i}}class f0 extends Ja{constructor(t,r,n){var i;super(t,r,"query",{Status:n.status,Code:(i=Ci[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class ho extends Ja{constructor(t,r,n,i,c,f,o){super(t,r,"update",Object.assign({"Request ID":ze(n)},i.body?Object.assign(Object.assign({},o?{"Error code":o}:{}),{"Reject code":String(c),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=c,this.reject_message=f,this.error_code=o}}const ct=Symbol.for("ic-agent-metadata");class Rr{constructor(t){this[ct]=Object.freeze(t)}static agentOf(t){return t[ct].config.agent}static interfaceOf(t){return t[ct].service}static canisterIdOf(t){return xe.from(t[ct].config.canisterId)}static async install(t,r){const n=t.mode===void 0?{install:null}:t.mode,i=t.arg?[...new Uint8Array(t.arg)]:[],c=[...new Uint8Array(t.module)],f=typeof r.canisterId=="string"?xe.fromText(r.canisterId):r.canisterId;await po(r).install_code({mode:n,arg:i,wasm_module:c,canister_id:f,sender_canister_version:[]})}static async createCanister(t,r){function n(c){return[{controllers:c.controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await po(t||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(t,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(t,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(t,r){const n=t({IDL:au});class i extends Rr{constructor(f){if(!f.canisterId)throw new Pe(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const o=typeof f.canisterId=="string"?xe.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},Qa),f),{canisterId:o}),service:n});for(const[w,b]of n._fields)r!=null&&r.httpDetails&&b.annotations.push(Ji),r!=null&&r.certificate&&b.annotations.push(La),this[w]=l0(this,w,b,f.blsVerify)}}return i}static createActor(t,r){if(!r.canisterId)throw new Pe(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(r)}static createActorWithHttpDetails(t,r){return new(this.createActorClass(t,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(t,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,n))(r)}}function dr(e,t){const r=Mo(e,_c.Buffer.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const Qa={pollingStrategyFactory:Za},Ji="http-details",La="certificate";function l0(e,t,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...o)=>{var w,b;f=Object.assign(Object.assign({},f),(b=(w=e[ct].config).queryTransform)===null||b===void 0?void 0:b.call(w,t,o,Object.assign(Object.assign({},e[ct].config),f)));const A=f.agent||e[ct].config.agent||lo(),m=xe.from(f.canisterId||e[ct].config.canisterId),v=$i(r.argTypes,o),_=await A.query(m,{methodName:t,arg:v,effectiveCanisterId:f.effectiveCanisterId}),y=Object.assign(Object.assign({},_.httpDetails),{requestDetails:_.requestDetails});switch(_.status){case"rejected":throw new f0(m,t,_);case"replied":return r.annotations.includes(Ji)?{httpDetails:y,result:dr(r.retTypes,_.reply.arg)}:dr(r.retTypes,_.reply.arg)}}:i=async(f,...o)=>{var w,b;f=Object.assign(Object.assign({},f),(b=(w=e[ct].config).callTransform)===null||b===void 0?void 0:b.call(w,t,o,Object.assign(Object.assign({},e[ct].config),f)));const A=f.agent||e[ct].config.agent||lo(),{canisterId:m,effectiveCanisterId:v,pollingStrategyFactory:_}=Object.assign(Object.assign(Object.assign({},Qa),e[ct].config),f),y=xe.from(m),$=v!==void 0?xe.from(v):y,V=$i(r.argTypes,o),{requestId:Y,response:z,requestDetails:W}=await A.call(y,{methodName:t,arg:V,effectiveCanisterId:$});let ie,R;if(z.body&&z.body.certificate){if(A.rootKey==null)throw new Error("Agent is missing root key");const F=z.body.certificate;R=await nr.create({certificate:Pn(F),rootKey:A.rootKey,canisterId:xe.from(m),blsVerify:n});const P=[new TextEncoder().encode("request_status"),Y];switch(new TextDecoder().decode(ut(R.lookup([...P,"status"])))){case"replied":ie=ut(R.lookup([...P,"reply"]));break;case"rejected":{const te=new Uint8Array(ut(R.lookup([...P,"reject_code"])))[0],d=new TextDecoder().decode(ut(R.lookup([...P,"reject_message"]))),T=ut(R.lookup([...P,"error_code"])),M=T?new TextDecoder().decode(T):void 0;throw new ho(y,t,Y,z,te,d,M)}}}else if(z.body&&"reject_message"in z.body){const{reject_code:F,reject_message:P,error_code:Q}=z.body;throw new ho(y,t,Y,z,F,P,Q)}if(z.status===202){const F=_(),P=await Xa(A,$,Y,F,n);R=P.certificate,ie=P.reply}const J=r.annotations.includes(Ji),L=r.annotations.includes(La),I=Object.assign(Object.assign({},z),{requestDetails:W});if(ie!==void 0)return J&&L?{httpDetails:I,certificate:R,result:dr(r.retTypes,ie)}:L?{certificate:R,result:dr(r.retTypes,ie)}:J?{httpDetails:I,result:dr(r.retTypes,ie)}:dr(r.retTypes,ie);if(r.retTypes.length===0)return J?{httpDetails:z,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const c=(...f)=>i({},...f);return c.withOptions=f=>(...o)=>i(f,...o),c}function po(e){function t(r,n){if(e.effectiveCanisterId)return{effectiveCanisterId:xe.from(e.effectiveCanisterId)};const i=n[0];let c=xe.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(c=xe.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(c=xe.from(i.canister_id)),{effectiveCanisterId:c}}return Rr.createActor(u0,Object.assign(Object.assign(Object.assign({},e),{canisterId:xe.fromHex("")}),{callTransform:t,queryTransform:t}))}const Da=({IDL:e})=>{const t=e.Nat,r=e.Principal,n=e.Record({id:t,owner:r,name:e.Text,color:e.Text}),i=e.Record({principal:r,name:e.Text});return e.Service({create_calendar:e.Func([e.Text,e.Text],[n],[]),get_my_calendars:e.Func([],[e.Vec(n)],[]),get_my_profile:e.Func([],[e.Opt(i)],[]),register:e.Func([e.Text],[i],[])})},Qi="ulvla-h7777-77774-qaacq-cai",h0=(e,t={})=>{const r=t.agent||new zt({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),Rr.createActor(Da,{agent:r,canisterId:e,...t.actorOptions})};h0(Qi);const ec=({IDL:e})=>{const t=e.Nat,r=e.Principal,n=e.Record({id:t,owner:r,name:e.Text,color:e.Text}),i=e.Int,c=e.Nat,f=e.Record({id:c,startTime:i,title:e.Text,endTime:i,color:e.Text,description:e.Text,calendarId:t});return e.Service({create_calendar_internal:e.Func([e.Principal,e.Text,e.Text],[n],[]),create_event:e.Func([t,e.Text,e.Text,i,i,e.Text],[f],[]),delete_event:e.Func([c],[e.Bool],[]),get_event:e.Func([c],[e.Opt(f)],[]),get_events_for_range:e.Func([t,i,i],[e.Vec(f)],[]),update_event:e.Func([c,e.Opt(e.Text),e.Opt(e.Text),e.Opt(i),e.Opt(i),e.Opt(e.Text)],[e.Opt(f)],[])})},Li="uxrrr-q7777-77774-qaaaq-cai",d0=(e,t={})=>{const r=t.agent||new zt({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),Rr.createActor(ec,{agent:r,canisterId:e,...t.actorOptions})};d0(Li);const tc=async(e,t,r,n)=>{const i="http://localhost:4943",c=new zt({host:i,identity:r||void 0});try{await c.fetchRootKey()}catch(o){console.warn('Unable to fetch root key. Ensure local replica is running or network is "ic".',o)}return Rr.createActor(t,{agent:c,canisterId:e})},v0=async e=>{const t=Qi;return console.log("getUserRegistryActor called with:",{userRegistryCanisterId:Qi,identity:e?"present":"null",processEnvUserRegistry:"ulvla-h7777-77774-qaacq-cai",finalCanisterId:t}),tc(t,Da,e)},T0=async e=>{const t=Li;return console.log("getCalendarCanisterActor called with:",{calendarCanisterId:Li,identity:"null",processEnvCalendar:"uxrrr-q7777-77774-qaaaq-cai",finalCanisterId:t}),tc(t,ec,e)};console.log("actors.ts updated with specific canister imports and actor creation functions.");export{Ps as A,ao as E,xe as P,A0 as S,T0 as a,Hn as b,Mr as c,zf as d,Gf as e,On as f,v0 as g,Pn as h,Gi as r,jt as s,ze as t,dn as u,jf as w};
